---
title: Quality of Service (QoS) in Microsoft Teams
author: rmw2890
ms.author: MyAdvisor
manager: Serdars
ms.date: 02/16/2018
ms.topic: article
ms.service: msteams
description: "Bereiten Sie das Netzwerk Ihrer Organisation für Quality of Service (QoS) in Microsoft Teams vor."
MS.collection: Strat_MT_TeamsAdmin
ms.openlocfilehash: 61bebd64c7d1478c16e114631b696dee2bf59625
ms.sourcegitcommit: 85105cb4e42ae8eb6e7e76eaf6d4dd5b9568cf41
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 02/19/2018
---
<a name="quality-of-service-qos-in-microsoft-teams"></a><span data-ttu-id="c6368-103">Quality of Service (QoS) in Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="c6368-103">Quality of Service (QoS) in Microsoft Teams</span></span>
==========================================
<span data-ttu-id="c6368-104">Dieses Handbuch soll Sie beim Vorbereiten des Netzwerks Ihrer Organisation für Quality of Service (QoS) in Microsoft Teams unterstützen.</span><span class="sxs-lookup"><span data-stu-id="c6368-104">This guide will help you prepare your organization's network for Quality of Service (QoS) in Teams.</span></span>


<span data-ttu-id="c6368-105">Quality of Service (QoS) ist ein Mechanismus, mit dem Sie bestimmte Typen von Netzwerkdatenverkehr priorisieren können.</span><span class="sxs-lookup"><span data-stu-id="c6368-105">Quality of Service (QoS) is a mechanism that lets you prioritize certain types of network traffic.</span></span> <span data-ttu-id="c6368-106">Die Priorisierung des Datenverkehrs für Echtzeitkommunikationsdienste wie Microsoft Teams spielt eine wichtige Rolle dabei, Geschäftsbenutzern optimales Arbeiten zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="c6368-106">Prioritizing the traffic for real-time communications services such as Teams is important in order to deliver a business-grade user experience.</span></span> <span data-ttu-id="c6368-107">Damit QoS wirklich effektiv ist, muss eine QoS-fähige End-to-End-Verbindung konfiguriert werden (PC, Netzwerkswitches und Router für die Cloud), da Pfadbestandteile ohne QoS-Unterstützung die Qualität des gesamten Anrufs beeinträchtigen können.</span><span class="sxs-lookup"><span data-stu-id="c6368-107">For QoS to be truly effective, a QoS-capable connection must be configured end-to-end (PC, network switches, and routers to the cloud), because any part in the path that fails to support QoS could degrade the quality of the entire call.</span></span>


![Screenshot eines Diagramms, das die Beziehung zwischen den Netzwerken einer Organisation und Office 365-Diensten veranschaulicht](media/Qos-in-Teams-Image1.png)

 

<span data-ttu-id="c6368-109">In den meisten Fällen ist das Verbindungsnetzwerk ein nicht verwaltetes Netzwerk oder eine Internetverbindung.</span><span class="sxs-lookup"><span data-stu-id="c6368-109">In most cases, the interconnect network will be an unmanaged network, an internet connection.</span></span> <span data-ttu-id="c6368-110">[ExpressRoute](https://azure.microsoft.com/documentation/articles/expressroute-introduction/) ist eine der verfügbaren Optionen für End-to-End-QoS.</span><span class="sxs-lookup"><span data-stu-id="c6368-110">One option available to address end-to-end QoS is [ExpressRoute](https://azure.microsoft.com/documentation/articles/expressroute-introduction/).</span></span> <span data-ttu-id="c6368-111">Wir empfehlen, QoS auch in den Teilen des Netzwerks zu implementieren, über die Sie die Kontrolle haben, also in Ihrem lokalen Netzwerk.</span><span class="sxs-lookup"><span data-stu-id="c6368-111">It is our recommendation to still implement QoS on the portions of the network you have control over, namely your on-premises network.</span></span> <span data-ttu-id="c6368-112">Dadurch können Sie die Qualität der Arbeitsauslastungen für Echtzeitkommunikation in der gesamten Bereitstellung erhöhen und Engpässe in der vorhandenen Bereitstellung abschwächen.</span><span class="sxs-lookup"><span data-stu-id="c6368-112">This will increase the quality of real time communication workloads throughout your deployment and will alleviate choke points in your existing deployment.</span></span> 

## <a name="objectives"></a><span data-ttu-id="c6368-113">Ziele</span><span class="sxs-lookup"><span data-stu-id="c6368-113">Objectives</span></span> 

<span data-ttu-id="c6368-114">Schwerpunkt des Handbuchs ist die Priorisierung des Datenverkehrs für die Echtzeitkommunikation von Microsoft Teams, das heißt Sprache und Video.</span><span class="sxs-lookup"><span data-stu-id="c6368-114">This guide will focus on how to prioritize Teams real-time communications traffic, namely voice and video.</span></span> <span data-ttu-id="c6368-115">Andere Datenverkehrstypen können ebenfalls gemäß Ihren Anforderungen priorisiert werden.</span><span class="sxs-lookup"><span data-stu-id="c6368-115">Other types of traffic can also be prioritized based on your needs.</span></span>

<span data-ttu-id="c6368-116">Es gibt mehrere Möglichkeiten zum Priorisieren des Datenverkehrs, am häufigsten werden jedoch DSCP-Markierungen (Differentiated Services Code Point) verwendet.</span><span class="sxs-lookup"><span data-stu-id="c6368-116">There are multiple ways to prioritize traffic, but the most common is by using differentiated services code point (DSCP) markings.</span></span> <span data-ttu-id="c6368-117">Sie können basierend auf Portbereichen, aber auch über Gruppenrichtlinienobjekte angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="c6368-117">They can be applied based on port ranges but also via Group Policy objects.</span></span> <span data-ttu-id="c6368-118">Wir gehen in diesem Dokument auf beide Möglichkeiten ein.</span><span class="sxs-lookup"><span data-stu-id="c6368-118">We will cover both in this document.</span></span>

<span data-ttu-id="c6368-119">Durch Steuern der DSCP-Markierungen mithilfe von Gruppenrichtlinienobjekten (Group Policy Objects, GPOs) stellen Sie sicher, dass in eine Domäne eingebundene Computer die richtigen Einstellungen erhalten und dass diese Einstellungen nur von einem Administrator verwaltet werden können.</span><span class="sxs-lookup"><span data-stu-id="c6368-119">Controlling the DSCP marking via Group Policy objects (GPO) ensures that domain-joined computers receive the correct settings and that these settings can only be managed by an administrator.</span></span> 

<span data-ttu-id="c6368-120">Sie müssen sich dessen bewusst sein, dass QoS nur funktioniert, wenn sie für alle Verbindungen zwischen Anrufer und Angerufenem implementiert ist.</span><span class="sxs-lookup"><span data-stu-id="c6368-120">It’s important to understand that QoS only works when implemented on all links connecting caller to callee.</span></span> <span data-ttu-id="c6368-121">Wenn Sie QoS im internen Netzwerk verwenden und Benutzer sich von einem Remotestandort aus anmelden, können Sie nur innerhalb des internen verwalteten Netzwerks Prioritäten festlegen.</span><span class="sxs-lookup"><span data-stu-id="c6368-121">If we use QoS on the internal network and a user signs in from a remote location, we can only prioritize within our internal, managed, network.</span></span> <span data-ttu-id="c6368-122">Verwaltete Verbindungen mit Remotestandorten durch Implementierung eines VPNs sind zwar möglich, aber es wird nicht empfohlen, Datenverkehr für Echtzeitkommunikation über das VPN zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="c6368-122">While remote locations could receive a managed connection by implementing a VPN, it is not recommended to run real-time communications traffic over the VPN.</span></span>

> [!NOTE]
> <span data-ttu-id="c6368-123">Wir empfehlen, für über ein VPN verbundene Remotebenutzer getrenntes Tunneln zu implementieren, um die Benutzerfreundlichkeit zu maximieren.</span><span class="sxs-lookup"><span data-stu-id="c6368-123">Our recommendation is to implement split tunneling for VPN connected remote users to maximize the user experience.</span></span> <span data-ttu-id="c6368-124">Weitere Informationen finden Sie im [Bereitstellungsleitfaden für geteilte Tunnel für VPN-Verbindungen](https://myadvisor.fasttrack.microsoft.com/CloudVoice/Downloads?SelectedIDs=5_1_0_9 ).</span><span class="sxs-lookup"><span data-stu-id="c6368-124">See the document [Deploy-Guidance-VPN Split Tunnel](https://myadvisor.fasttrack.microsoft.com/CloudVoice/Downloads?SelectedIDs=5_1_0_9 ) for more information.</span></span>

<span data-ttu-id="c6368-125">In einer globalen Organisation mit verwalteten Verbindungen über mehrere Kontinente hinweg wird QoS dringend empfohlen, da die Bandbreite im Vergleich zum lokalen Netzwerk (LAN) begrenzt ist.</span><span class="sxs-lookup"><span data-stu-id="c6368-125">In a global organization with managed links spanning continents, QoS is highly recommended since the bandwidth is limited in comparisons to the local network (LAN).</span></span>

## <a name="quality-of-service"></a><span data-ttu-id="c6368-126">Quality of Service</span><span class="sxs-lookup"><span data-stu-id="c6368-126">Managing Quality of Service</span></span>

<span data-ttu-id="c6368-127">Um ein garantiertes Dienstniveau für eine Anwendung im Netzwerk zu gewährleisten, müssen die zugrunde liegenden Netzwerkgeräte in der Lage sein, verschiedene Datenverkehrstypen zu klassifizieren.</span><span class="sxs-lookup"><span data-stu-id="c6368-127">In order to provide a guaranteed level of service for an application on the network, the underlying network devices must have a way to classify different types of traffic.</span></span> <span data-ttu-id="c6368-128">So muss zum Beispiel ein Router zwischen Sprachdatenverkehr und normalem Datenverkehr für Webbrowsen unterscheiden können, wenn der Sprachdatenverkehr vorrangig behandelt werden soll.</span><span class="sxs-lookup"><span data-stu-id="c6368-128">A router, for example, must be able to distinguish between voice traffic and normal web browsing traffic, if there is an expectation that voice receives better treatment.</span></span> 

<span data-ttu-id="c6368-129">Differenzierte Dienste (DiffServ) stellen ein Framework bereit, in dem der Datenverkehr von Netzwerkgeräten mit Prioritäten behandelt wird, die auf dem Feld für den Diensttyp (Type of Service, ToS) im Header von IPv4-/IPv6-Paketen basieren.</span><span class="sxs-lookup"><span data-stu-id="c6368-129">Differentiated Services (DiffServ) provides a framework in which traffic is treated by network devices with priorities based on the type of services (ToS) field in the header of an IPv4/IPv6 packet.</span></span> <span data-ttu-id="c6368-130">Die sechs wichtigsten Bits des DiffServ-Felds werden als Differentiated Services Code Point oder DSCP bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="c6368-130">The six most significant bits of the DiffServ field is known as the Differentiated Services Code Point, or DSCP.</span></span> <span data-ttu-id="c6368-131">Mithilfe dieses Frameworks kann Datenverkehr als ein bestimmter Typ (Sprache) klassifiziert und dann markiert werden (101110 oder in Dezimalschreibweise 46). Wenn dann Netzwerkgeräte diese Markierungen verarbeiten, kann der Datenverkehr entsprechend priorisiert werden (in diesem Beispiel als „Expedited Forwarding“).</span><span class="sxs-lookup"><span data-stu-id="c6368-131">Using this framework, traffic can be classified as a particular type of traffic (voice), and then marked (101110, or 46 in decimal), such that when network devices process these markings, the traffic can be prioritized accordingly (Expedited Forwarding, in this example).</span></span>

<span data-ttu-id="c6368-132">Wenn Netzwerkdatenverkehr einen Router erreicht, wird er in einer Warteschlange platziert. Wenn QoS nicht implementiert ist, ist im Wesentlichen nur eine Warteschlange vorhanden, und die Daten werden nach dem FIFO-Prinzip (First In, First Out) behandelt. Das heißt, Sprachdatenverkehr (bei dem sich Verzögerungen sehr deutlich bemerkbar machen) könnte durch Datenverkehr von Onlinestreamingdiensten ausgebremst werden.</span><span class="sxs-lookup"><span data-stu-id="c6368-132">When network traffic enters a router, the traffic is placed into a queue – if there is no QoS in place, essentially there is only one queue, and data is treated as first-in, first-out. That means voice traffic (which is very sensitive to delays) could get stuck behind traffic from online streaming services.</span></span> <span data-ttu-id="c6368-133">Bei der Implementierung von QoS können mehrere Warteschlangen mit unterschiedlichen Funktionen für die Verwaltung von Überlastungen (z. B. Priority Queuing (PQ) und Class Based Weighted Fair Queue (CBWFQ) von Cisco) und die Vermeidung von Überlastungen (z. B. Weighted Random Early Detection (WRED)) definiert werden.</span><span class="sxs-lookup"><span data-stu-id="c6368-133">When implementing QoS, multiple queues can be defined, with different congestion management features (such as Cisco’s Priority Queuing (PQ) and Class Based Weighted Fair Queue (CBWFQ)) and congestion avoidance features (such as Weighted Random Early Detection (WRED)).</span></span>

![Screenshot eines Diagramms, das QoS-Warteschlangen in Microsoft Teams veranschaulicht](media/Qos-in-Teams-Image2.png)

<span data-ttu-id="c6368-135">Abbildung 1: Visualisierung von QoS-Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="c6368-135">Figure 1: QoS queues visualized</span></span>

<span data-ttu-id="c6368-136">Wenn diese Elemente implementiert sind, kann eine vorhersagbare Quality of Service bereitgestellt werden, da jetzt im zugrunde liegenden verwalteten Netzwerk festgelegt ist, wie der Datenverkehr klassifiziert, markiert und priorisiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="c6368-136">Once these pieces are in place, a predictable quality of service can be delivered, as the underlying managed network now understands how to classify, mark and prioritize traffic.</span></span> <span data-ttu-id="c6368-137">Im Hinblick auf Microsoft Teams ist das wichtigste Konfigurationselement die Klassifizierung und Markierung von Paketen. Um die Konfiguration der Anwendung mit der zugrunde liegenden Netzwerkkonfiguration in Einklang zu bringen und eine erfolgreiche End-to-End-QoS zu implementieren, ist jedoch sorgfältige Planung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="c6368-137">From the Teams perspective, the most important configuration item is the classification and marking of packets – but careful planning is involved to align the application’s configuration with the underlying network configuration for end-to-end QoS to be successful.</span></span>

## <a name="qos-scenarios"></a><span data-ttu-id="c6368-138">QoS-Szenarien</span><span class="sxs-lookup"><span data-stu-id="c6368-138">QoS scenarios</span></span>

<span data-ttu-id="c6368-139">Unsere Ratschläge für die Implementierung von QoS für Microsoft Teams basieren auf vier Ausgangsszenarien:</span><span class="sxs-lookup"><span data-stu-id="c6368-139">When implementing QoS for Teams, we’ve based our guidance on four starting scenarios:</span></span>

1.  <span data-ttu-id="c6368-140">Sie haben Microsoft Teams bereitgestellt oder nehmen die Bereitstellung gerade vor, und Sie planen die Implementierung von QoS über portbasierte Markierungen.</span><span class="sxs-lookup"><span data-stu-id="c6368-140">You’ve deployed or are deploying Teams and are planning on implementing QoS via Port Based Tagging.</span></span> <span data-ttu-id="c6368-141">Portbasierte Markierungen stellen die zuverlässigste Methode dar, da sie universell auf allen Plattformen funktionieren und sich am einfachsten implementieren lassen.</span><span class="sxs-lookup"><span data-stu-id="c6368-141">Port Based Tagging is the most reliable method since it works universally throughout all platforms and is the easiest to implement.</span></span> 

2.  <span data-ttu-id="c6368-142">Sie haben Microsoft Teams bereitgestellt oder nehmen die Bereitstellung gerade vor, und Sie planen die Implementierung von QoS über Markierungen durch Gruppenrichtlinienobjekte.</span><span class="sxs-lookup"><span data-stu-id="c6368-142">You’ve deployed or are deploying Teams and are planning to implement QoS via Group Policy Object tagging.</span></span> <span data-ttu-id="c6368-143">Diese Vorgehensweise wird manchmal in Verbindung mit Szenario 1 verwendet.</span><span class="sxs-lookup"><span data-stu-id="c6368-143">This is sometimes used in combination with scenario 1.</span></span> <span data-ttu-id="c6368-144">Dieses unten beschriebene Szenario ist zwar absolut zulässig, aber Sie müssen sich dessen bewusst sein, dass es nur für Windows-Clients funktioniert, die in eine Domäne eingebunden sind.</span><span class="sxs-lookup"><span data-stu-id="c6368-144">While this scenario is entirely valid and described below, it is important to understand this will only work for Domain Joined Windows Clients.</span></span> <span data-ttu-id="c6368-145">Geräte, die nicht als Windows-Clients in eine Domäne eingebunden sind, sind nicht für QoS-/DSCP-Markierungen aktiviert.</span><span class="sxs-lookup"><span data-stu-id="c6368-145">Any device that is not a Windows Domain Joined Client will not be enabled for QoS\DSCP Tagging.</span></span> 

3.  <span data-ttu-id="c6368-146">Sie haben Skype for Business Online einschließlich QoS-Markierungen bereitgestellt und stellen jetzt Microsoft Teams bereit.</span><span class="sxs-lookup"><span data-stu-id="c6368-146">You have Skype for Business Online deployed including QoS Tagging and are now deploying Teams.</span></span> <span data-ttu-id="c6368-147">Wenn dies auf Sie zutrifft, respektiert Microsoft Teams die vorhandene Konfiguration und verwendet die gleichen Portbereiche und Markierungen wie der Skype for Business-Client.</span><span class="sxs-lookup"><span data-stu-id="c6368-147">If this is you, Teams will respect the existing configuration and will use the same port ranges and tagging as the Skype for Business client.</span></span> <span data-ttu-id="c6368-148">Es sollte keine zusätzliche Konfiguration erforderlich sein.</span><span class="sxs-lookup"><span data-stu-id="c6368-148">No additional configuration should be needed.</span></span> 
    > [!NOTE]
    > <span data-ttu-id="c6368-149">Wenn Sie QoS-Markierungen mit Anwendungsnamen über Gruppenrichtlinien verwenden, sollten Sie „Teams.exe“ als Anwendungsnamen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="c6368-149">If you're using Application Name QoS tagging via Group Policy you should add “Teams.exe” as Application Name.</span></span>
4.  <span data-ttu-id="c6368-150">Sie haben Microsoft Teams bereitgestellt oder nehmen die Bereitstellung gerade vor, und Sie möchten QoS über portbasierte Markierungen mit einem benutzerdefinierten Portbereich implementieren.</span><span class="sxs-lookup"><span data-stu-id="c6368-150">You’ve deployed or are deploying Teams and want to implement QoS via port-based tagging with a custom port range.</span></span>

## <a name="recommended-differentiated-services-code-point-dscp-markings"></a><span data-ttu-id="c6368-151">Empfohlene DSCP-Markierungen (Differentiated Services Code Point)</span><span class="sxs-lookup"><span data-stu-id="c6368-151">Recommended differentiated services code point (DSCP) markings</span></span>

<span data-ttu-id="c6368-152">Im ersten Schritt klassifizieren Sie die Datenverkehrsflüsse (beispielsweise Audio und Video). Dazu nutzen Sie die eindeutigen, nicht überlappenden Portbereiche mit einem DSCP-Wert.</span><span class="sxs-lookup"><span data-stu-id="c6368-152">The first step is to classify the traffic flows (such as audio and video) by leveraging the unique, non-overlapping port ranges with a DSCP-value.</span></span> <span data-ttu-id="c6368-153">Der hier zugewiesene DSCP-Wert bestimmt die Priorität des Datenverkehrs im Netzwerk (basierend auf der Netzwerkkonfiguration).</span><span class="sxs-lookup"><span data-stu-id="c6368-153">The DSCP value assigned here will determine the priority of the traffic going through the network (based on the network configuration).</span></span> <span data-ttu-id="c6368-154">Jede Arbeitsauslastung erhält einen eigenen DSCP-Wert. Manche Kunden legen möglicherweise für Sprache und Video den gleichen Wert fest, sodass beide im Netzwerk die gleiche Priorität haben.</span><span class="sxs-lookup"><span data-stu-id="c6368-154">Each workload gets its own DSCP value, although some customers might set the same value on voice and video, giving them the same priority in the network.</span></span> 

<span data-ttu-id="c6368-155">Welchen DSCP-Wert Sie verwenden sollten, hängt von der Priorität der Arbeitsauslastung ab.</span><span class="sxs-lookup"><span data-stu-id="c6368-155">What DSCP value to use depends on how a workload is prioritized.</span></span> <span data-ttu-id="c6368-156">Beispielsweise kann es aufgrund von Geschäftsanforderungen notwendig sein, die Anwendungsfreigabe mit der gleichen Priorität wie Video zu behandeln (und sie entsprechend mit dem gleichen DSCP-Wert wie Video zu markieren).</span><span class="sxs-lookup"><span data-stu-id="c6368-156">For example, business requirements could dictate that application sharing is to be treated with the same level of priority as video (and as such, marked with the same DSCP-value as video).</span></span> <span data-ttu-id="c6368-157">In anderen Umgebungen ist möglicherweise bereits eine QoS-Strategie vorhanden.</span><span class="sxs-lookup"><span data-stu-id="c6368-157">Other environments might have an existing QoS strategy in place already.</span></span> 

<span data-ttu-id="c6368-158">Tabelle 1 zeigt die erforderlichen DSCP-Markierungen bei Nutzung von Microsoft Teams mit ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="c6368-158">Table 1 below shows the required DSCP markings when utilizing Teams with ExpressRoute.</span></span> <span data-ttu-id="c6368-159">Dies kann ein guter Ausgangspunkt für Kunden sein, die nicht sicher sind, welche Markierungen sie in ihrer eigenen Umgebung verwenden sollen.</span><span class="sxs-lookup"><span data-stu-id="c6368-159">This could serve as a good starting point for customers unsure what to use in their own environment.</span></span> <span data-ttu-id="c6368-160">Weitere Informationen finden Sie unter [QoS-Anforderungen für ExpressRoute](https://docs.microsoft.com/azure/expressroute/expressroute-qos).</span><span class="sxs-lookup"><span data-stu-id="c6368-160">To learn more, read [ExpressRoute QoS requirements](https://docs.microsoft.com/azure/expressroute/expressroute-qos).</span></span>


| <span data-ttu-id="c6368-161">Clientquellport</span><span class="sxs-lookup"><span data-stu-id="c6368-161">Client source port</span></span>|<span data-ttu-id="c6368-162">Protokoll</span><span class="sxs-lookup"><span data-stu-id="c6368-162">Protocol</span></span>|<span data-ttu-id="c6368-163">Medienkategorie</span><span class="sxs-lookup"><span data-stu-id="c6368-163">Media category</span></span>|<span data-ttu-id="c6368-164">Allgemeiner DSCP-Wert</span><span class="sxs-lookup"><span data-stu-id="c6368-164">Common DSCP value</span></span>|<span data-ttu-id="c6368-165">DSCP-Klasse</span><span class="sxs-lookup"><span data-stu-id="c6368-165">DSCP class</span></span>|
|---------|---------|---------|---------|---------|
| <span data-ttu-id="c6368-166">50000–50019</span><span class="sxs-lookup"><span data-stu-id="c6368-166">50,000 – 50,019</span></span>|<span data-ttu-id="c6368-167">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="c6368-167">TCP/UDP</span></span>|<span data-ttu-id="c6368-168">Audio</span><span class="sxs-lookup"><span data-stu-id="c6368-168">Audio</span></span>|<span data-ttu-id="c6368-169">46</span><span class="sxs-lookup"><span data-stu-id="c6368-169">46</span></span>|<span data-ttu-id="c6368-170">Expedited Forwarding (EF)</span><span class="sxs-lookup"><span data-stu-id="c6368-170">Expedited Forwarding (EF)</span></span>|
| <span data-ttu-id="c6368-171">50020–50039</span><span class="sxs-lookup"><span data-stu-id="c6368-171">50,020 – 50,039</span></span>|<span data-ttu-id="c6368-172">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="c6368-172">TCP/UDP</span></span>|<span data-ttu-id="c6368-173">Video</span><span class="sxs-lookup"><span data-stu-id="c6368-173">Video</span></span>|<span data-ttu-id="c6368-174">34</span><span class="sxs-lookup"><span data-stu-id="c6368-174">3-4</span></span>|<span data-ttu-id="c6368-175">Assured Forwarding (AF41)</span><span class="sxs-lookup"><span data-stu-id="c6368-175">Assured Forwarding (AF41)</span></span>|
| <span data-ttu-id="c6368-176">50040–50059</span><span class="sxs-lookup"><span data-stu-id="c6368-176">50,040 – 50,059</span></span>|<span data-ttu-id="c6368-177">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="c6368-177">TCP/UDP</span></span>|<span data-ttu-id="c6368-178">Anwendungs-/Desktopfreigabe und Dateiübertragung</span><span class="sxs-lookup"><span data-stu-id="c6368-178">Application/Desktop Sharing and File Transfer</span></span>|<span data-ttu-id="c6368-179">18</span><span class="sxs-lookup"><span data-stu-id="c6368-179">18</span></span>|<span data-ttu-id="c6368-180">Klassenauswahl (CS3)</span><span class="sxs-lookup"><span data-stu-id="c6368-180">Class Selector (CS3)</span></span>|

<span data-ttu-id="c6368-181">Tabelle 1: DSCP-Markierungen</span><span class="sxs-lookup"><span data-stu-id="c6368-181">Table 1: DSCP markings</span></span>

<span data-ttu-id="c6368-182">Hier sind ein paar Bedingungen, die Sie verstehen müssen, wenn Sie die Informationen in Tabelle 1 verwenden:</span><span class="sxs-lookup"><span data-stu-id="c6368-182">Here are some caveats to understand when you use the information in Table 1:</span></span>

- <span data-ttu-id="c6368-183">Dateifreigabe und Anwendungsfreigabe verwenden den gleichen Quellportbereich und würden daher bei Verwendung von portbasierten Markierungen die gleichen DSCP-Markierungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="c6368-183">File sharing and application sharing use the same source port range – and as such, would use the same DSCP markings when using Port Based Tagging.</span></span> <span data-ttu-id="c6368-184">Aus diesem Grund sollten Sie ermitteln, welche Priorität für *beide* Modalitäten am besten geeignet ist („Interactive“ oder „Default“).</span><span class="sxs-lookup"><span data-stu-id="c6368-184">Because of this, it should be determined which priority is most applicable to *both* modalities (Interactive or Default).</span></span>
    
- <span data-ttu-id="c6368-185">Wenn Sie für die Zukunft die Implementierung von ExpressRoute planen und QoS noch nicht implementiert ist, empfehlen wir, den oben genannten Ratschlägen zu folgen, sodass die DSCP-Werte vom Absender bis zum Empfänger identisch sind.</span><span class="sxs-lookup"><span data-stu-id="c6368-185">If there’s a plan to implement ExpressRoute in the future and QoS has not yet been implemented, the recommendation is to follow the guidance given above so that DSCP values are the same from sender to receiver.</span></span> 
    
## <a name="source-ports-used-by-teams"></a><span data-ttu-id="c6368-186">Von Microsoft Teams verwendete Quellports</span><span class="sxs-lookup"><span data-stu-id="c6368-186">Source ports used by Teams</span></span>

<span data-ttu-id="c6368-187">In Microsoft Teams sollte QoS basierend auf den Quellports konfiguriert werden, die von den verschiedenen Arbeitsauslastungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c6368-187">In Teams, QoS should be configured based on the source ports used by the different workloads.</span></span> <span data-ttu-id="c6368-188">Die serverseitigen und clientseitigen Portbereiche sind an dieser Stelle nicht konfigurierbar.</span><span class="sxs-lookup"><span data-stu-id="c6368-188">Both server-side and client-side port ranges are non-configurable at this point.</span></span> 

<span data-ttu-id="c6368-189">Verwenden Sie zum Bereitstellen von QoS die Clientquellportbereiche aus Tabelle 2 mit den zugehörigen QoS-DSCP-Markierungen.</span><span class="sxs-lookup"><span data-stu-id="c6368-189">To deploy QoS, use the client source port ranges listed in Table 2, with their associated QoS DSCP markings.</span></span>

| <span data-ttu-id="c6368-190">Clientquellport</span><span class="sxs-lookup"><span data-stu-id="c6368-190">Client source port</span></span>|<span data-ttu-id="c6368-191">Protokoll</span><span class="sxs-lookup"><span data-stu-id="c6368-191">Protocol</span></span>|<span data-ttu-id="c6368-192">Medienkategorie</span><span class="sxs-lookup"><span data-stu-id="c6368-192">Media category</span></span>|<span data-ttu-id="c6368-193">Allgemeiner DSCP-Wert</span><span class="sxs-lookup"><span data-stu-id="c6368-193">Common DSCP value</span></span>|<span data-ttu-id="c6368-194">DSCP-Klasse</span><span class="sxs-lookup"><span data-stu-id="c6368-194">DSCP class</span></span>|
|---------|---------|---------|---------|---------|
| <span data-ttu-id="c6368-195">50000–50019</span><span class="sxs-lookup"><span data-stu-id="c6368-195">50,000 – 50,019</span></span>|<span data-ttu-id="c6368-196">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="c6368-196">TCP/UDP</span></span>|<span data-ttu-id="c6368-197">Audio</span><span class="sxs-lookup"><span data-stu-id="c6368-197">Audio</span></span>|<span data-ttu-id="c6368-198">46</span><span class="sxs-lookup"><span data-stu-id="c6368-198">46</span></span>|<span data-ttu-id="c6368-199">Expedited Forwarding (EF)</span><span class="sxs-lookup"><span data-stu-id="c6368-199">Expedited Forwarding (EF)</span></span>|
| <span data-ttu-id="c6368-200">50020–50039</span><span class="sxs-lookup"><span data-stu-id="c6368-200">50,020 – 50,039</span></span>|<span data-ttu-id="c6368-201">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="c6368-201">TCP/UDP</span></span>|<span data-ttu-id="c6368-202">Video</span><span class="sxs-lookup"><span data-stu-id="c6368-202">Video</span></span>|<span data-ttu-id="c6368-203">34</span><span class="sxs-lookup"><span data-stu-id="c6368-203">3-4</span></span>|<span data-ttu-id="c6368-204">Assured Forwarding (AF41)</span><span class="sxs-lookup"><span data-stu-id="c6368-204">Assured Forwarding (AF41)</span></span>|
| <span data-ttu-id="c6368-205">50040–50059</span><span class="sxs-lookup"><span data-stu-id="c6368-205">50,040 – 50,059</span></span>|<span data-ttu-id="c6368-206">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="c6368-206">TCP/UDP</span></span>|<span data-ttu-id="c6368-207">Anwendungs-/Desktopfreigabe und Dateiübertragung</span><span class="sxs-lookup"><span data-stu-id="c6368-207">Application/Desktop Sharing and File Transfer</span></span>|<span data-ttu-id="c6368-208">18</span><span class="sxs-lookup"><span data-stu-id="c6368-208">18</span></span>|<span data-ttu-id="c6368-209">Klassenauswahl (CS3)</span><span class="sxs-lookup"><span data-stu-id="c6368-209">Class Selector (CS3)</span></span>|

<span data-ttu-id="c6368-210">Tabelle 2: Clientquellportbereiche</span><span class="sxs-lookup"><span data-stu-id="c6368-210">Table 2: Client source port ranges</span></span>

> [!NOTE]
> <span data-ttu-id="c6368-211">Wenn Sie QoS bereits basierend auf den Quellportbereichen für Skype for Business Online konfiguriert haben, gilt die gleiche Konfiguration auch für Microsoft Teams. Sie müssen keine weiteren Änderungen vornehmen.</span><span class="sxs-lookup"><span data-stu-id="c6368-211">If you've already configured QoS based on source port ranges for Skype for Business Online, the same configuration will apply to Teams and no further changes are required.</span></span> <span data-ttu-id="c6368-212">Wenn Sie Skype for Business Server (lokal) bereitgestellt haben, müssen Sie Ihre QoS-Richtlinien überarbeiten.</span><span class="sxs-lookup"><span data-stu-id="c6368-212">If you’ve deployed Skype for Business Server (on premises), you will need to redesign your QoS Policies.</span></span>

## <a name="setting-differentiated-services-code-point-dscp-markings"></a><span data-ttu-id="c6368-213">Festlegen von DSCP-Markierungen (Differentiated Services Code Point)</span><span class="sxs-lookup"><span data-stu-id="c6368-213">Setting differentiated services code point (DSCP) markings</span></span>

<span data-ttu-id="c6368-214">Es gibt mehrere Methoden zum Festlegen der richtigen DSCP-Markierungen für die Klassifizierung des Datenverkehrs.</span><span class="sxs-lookup"><span data-stu-id="c6368-214">There are multiple approaches to setting the proper DSCP markings for traffic classification.</span></span>

- <span data-ttu-id="c6368-215">DSCP-Markierungen am Endpunkt: Diese Option wird im Allgemeinen bevorzugt, da der Endpunkt selbst die richtigen Markierungen bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="c6368-215">DSCP marking at the endpoint: This is the preferred option in general, as the endpoint itself is providing the proper markings.</span></span> <span data-ttu-id="c6368-216">Zurzeit können Sie dazu ein GPO verwenden. Dies ist aber nur auf Windows-Clients möglich, die in eine Domäne eingebunden sind.</span><span class="sxs-lookup"><span data-stu-id="c6368-216">Currently this could be done by using a GPO, but this is only possible on domain-joined Windows clients.</span></span> <span data-ttu-id="c6368-217">Mac OS X-Clients oder mobile Clients zum Beispiel stellen keinen Mechanismus zum Markieren des Datenverkehrs mit DSCP-Werten bereit.</span><span class="sxs-lookup"><span data-stu-id="c6368-217">Mac OSX or mobile clients, for example, do not provide a mechanism to mark traffic with DSCP values.</span></span>

- <span data-ttu-id="c6368-218">Portbasierte Markierungen mithilfe von ACLs in Routern: Diese Option wird sehr häufig verwendet, vor allem in heterogenen Umgebungen mit Windows- und Mac-Computern.</span><span class="sxs-lookup"><span data-stu-id="c6368-218">Port-based using ACLs on routers: This is a very common option encountered in heterogeneous environments of Windows and Mac.</span></span> <span data-ttu-id="c6368-219">In diesem Szenario markiert das Netzwerkteam den Datenverkehr an den Routern für eingehenden/ausgehenden Datenverkehr (normalerweise im WAN (Wide Area Network, Fernnetz)) basierend auf den für die einzelnen Modalitäten definierten Quellportbereichen.</span><span class="sxs-lookup"><span data-stu-id="c6368-219">In this scenario, the network team marks the traffic at the ingress/egress routers (typically on the Wide Area Network (WAN)) based on the source port ranges defined for each modality.</span></span> <span data-ttu-id="c6368-220">Diese Vorgehensweise funktioniert zwar plattformübergreifend, allerdings wird dabei nur der WAN-Edge markiert (nicht die gesamte Strecke bis zum Clientcomputer). Außerdem entsteht Verwaltungsaufwand.</span><span class="sxs-lookup"><span data-stu-id="c6368-220">While this works across platforms, it only marks at the WAN edge – not all the way to the client machine – and incurs management overhead.</span></span>
    
- <span data-ttu-id="c6368-221">Eine Kombination aus DSCP-Markierungen auf dem Client und portbasierten ACLs in Routern</span><span class="sxs-lookup"><span data-stu-id="c6368-221">A combination of DSCP markings on the client and port-based ACLs on routers.</span></span>
    
<span data-ttu-id="c6368-222">Wir empfehlen nach Möglichkeit eine Kombination aus beiden, das heißt die Verwendung eines GPOs für die Mehrheit der Clients sowie die Verwendung von portbasierten Markierungen. Dadurch können Sie sicherstellen, dass QoS zumindest teilweise auf mobile Clients, Macs und andere Clients angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="c6368-222">If possible, we recommend a combination of both, to use a GPO to catch the majority of clients, and to also use port based DSCP tagging to ensure mobile clients, Mac and other clients will still get a (partial) QoS treatment.</span></span>

<span data-ttu-id="c6368-223">Zum Festlegen des DSCP-Werts für den vordefinierten Quellportbereich im Microsoft Teams-Client können Sie richtlinienbasierte QoS innerhalb von Gruppenrichtlinien verwenden.</span><span class="sxs-lookup"><span data-stu-id="c6368-223">Setting the DSCP value for the pre-defined source port range in the Teams client can be done using policy-based QoS within Group Policy.</span></span> <span data-ttu-id="c6368-224">In der folgenden Tabelle wird anhand der genannten Portbereiche für jede Arbeitsauslastung eine Richtlinie erstellt.</span><span class="sxs-lookup"><span data-stu-id="c6368-224">The following table uses the port ranges specified in the table to create a policy for each workload.</span></span>

| <span data-ttu-id="c6368-225">Datenverkehrstyp des Clients</span><span class="sxs-lookup"><span data-stu-id="c6368-225">Client traffic type</span></span>|<span data-ttu-id="c6368-226">Anfang des Portbereichs</span><span class="sxs-lookup"><span data-stu-id="c6368-226">Port range start</span></span>|<span data-ttu-id="c6368-227">Ende des Portbereichs</span><span class="sxs-lookup"><span data-stu-id="c6368-227">Port range end</span></span>|<span data-ttu-id="c6368-228">DSCP-Wert</span><span class="sxs-lookup"><span data-stu-id="c6368-228">DSCP value</span></span>|
|---------|---------|---------|--------|
| <span data-ttu-id="c6368-229">Audio</span><span class="sxs-lookup"><span data-stu-id="c6368-229">Audio</span></span>|<span data-ttu-id="c6368-230">50000</span><span class="sxs-lookup"><span data-stu-id="c6368-230">50000</span></span>|<span data-ttu-id="c6368-231">50019</span><span class="sxs-lookup"><span data-stu-id="c6368-231">50019</span></span>|<span data-ttu-id="c6368-232">46</span><span class="sxs-lookup"><span data-stu-id="c6368-232">46</span></span>|
| <span data-ttu-id="c6368-233">Video</span><span class="sxs-lookup"><span data-stu-id="c6368-233">Video</span></span>|<span data-ttu-id="c6368-234">50020</span><span class="sxs-lookup"><span data-stu-id="c6368-234">50020</span></span>|<span data-ttu-id="c6368-235">50039</span><span class="sxs-lookup"><span data-stu-id="c6368-235">50039</span></span>|<span data-ttu-id="c6368-236">34</span><span class="sxs-lookup"><span data-stu-id="c6368-236">3-4</span></span>|
| <span data-ttu-id="c6368-237">Anwendungsfreigabe</span><span class="sxs-lookup"><span data-stu-id="c6368-237">Application sharing</span></span>|<span data-ttu-id="c6368-238">50040</span><span class="sxs-lookup"><span data-stu-id="c6368-238">50040</span></span>|<span data-ttu-id="c6368-239">50059</span><span class="sxs-lookup"><span data-stu-id="c6368-239">50059</span></span>|<span data-ttu-id="c6368-240">18</span><span class="sxs-lookup"><span data-stu-id="c6368-240">18</span></span>|
| <span data-ttu-id="c6368-241">Dateiübertragung</span><span class="sxs-lookup"><span data-stu-id="c6368-241">File transfer</span></span>|<span data-ttu-id="c6368-242">50040</span><span class="sxs-lookup"><span data-stu-id="c6368-242">50040</span></span>|<span data-ttu-id="c6368-243">50059</span><span class="sxs-lookup"><span data-stu-id="c6368-243">50059</span></span>|<span data-ttu-id="c6368-244">18</span><span class="sxs-lookup"><span data-stu-id="c6368-244">18</span></span>|

<span data-ttu-id="c6368-245">Tabelle 3: Portbereiche nach Datenverkehrstyp</span><span class="sxs-lookup"><span data-stu-id="c6368-245">Table 3: Port ranges by traffic type</span></span>

<span data-ttu-id="c6368-246">Hinweis: Die von Microsoft Teams festgelegten Portbereiche können nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="c6368-246">Note: The port ranges set by Teams cannot be changed or altered.</span></span> <span data-ttu-id="c6368-247">Die neuesten Informationen finden Sie auf dieser Seite: https://support.microsoft.com/kb/2409256.</span><span class="sxs-lookup"><span data-stu-id="c6368-247">Please review this page for the latest information: https://support.microsoft.com/ kb/2409256</span></span>

<span data-ttu-id="c6368-248">Wenn Sie die Portbereiche festgelegt haben, konfigurieren Sie im nächsten Schritt die Einstellungen für richtlinienbasierte QoS in einem Gruppenrichtlinienobjekt (Group Policy Object, GPO).</span><span class="sxs-lookup"><span data-stu-id="c6368-248">Once the port ranges have been determined, the next step is to configure the policy-based QoS settings within a Group Policy Object (GPO).</span></span> <span data-ttu-id="c6368-249">Details zu diesen Schritten finden Sie auf [TechNet](https://technet.microsoft.com/library/jj205371(v=ocs.15).aspx).</span><span class="sxs-lookup"><span data-stu-id="c6368-249">Details for these steps can be found on [TechNet](https://technet.microsoft.com/library/jj205371(v=ocs.15).aspx).</span></span> 

<span data-ttu-id="c6368-250">Die neuen Richtlinien, die Sie erstellt haben, werden erst nach einer Aktualisierung der Gruppenrichtlinien auf den Clientcomputern wirksam.</span><span class="sxs-lookup"><span data-stu-id="c6368-250">The new policies you have created won’t take effect until Group Policy has been refreshed on your client computers.</span></span> <span data-ttu-id="c6368-251">Die Gruppenrichtlinien werden zwar automatisch regelmäßig aktualisiert, aber Sie können die sofortige Aktualisierung erzwingen. Dazu führen Sie auf allen Computern, auf denen die Gruppenrichtlinien aktualisiert werden sollen, den folgenden Befehl aus:</span><span class="sxs-lookup"><span data-stu-id="c6368-251">Although Group Policy periodically refreshes on its own, you can force an immediate refresh by running the following command on each computer where Group Policy needs to be refreshed:</span></span>

        gpudate.exe /force

<span data-ttu-id="c6368-252">Diesen Befehl können Sie über ein beliebiges Befehlsfenster ausführen, das mit Administratoranmeldeinformationen ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="c6368-252">This command can be run from any command window that is running under administrator credentials.</span></span> <span data-ttu-id="c6368-253">Um ein Befehlsfenster mit Administratoranmeldeinformationen auszuführen, klicken Sie auf **Start**, klicken Sie mit der rechten Maustaste auf **Eingabeaufforderung**, und klicken Sie dann auf **Als Administrator ausführen**.</span><span class="sxs-lookup"><span data-stu-id="c6368-253">To open a command window, click **Start**, right-click **Command Prompt**, and then click **Run as administrator**.</span></span>

## <a name="verifying-the-dscp-markings-in-gpo"></a><span data-ttu-id="c6368-254">Überprüfen der DSCP-Markierungen aus dem GPO</span><span class="sxs-lookup"><span data-stu-id="c6368-254">Verifying the DSCP markings in GPO</span></span>

<span data-ttu-id="c6368-255">Um zu überprüfen, ob die Werte aus dem GPO festgelegt wurden, führen Sie die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="c6368-255">To verify that the values from the GPO has been set, please perform the following steps:</span></span>

1.  <span data-ttu-id="c6368-256">Überprüfen Sie mit „gpresult“, ob der lokale PC die Einstellungen aus dem GPO erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="c6368-256">Use gpresult to verify that the settings from the GPO has been received by the local PC.</span></span> <span data-ttu-id="c6368-257">Mit „gpresult /R >gp.txt“ generieren Sie einen Bericht und senden ihn an eine Textdatei („gp.txt“).</span><span class="sxs-lookup"><span data-stu-id="c6368-257">gpresult /R >gp.txt will generate a report and send it to a text file, gp.txt.</span></span>

    ![Screenshot der Administratoreingabeaufforderung, in der der Befehl „gpresult“ ausgeführt wird](media/Qos-in-Teams-Image3.png)

    <span data-ttu-id="c6368-259">Abbildung 2: Überprüfen der angewendeten Gruppenrichtlinienobjekte</span><span class="sxs-lookup"><span data-stu-id="c6368-259">Figure 2: Verify Applied Group Policy Objects</span></span>
    > [!NOTE]
    > <span data-ttu-id="c6368-260">Alternativ können Sie „gpresult /H gp.html“ ausführen, um die gleichen Daten in Form eines benutzerfreundlicheren HTML-Berichts zu erzeugen.</span><span class="sxs-lookup"><span data-stu-id="c6368-260">Alternatively, you can run gpresult /H gp.html to produce the same data in more user-friendly HTML report.</span></span> 
2.  <span data-ttu-id="c6368-261">Suchen Sie in der generierten Datei nach der Überschrift „Angewendete Gruppenrichtlinienobjekte“, und vergewissern Sie sich, dass die Namen der zuvor erstellten GPOs in der Liste der angewendeten Richtlinien enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="c6368-261">In the generated file look for the heading: Applied Group Policy Objects and verify that the names of the GPO’s created earlier is in the list of applied policies.</span></span> 

3.  <span data-ttu-id="c6368-262">Öffnen Sie den Registrierungs-Editor, und navigieren Sie zu:</span><span class="sxs-lookup"><span data-stu-id="c6368-262">Open the registry editor and navigate to:</span></span>

    <span data-ttu-id="c6368-263">HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\QoS\\</span><span class="sxs-lookup"><span data-stu-id="c6368-263">HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\QoS\\</span></span>

    <span data-ttu-id="c6368-264">Überprüfen Sie die unten in Tabelle 3 aufgeführten Registrierungswerte.</span><span class="sxs-lookup"><span data-stu-id="c6368-264">Verify the registry values listed in Table 3 below.</span></span>
    
    | <span data-ttu-id="c6368-265">Name</span><span class="sxs-lookup"><span data-stu-id="c6368-265">Name</span></span> | <span data-ttu-id="c6368-266">Typ</span><span class="sxs-lookup"><span data-stu-id="c6368-266">Type</span></span> | <span data-ttu-id="c6368-267">Daten</span><span class="sxs-lookup"><span data-stu-id="c6368-267">Data</span></span>|
    |---------|---------|---------
    | <span data-ttu-id="c6368-268">Application Name</span><span class="sxs-lookup"><span data-stu-id="c6368-268">Application Name</span></span>|<span data-ttu-id="c6368-269">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-269">REG_SZ</span></span>|<span data-ttu-id="c6368-270">Teams.exe</span><span class="sxs-lookup"><span data-stu-id="c6368-270">Teams.exe</span></span>|
    | <span data-ttu-id="c6368-271">DSCP Value</span><span class="sxs-lookup"><span data-stu-id="c6368-271">DSCP Value</span></span>|<span data-ttu-id="c6368-272">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-272">REG_SZ</span></span>|<span data-ttu-id="c6368-273">46</span><span class="sxs-lookup"><span data-stu-id="c6368-273">46</span></span>|
    | <span data-ttu-id="c6368-274">Local IP</span><span class="sxs-lookup"><span data-stu-id="c6368-274">Second Reflexive Local IP</span></span>|<span data-ttu-id="c6368-275">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-275">REG_SZ</span></span>|*|
    | <span data-ttu-id="c6368-276">Local IP Prefix Length</span><span class="sxs-lookup"><span data-stu-id="c6368-276">Local IP Prefix Length</span></span>|<span data-ttu-id="c6368-277">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-277">REG_SZ</span></span>|*|
    | <span data-ttu-id="c6368-278">Local Port</span><span class="sxs-lookup"><span data-stu-id="c6368-278">Local Port</span></span>|<span data-ttu-id="c6368-279">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-279">REG_SZ</span></span>|<span data-ttu-id="c6368-280">50000-50019</span><span class="sxs-lookup"><span data-stu-id="c6368-280">50000-50019</span></span>|
    | <span data-ttu-id="c6368-281">Protokoll</span><span class="sxs-lookup"><span data-stu-id="c6368-281">Protocol</span></span>|<span data-ttu-id="c6368-282">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-282">REG_SZ</span></span>|*|
    | <span data-ttu-id="c6368-283">Remote IP</span><span class="sxs-lookup"><span data-stu-id="c6368-283">Remote IP</span></span>|<span data-ttu-id="c6368-284">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-284">REG_SZ</span></span>|*|
    | <span data-ttu-id="c6368-285">Remote Ip Prefix</span><span class="sxs-lookup"><span data-stu-id="c6368-285">Remote Ip Prefix</span></span>|<span data-ttu-id="c6368-286">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-286">REG_SZ</span></span>|*|
    | <span data-ttu-id="c6368-287">Remote Port</span><span class="sxs-lookup"><span data-stu-id="c6368-287">Remote Port</span></span>|<span data-ttu-id="c6368-288">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-288">REG_SZ</span></span>|*|
    | <span data-ttu-id="c6368-289">Throttle Rate</span><span class="sxs-lookup"><span data-stu-id="c6368-289">Throttle Rate</span></span>|<span data-ttu-id="c6368-290">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="c6368-290">REG_SZ</span></span>|<span data-ttu-id="c6368-291">-1</span><span class="sxs-lookup"><span data-stu-id="c6368-291">$1</span></span>|
    
    <span data-ttu-id="c6368-292">Tabelle 3: Windows-Registrierungswerte für QoS</span><span class="sxs-lookup"><span data-stu-id="c6368-292">Table 3: Windows registry values for QoS</span></span>

4.  <span data-ttu-id="c6368-293">Vergewissern Sie sich, dass die Angabe für „Application Name“ für den verwendeten Client richtig ist, und dass „DSCP Value“ und „Local Port“ den Einstellungen im GPO entsprechen.</span><span class="sxs-lookup"><span data-stu-id="c6368-293">Verify that the Application Name is correct for the client you are using, and verify that both DSCP value and Local Port reflect the settings in the GPO.</span></span>

## <a name="validating-qos-analyzing-teams-traffic-on-the-network"></a><span data-ttu-id="c6368-294">Validieren von QoS: Analysieren des Microsoft Teams-Datenverkehrs im Netzwerk</span><span class="sxs-lookup"><span data-stu-id="c6368-294">Validating QoS: Analyzing Teams traffic on the network</span></span>

<span data-ttu-id="c6368-295">QoS ist nur wirksam, wenn der durch das GPO festgelegte DSCP-Wert vom Anrufer bis zum Angerufenen vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="c6368-295">The DSCP value set by the GPO needs to be present from caller to callee in order for QoS to be affective.</span></span> <span data-ttu-id="c6368-296">Durch Untersuchen des vom Microsoft Teams-Client generierten Datenverkehrs können wir sicherstellen, dass der DSCP-Wert beim Durchqueren des Netzwerks nicht geändert oder entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="c6368-296">By looking at the traffic generated by the Teams client we can verify that the DSCP is not changed or stripped out when traversing the network.</span></span> 

<span data-ttu-id="c6368-297">Am besten wäre es, den Datenverkehr an der Stelle aufzuzeichnen, an der er das Netzwerk verlässt.</span><span class="sxs-lookup"><span data-stu-id="c6368-297">Preferably we would capture traffic at the network egress point.</span></span> <span data-ttu-id="c6368-298">Sie können Portspiegelung in einem Switch oder Router verwenden, um die Aufzeichnung des Datenverkehrs im Netzwerk zu erleichtern.</span><span class="sxs-lookup"><span data-stu-id="c6368-298">Port mirroring can be used on a switch or router to aid in capturing traffic on the network.</span></span> 

### <a name="looking-at-network-traffic-using-network-monitor"></a><span data-ttu-id="c6368-299">Untersuchen des Netzwerkdatenverkehrs mit dem Netzwerkmonitor</span><span class="sxs-lookup"><span data-stu-id="c6368-299">Looking at network traffic using Network Monitor</span></span>

<span data-ttu-id="c6368-300">Der Netzwerkmonitor ist ein Tool von Microsoft, das Sie herunterladen können, um den Netzwerkdatenverkehr zu analysieren.</span><span class="sxs-lookup"><span data-stu-id="c6368-300">Network Monitor is a tool you can download from Microsoft to analyze network traffic.</span></span> <span data-ttu-id="c6368-301">Laden Sie [Netzwerkmonitor 3.4](https://www.microsoft.com/download/4865) herunter.</span><span class="sxs-lookup"><span data-stu-id="c6368-301">Download [Network Monitor 3.4](https://www.microsoft.com/download/4865).</span></span>

<span data-ttu-id="c6368-302">Stellen Sie eine Verbindung mit dem PC her, auf dem der Netzwerkmonitor ausgeführt wird, und zwar an dem Port, der für Portspiegelung konfiguriert ist. Starten Sie die Aufzeichnung von Paketen.</span><span class="sxs-lookup"><span data-stu-id="c6368-302">Connect to PC running network monitor to the port that has been configured for port mirroring and start capturing packets.</span></span> <span data-ttu-id="c6368-303">Tätigen Sie einen Anruf mit dem Skype for Business-Client.</span><span class="sxs-lookup"><span data-stu-id="c6368-303">Make and receive a video call using Skype for Business</span></span> <span data-ttu-id="c6368-304">Stellen Sie vor dem Auflegen sicher, dass die Medienverbindung hergestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="c6368-304">Make sure media is established before hanging up the call.</span></span> <span data-ttu-id="c6368-305">Beenden Sie die Aufzeichnung, und erstellen Sie einen Anzeigefilter, der der Quell-IP des PCs entspricht, von dem aus der Anruf getätigt wurde. Optimieren Sie den Filter, indem Sie den DSCP-Wert 46 (in Hexadezimalschreibweise 0xb8) als Suchkriterium definieren:</span><span class="sxs-lookup"><span data-stu-id="c6368-305">Stop the capture create a Display Filter that matches the source IP of the PC that made the call and refine the filter by defining DSCP value 46 (hex 0xb8) as search criteria:</span></span>

<span data-ttu-id="c6368-306">Source == "192.168.137.201" AND IPv4.DifferentiatedServicesField == 0xb8</span><span class="sxs-lookup"><span data-stu-id="c6368-306">Source == "192.168.137.201" AND IPv4.DifferentiatedServicesField == 0xb8</span></span> 

![Screenshot des Dialogfelds „Display Filter“ im Netzwerkmonitor mit den Filtern, die angewendet werden können](media/Qos-in-Teams-Image4.png)


<span data-ttu-id="c6368-308">Klicken Sie auf **Apply** (Anwenden), um den Filter zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="c6368-308">Click **Apply** to activate the filter.</span></span> <span data-ttu-id="c6368-309">Wählen Sie im Fenster **Frame Summary** (Framezusammenfassung) das erste UDP-Paket aus, und betrachten Sie die Framedetails:</span><span class="sxs-lookup"><span data-stu-id="c6368-309">In the **Frame Summary** window, select the first UDP packet and look at the Frame Details:</span></span>

![Screenshot des Dialogfelds „Frame Details“ (Framedetails) im Netzwerkmonitor mit hervorgehobenen DSCP-Einstellungen](media/Qos-in-Teams-Image5.png)

<span data-ttu-id="c6368-311">Erweitern Sie „IPv4“, und betrachten Sie den Wert am Ende der Zeile „DSCP“.</span><span class="sxs-lookup"><span data-stu-id="c6368-311">Expand IPv4 and look at the value at the end of the DSCP line.</span></span> <span data-ttu-id="c6368-312">In diesem Beispiel ist der DSCP-Wert auf „46“ festgelegt. Das ist richtig, da der Quellport 50019 verwendet wird, das heißt, bei der Arbeitsauslastung handelt es sich um Sprache.</span><span class="sxs-lookup"><span data-stu-id="c6368-312">In this example we see that the DSCP value is set to 46 which is correct since the source port used is 50019 which tells us that the workload is voice.</span></span> 

<span data-ttu-id="c6368-313">Wiederholen Sie die Überprüfung für alle Arbeitsauslastungen, die durch das GPO markiert wurden.</span><span class="sxs-lookup"><span data-stu-id="c6368-313">Repeat the verification for each workload that has been marked by the GPO.</span></span> 

> [!NOTE]
> <span data-ttu-id="c6368-314">Vergewissern Sie sich, dass die Markierungen auch für Peer-zu-Peer-Datenverkehr berücksichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="c6368-314">Verify that markings are honored for peer-to-peer traffic as well.</span></span> <span data-ttu-id="c6368-315">Dazu können Sie den Netzwerkmonitor auf zwei Clients installieren und Anrufe zwischen den beiden Clients tätigen.</span><span class="sxs-lookup"><span data-stu-id="c6368-315">This can be done by installing Network Monitor on two clients and placing calls between the two clients.</span></span> <span data-ttu-id="c6368-316">Untersuchen Sie den zwischen den Clients fließenden Mediendatenverkehr auf die gleiche Weise wie oben beschrieben.</span><span class="sxs-lookup"><span data-stu-id="c6368-316">Look at the media traffic flowing between clients in the same manner as described above.</span></span>

### <a name="sample-filters-to-use-for-network-monitor-or-wireshark"></a><span data-ttu-id="c6368-317">Beispielfilter zur Verwendung mit dem Netzwerkmonitor oder mit Wireshark</span><span class="sxs-lookup"><span data-stu-id="c6368-317">Sample filters to use for Network Monitor or Wireshark</span></span>

|<span data-ttu-id="c6368-318">Verwendung</span><span class="sxs-lookup"><span data-stu-id="c6368-318">Usage</span></span>  |<span data-ttu-id="c6368-319">Beispielfilter</span><span class="sxs-lookup"><span data-stu-id="c6368-319">Sample filter</span></span>  |
|---------|---------|
|<span data-ttu-id="c6368-320">Sprache (Hinweis: Multiplexing muss deaktiviert sein.)</span><span class="sxs-lookup"><span data-stu-id="c6368-320">Voice (note: muxing must be turned off)</span></span>     |   <span data-ttu-id="c6368-321">udp.port==3479 AND Ipv4.DifferentiatedServicesField.DSCP==46</span><span class="sxs-lookup"><span data-stu-id="c6368-321">udp.port==3479 AND Ipv4.DifferentiatedServicesField.DSCP==46</span></span>      |
|<span data-ttu-id="c6368-322">Video</span><span class="sxs-lookup"><span data-stu-id="c6368-322">Video</span></span>     | <span data-ttu-id="c6368-323">udp.port==3480 AND Ipv4.DifferentiatedServicesField.DSCP==34</span><span class="sxs-lookup"><span data-stu-id="c6368-323">udp.port==3480 AND Ipv4.DifferentiatedServicesField.DSCP==34</span></span>        |
|<span data-ttu-id="c6368-324">Bildschirmübertragung</span><span class="sxs-lookup"><span data-stu-id="c6368-324">Screen sharing</span></span>     |  <span data-ttu-id="c6368-325">udp.port==3481 AND Ipv4.DifferentiatedServicesField.DSCP==18</span><span class="sxs-lookup"><span data-stu-id="c6368-325">udp.port==3481 AND Ipv4.DifferentiatedServicesField.DSCP==18</span></span>       |

### <a name="filter-media-traffic-from-microsoft-relays-requires-azure-expressroutehttpsazuremicrosoftcomservicesexpressroute"></a><span data-ttu-id="c6368-326">Filter: Mediendatenverkehr von Microsoft-Relays (Erfordert [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/).)</span><span class="sxs-lookup"><span data-stu-id="c6368-326">Filter: Media traffic from Microsoft relays (requires [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/))</span></span>

<span data-ttu-id="c6368-327">ip.src in {52.114.188.0/22 52.114.220.0/22 52.114.124.0/22 52.114.60.0/22} and (udp.srcport in {3479 3480 3481} or (udp.srcport ge 50000 and udp.srcport lt 60000))</span><span class="sxs-lookup"><span data-stu-id="c6368-327">ip.src in {52.114.188.0/22 52.114.220.0/22 52.114.124.0/22 52.114.60.0/22} and (udp.srcport in {3479 3480 3481} or (udp.srcport ge 50000 and udp.srcport lt 60000))</span></span>

### <a name="filter-media-traffic-to-microsoft-relays"></a><span data-ttu-id="c6368-328">Filter: Mediendatenverkehr zu Microsoft-Relays</span><span class="sxs-lookup"><span data-stu-id="c6368-328">Filter: Media traffic to Microsoft relays</span></span>

<span data-ttu-id="c6368-329">ip.dst in {52.114.188.0/22 52.114.220.0/22 52.114.124.0/22 52.114.60.0/22} and (udp.dstport in {3479 3480 3481} or (udp.dstport ge 50000 and udp.dstport lt 60000))</span><span class="sxs-lookup"><span data-stu-id="c6368-329">ip.dst in {52.114.188.0/22 52.114.220.0/22 52.114.124.0/22 52.114.60.0/22} and (udp.dstport in {3479 3480 3481} or (udp.dstport ge 50000 and udp.dstport lt 60000))</span></span>


<span data-ttu-id="c6368-330">Sie sollten Datenverkehr zu und von den Microsoft-Relays sehen.</span><span class="sxs-lookup"><span data-stu-id="c6368-330">You should see traffic to and from the Microsoft relays.</span></span> <span data-ttu-id="c6368-331">Sie können wie im nächsten Abschnitt gezeigt die DSCP-Markierungen auf der IP-Ebene in Wireshark überprüfen.</span><span class="sxs-lookup"><span data-stu-id="c6368-331">You can check DSCP markings on the IP layer in Wireshark, as shown in the next section.</span></span>

### <a name="expected-dscp-markings"></a><span data-ttu-id="c6368-332">Erwartete DSCP-Markierungen</span><span class="sxs-lookup"><span data-stu-id="c6368-332">Expected DSCP markings</span></span>

<span data-ttu-id="c6368-333">Audiodatenströme: 46</span><span class="sxs-lookup"><span data-stu-id="c6368-333">Audio streams: 46</span></span>

<span data-ttu-id="c6368-334">Videodatenströme: 34</span><span class="sxs-lookup"><span data-stu-id="c6368-334">Video streams: 34</span></span>

<span data-ttu-id="c6368-335">Datenströme: 18</span><span class="sxs-lookup"><span data-stu-id="c6368-335">Data streams: 18</span></span>

### <a name="filter-dscp-condition-to-network"></a><span data-ttu-id="c6368-336">Filter: DSCP-Bedingung für Netzwerk</span><span class="sxs-lookup"><span data-stu-id="c6368-336">Filter: DSCP condition to network</span></span>

<span data-ttu-id="c6368-337">ip.dsfield.dscp in {46 34 18}</span><span class="sxs-lookup"><span data-stu-id="c6368-337">ip.dsfield.dscp in {46 34 18}</span></span>



### <a name="looking-at-network-traffic-using-wireshark"></a><span data-ttu-id="c6368-338">Untersuchen des Netzwerkdatenverkehrs mit Wireshark</span><span class="sxs-lookup"><span data-stu-id="c6368-338">Looking at network traffic using Wireshark</span></span>

<span data-ttu-id="c6368-339">Wireshark (https://www.wireshark.org/) ist ein leistungsstarkes Tool, mit dem Sie Netzwerkdaten zur weiteren Analyse filtern und aufzeichnen können.</span><span class="sxs-lookup"><span data-stu-id="c6368-339">Wireshark, https://www.wireshark.org/, is a powerful tool that allows us to filter and record network data for further analysis.</span></span> <span data-ttu-id="c6368-340">Stellen Sie eine Verbindung mit einem PC her, auf dem Wireshark ausgeführt wird, und zwar an dem Port, der für Portspiegelung konfiguriert ist. Starten Sie die Aufzeichnung von Paketen.</span><span class="sxs-lookup"><span data-stu-id="c6368-340">Connect a PC running Wireshark to the port that has been configured for port mirroring and start capturing packets.</span></span> <span data-ttu-id="c6368-341">Tätigen Sie einen Anruf mit dem Microsoft Teams-Client.</span><span class="sxs-lookup"><span data-stu-id="c6368-341">Make a call using the Teams client.</span></span> <span data-ttu-id="c6368-342">Stellen Sie vor dem Auflegen sicher, dass die Medienverbindung hergestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="c6368-342">Make sure media is established before hanging up the call.</span></span>

<span data-ttu-id="c6368-343">Beenden Sie die Paketablaufverfolgung, und erstellen Sie einen Filter, der nur die Quell-IP des PCs anzeigt, auf dem der Microsoft Teams-Client installiert ist (z. B. *ip.src_host == 192.168.137.201*). Außerdem soll der Filter nach Paketen suchen, die einen Quellport aus dem für Sprache angegebenen Bereich verwenden (50000–50019):</span><span class="sxs-lookup"><span data-stu-id="c6368-343">Stop the packet trace and create a filter that only displays the source IP of the PC where the Teams client is installed, for example, *ip.src_host == 192.168.137.201* and looks for packages that use a source port from the range specified for voice, 50,000 – 50,019:</span></span>

![Screenshot von Wireshark mit Filtereinstellungen](media/Qos-in-Teams-Image6.png)
 

<span data-ttu-id="c6368-345">Markieren Sie das Paket, und erweitern Sie den IPv4-Header (Internetprotokoll, Version 4) im Detailbereich für das Paket:</span><span class="sxs-lookup"><span data-stu-id="c6368-345">Mark the package and expand the Internet Protocol Version 4 (IPV4) header in the packet detail pane:</span></span>

![Screenshot von Wireshark mit hervorgehobenen DSCP-Einstellungen](media/Qos-in-Teams-Image7.png)
 

<span data-ttu-id="c6368-347">Vergewissern Sie sich, dass der Wert für *Differentiated Services Code Point* mit dem Wert für die entsprechende Arbeitsauslastung übereinstimmt, in diesem Fall „46“ (in Binärschreibweise 101110) für Sprache.</span><span class="sxs-lookup"><span data-stu-id="c6368-347">Verify that the value for *Differentiated Services Codepoint* match the value for the specific workload, in this case 46 (binary 101110) for voice.</span></span>

<span data-ttu-id="c6368-348">Wiederholen Sie die Überprüfung für alle Arbeitsauslastungen, die durch das GPO markiert wurden.</span><span class="sxs-lookup"><span data-stu-id="c6368-348">Repeat the verification for each workload that has been marked by the GPO.</span></span>

> [!NOTE]
> <span data-ttu-id="c6368-349">Vergewissern Sie sich, dass die Markierungen für Peer-zu-Peer-Datenverkehr berücksichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="c6368-349">Verify that markings are honored for peer-to-peer traffic.</span></span> <span data-ttu-id="c6368-350">Dazu können Sie Wireshark oder den Netzwerkmonitor auf zwei Clients installieren und Anrufe zwischen den beiden Clients tätigen.</span><span class="sxs-lookup"><span data-stu-id="c6368-350">This can be done by installing WireShark or Network Monitor on two clients and placing calls between the two clients.</span></span> <span data-ttu-id="c6368-351">Untersuchen Sie den zwischen den Clients fließenden Mediendatenverkehr auf die gleiche Weise wie oben beschrieben.</span><span class="sxs-lookup"><span data-stu-id="c6368-351">Look at the media traffic flowing between clients in the same manner as described above.</span></span>

## <a name="summary"></a><span data-ttu-id="c6368-352">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="c6368-352">Summary</span></span>

<span data-ttu-id="c6368-353">Quality of Service spielt bei der Bereitstellung von Funktionen auf Unternehmensniveau mit Microsoft Teams eine wichtige Rolle.</span><span class="sxs-lookup"><span data-stu-id="c6368-353">Quality of Service is an important piece of the puzzle when providing business-class experiences with Teams.</span></span> <span data-ttu-id="c6368-354">Dabei müssen Sie jedoch immer bedenken, dass QoS nur in ordnungsgemäß verwalteten Netzwerken effektiv ist.</span><span class="sxs-lookup"><span data-stu-id="c6368-354">However, it is important to always remember that QoS is only effective on properly managed networks.</span></span> <span data-ttu-id="c6368-355">Daher muss das Bereitstellungsteam eng mit den Netzwerkteams zusammenarbeiten, um sicherzustellen, dass in der Vermittlungsschicht die richtigen Informationen übergeben werden, idealerweise mit End-to-End-Verwaltung.</span><span class="sxs-lookup"><span data-stu-id="c6368-355">As such, the deployment team must work very closely with the networking teams to ensure the proper information is passed at the network layer, ideally managed from end-to-end.</span></span>

