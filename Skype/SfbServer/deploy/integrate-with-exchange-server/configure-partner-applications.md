---
title: Konfigurieren von Partneranwendungen in Skype for Business Server 2015 und Exchange Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.date: 12/20/2018
audience: ITPro
ms.topic: quickstart
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 9c3a3054-6201-433f-b128-4c49d3341370
description: 'Zusammenfassung: Konfigurieren der Server-zu-Server-Authentifizierung für Exchange Server 2016 oder Exchange Server 2013 und Skype for Business Server.'
ms.openlocfilehash: 004b9c1926f00cd869658ae0b90679897d20516b
ms.sourcegitcommit: fe274303510d07a90b506bfa050c669accef0476
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/09/2020
ms.locfileid: "41001255"
---
# <a name="configure-partner-applications-in-skype-for-business-server-and-exchange-server"></a><span data-ttu-id="9fb3e-103">Konfigurieren von Partneranwendungen in Skype for Business Server und Exchange Server</span><span class="sxs-lookup"><span data-stu-id="9fb3e-103">Configure partner applications in Skype for Business Server and Exchange Server</span></span>
 
<span data-ttu-id="9fb3e-104">**Zusammenfassung:** Konfigurieren Sie die Server-zu-Server-Authentifizierung für Exchange Server 2016 oder Exchange Server 2013 und Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-104">**Summary:** Configure server to server authentication for Exchange Server 2016 or Exchange Server 2013 and Skype for Business Server.</span></span>
  
<span data-ttu-id="9fb3e-105">An einer Server-zu-Server-Authentifizierung sind üblicherweise zwei Server, die miteinander kommunizieren müssen, und ein Sicherheitstokenserver eines Drittanbieters beteiligt.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-105">Server-to-server authentication usually requires two servers that need to communicate with one another and a third-party security token server.</span></span> <span data-ttu-id="9fb3e-106">Wenn Server a und Server B kommunizieren müssen, beginnen diese beiden Server in der Regel mit einem tokenserver, und Sie erhalten ein vertrauenswürdiges Sicherheitstoken.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-106">If Server A and Server B need to communicate, then both of those servers typically start by contacting a token server and obtaining a mutually-trusted security token.</span></span> <span data-ttu-id="9fb3e-107">Server A präsentiert das Sicherheitstoken dann Server B (und umgekehrt), womit beide ihre Authentizität und Vertrauenswürdigkeit nachweisen.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-107">Server A then presents that security token to Server B (and vice-versa) as a way to guarantee its authenticity and trustworthiness.</span></span>
  
<span data-ttu-id="9fb3e-108">Das ist jedoch eine allgemeine Regel.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-108">However, that's a general rule.</span></span> <span data-ttu-id="9fb3e-109">Skype for Business Server, Exchange Server 2016, Exchange Server 2013 und SharePoint Server 2013 brauchen keinen tokenserver eines Drittanbieters, wenn Sie miteinander kommunizieren. Das liegt daran, dass diese Serverprodukte Sicherheitstoken erstellen können, die voneinander akzeptiert werden können, ohne dass ein separater tokenserver erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-109">Skype for Business Server, Exchange Server 2016, Exchange Server 2013, and SharePoint Server 2013 do not need to use a third-party token server when communicating with one another; that's because these server products can create security tokens that can be accepted by one another without the need for a separate token server.</span></span> <span data-ttu-id="9fb3e-110">(Diese Funktion steht nur in Skype for Business Server, Exchange Server 2016, Exchange Server 2013 und SharePoint Server 2013 zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-110">(This capability is only available in Skype for Business Server, Exchange Server 2016, Exchange Server 2013, and SharePoint Server 2013.</span></span> <span data-ttu-id="9fb3e-111">Wenn Sie die Server-zu-Server-Authentifizierung für andere Server, einschließlich anderer Microsoft-Serverprodukte, einrichten müssen, müssen Sie dies unter Verwendung eines tokenserver eines Drittanbieters tun.)</span><span class="sxs-lookup"><span data-stu-id="9fb3e-111">If you need to set up server-to-server authentication with other servers, including other Microsoft server products, then you will need to do so by using a third-party token server.)</span></span>
  
<span data-ttu-id="9fb3e-112">Damit Sie die Server-zu-Server-Authentifizierung zwischen Skype for Business Server und Exchange Server einrichten können, müssen Sie zwei Schritte ausführen: 1) Sie müssen jedem Server die entsprechenden Zertifikate zuweisen. und 2) Sie müssen jeden Server als Partneranwendung des anderen Servers konfigurieren: Dies bedeutet, dass Sie Skype for Business Server als Partneranwendung für Exchange Server konfigurieren müssen, und Sie müssen Exchange Server als eine Partneranwendung für Skype konfigurieren. für Business Server.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-112">In order to set up server-to-server authentication between Skype for Business Server and Exchange Server you must do two things: 1) you must assign the appropriate certificates to each server; and, 2) you must configure each server to be a partner application of the other server: that means you must configure Skype for Business Server to be a partner application for Exchange Server, and you must configure Exchange Server to be a partner application for Skype for Business Server.</span></span>
  
## <a name="configuring-skype-for-business-server-to-be-a-partner-application-for-exchange-server"></a><span data-ttu-id="9fb3e-113">Konfigurieren von Skype for Business Server als Partner Anwendung für Exchange Server</span><span class="sxs-lookup"><span data-stu-id="9fb3e-113">Configuring Skype for Business Server to be a Partner Application for Exchange Server</span></span>

<span data-ttu-id="9fb3e-114">Die einfachste Möglichkeit zum Konfigurieren von Skype for Business Server für eine Partneranwendung mit Exchange Server 2016 oder Exchange Server 2013 besteht darin, das configure-EnterprisePartnerApplication. ps1-Skript auszuführen, ein Windows PowerShell-Skript, das mit Exchange Server ausgeliefert wird.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-114">The easiest way to configure Skype for Business Server to be a partner application with Exchange Server 2016 or Exchange Server 2013 is to run the Configure-EnterprisePartnerApplication.ps1 script, a Windows PowerShell script that ships with Exchange Server.</span></span> <span data-ttu-id="9fb3e-115">Um dieses Skript ausführen zu können, müssen Sie die URL für das Dokument für die Authentifizierung von Skype for Business Server-Metadaten angeben. Dies ist in der Regel der vollqualifizierte Domänenname des Skype for Business Server-Pools, gefolgt vom Suffix/Metadata/JSON/1.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-115">To run this script, you must provide the URL for the Skype for Business Server authentication metadata document; this will typically be the fully qualified domain name of the Skype for Business Server pool followed by the suffix /metadata/json/1.</span></span> <span data-ttu-id="9fb3e-116">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="9fb3e-116">For example:</span></span>
  
```console
https://atl-cs-001.litwareinc.com/metadata/json/1
```

<span data-ttu-id="9fb3e-117">Wenn Sie Skype for Business Server als Partneranwendung konfigurieren möchten, öffnen Sie die Exchange-Verwaltungsshell, und führen Sie einen ähnlichen Befehl aus (vorausgesetzt, Exchange wurde auf Laufwerk C: installiert und verwendet den Standardordnerpfad):</span><span class="sxs-lookup"><span data-stu-id="9fb3e-117">To configure Skype for Business Server as a partner application, open the Exchange Management Shell and run a command similar to this (assuming that Exchange has been installed on drive C: and that it uses the default folder path):</span></span>
  
```powershell
"C:\Program Files\Microsoft\Exchange Server\V15\Scripts\Configure-EnterprisePartnerApplication.ps1 -AuthMetaDataUrl 'https://atl-cs-001.litwareinc.com/metadata/json/1' -ApplicationType Lync"
```

<span data-ttu-id="9fb3e-118">Nachdem Sie die Partneranwendung konfiguriert haben, empfiehlt es sich, Internet Informationsdienste (IIS) auf Ihrem Exchange-Postfach und den Clientzugriffsservern zu beenden und neu zu starten.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-118">After configuring the partner application it is recommended that you stop and restart Internet Information Services (IIS) on your Exchange mailbox and client access servers.</span></span> <span data-ttu-id="9fb3e-119">Sie können IIS neu starten, indem Sie einen ähnlichen Befehl verwenden, mit dem der Dienst auf dem Computer "ATL-Exchange-001" neu gestartet wird:</span><span class="sxs-lookup"><span data-stu-id="9fb3e-119">You can restart IIS by using a command similar to this, which restarts the service on the computer atl-exchange-001:</span></span>
  
```powershell
iisreset atl-exchange-001
```

<span data-ttu-id="9fb3e-120">Dieser Befehl kann in der Exchange-Verwaltungsshell oder in einem anderen Befehlsfenster ausgeführt werden, das unter Administratorprivilegien ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-120">This command can be run from within the Exchange Management Shell or from any other command window run under administrator privileges.</span></span>
  
## <a name="configuring-exchange-server-to-be-a-partner-application-for-skype-for-business-server"></a><span data-ttu-id="9fb3e-121">Konfigurieren von Exchange Server als Partner Anwendung für Skype for Business Server</span><span class="sxs-lookup"><span data-stu-id="9fb3e-121">Configuring Exchange Server to be a Partner Application for Skype for Business Server</span></span>

<span data-ttu-id="9fb3e-122">Nachdem Sie Skype for Business Server als Partneranwendung für Exchange Server 2016 oder Exchange Server 2013 konfiguriert haben, müssen Sie Exchange Server so konfigurieren, dass es sich um eine Partneranwendung für Skype for Business Server handelt.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-122">After you have configured Skype for Business Server to be a partner application for Exchange Server 2016 or Exchange Server 2013, you must then configure Exchange Server to be a partner application for Skype for Business Server.</span></span> <span data-ttu-id="9fb3e-123">Dies kann über die Skype for Business Server-Verwaltungsshell und die Angabe des authentifizierungsmetadaten-Dokuments für Exchange erfolgen. Dies ist in der Regel der URI des Exchange-AutoErmittlungsdiensts, gefolgt vom Suffix/Metadata/JSON/1.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-123">This can be done by using the Skype for Business Server Management Shell and specifying the authentication metadata document for Exchange; this will typically be the URI of the Exchange autodiscover service followed by the suffix /metadata/json/1.</span></span> <span data-ttu-id="9fb3e-124">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="9fb3e-124">For example:</span></span>
  
```console
https://autodiscover.litwareinc.com/autodiscover/metadata/json/1
```

<span data-ttu-id="9fb3e-125">In Skype for Business Server werden Partneranwendungen mithilfe des Cmdlets [New-CsPartnerApplication](https://docs.microsoft.com/powershell/module/skype/new-cspartnerapplication?view=skype-ps) konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-125">In Skype for Business Server, partner applications are configured by using the [New-CsPartnerApplication](https://docs.microsoft.com/powershell/module/skype/new-cspartnerapplication?view=skype-ps) cmdlet.</span></span> <span data-ttu-id="9fb3e-126">Zusätzlich zur Angabe des Metadaten-URIs sollten Sie auch die Vertrauensebene der Anwendung auf Full festlegen. Dadurch kann Exchange sowohl sich selbst als auch alle autorisierten Benutzer im Bereich darstellen.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-126">In addition to specifying the metadata URI you should also set the application trust level to Full; this will allow Exchange to represent both itself and any authorized user in the realm.</span></span> <span data-ttu-id="9fb3e-127">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="9fb3e-127">For example:</span></span>
  
```powershell
New-CsPartnerApplication -Identity Exchange -ApplicationTrustLevel Full -MetadataUrl "https://autodiscover.litwareinc.com/autodiscover/metadata/json/1"
```

<span data-ttu-id="9fb3e-128">Alternativ können Sie eine Partneranwendung erstellen, indem Sie den Skriptcode kopieren und ändern, der in der Dokumentation zur Authentifizierung von Skype for Business Server Server-zu-Server-Authentifizierung zu finden ist.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-128">Alternatively, you can create a partner application by copying and modifying the script code found in the Skype for Business Server server-to-server authentication documentation.</span></span> <span data-ttu-id="9fb3e-129">Weitere Informationen finden Sie im Artikel [Verwalten von Server-zu-Server-Authentifizierung (OAuth) und Partneranwendungen in Skype for Business Server](../../manage/authentication/server-to-server-and-partner-applications.md) .</span><span class="sxs-lookup"><span data-stu-id="9fb3e-129">See the [Manage server-to-server authentication (OAuth) and partner applications in Skype for Business Server](../../manage/authentication/server-to-server-and-partner-applications.md) article for more information.</span></span>
  
<span data-ttu-id="9fb3e-130">Wenn Sie erfolgreich Partneranwendungen für Skype for Business Server und Exchange Server konfiguriert haben, haben Sie auch die Server-zu-Server-Authentifizierung zwischen den beiden Produkten erfolgreich konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-130">If you have successfully configured partner applications for both Skype for Business Server and Exchange Server, you have also successfully configured server-to-server authentication between the two products.</span></span> <span data-ttu-id="9fb3e-131">Skype for Business Server enthält ein Windows PowerShell-Cmdlet, [Test-CsExStorageConnectivity](https://docs.microsoft.com/powershell/module/skype/test-csexstorageconnectivity?view=skype-ps) , mit dem Sie überprüfen können, ob die Server-zu-Server-Authentifizierung ordnungsgemäß konfiguriert wurde und dass der Skype for Business Server-Speicherdienst eine Verbindung mit Exchange Server herstellen kann.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-131">Skype for Business Server includes a Windows PowerShell cmdlet, [Test-CsExStorageConnectivity](https://docs.microsoft.com/powershell/module/skype/test-csexstorageconnectivity?view=skype-ps) which enables you to verify that server-to-server authentication has been correctly configured and that the Skype for Business Server Storage Service can connect to Exchange Server.</span></span> <span data-ttu-id="9fb3e-132">Das Cmdlet führt hierzu eine Verbindung mit dem Postfach eines Exchange Server-Benutzers aus, wobei ein Element in den Ordner "Konversations Verlauf" für diesen Benutzer geschrieben und dann (optional) das Element gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-132">The cmdlet does this by connecting to the mailbox of an Exchange Server user, writing an item into the Conversation History folder for that user, and then (optionally) deleting that item.</span></span>
  
<span data-ttu-id="9fb3e-133">Um die Integration von Skype for Business Server und Exchange Server zu testen, führen Sie in der Skype for Business Server-Verwaltungsshell einen Befehl wie den folgenden aus:</span><span class="sxs-lookup"><span data-stu-id="9fb3e-133">To test the integration of Skype for Business Server and Exchange Server, run a command similar to the following from the Skype for Business Server Management Shell:</span></span>
  
```powershell
Test-CsExStorageConnectivity -SipUri "sip:kenmyer@litwareinc.com"
```

<span data-ttu-id="9fb3e-134">Im vorangehenden Befehl stellt der SipUri die SIP-Adresse eines Benutzers mit einem Konto auf Exchange Server dar. Ihr Befehl schlägt fehl, da es sich nicht um ein gültiges Benutzerkonto handelt.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-134">In the preceding command, the SipUri represents the SIP address of a user with an account on Exchange Server; your command will fail in this is not a valid user account.</span></span>
  
> [!NOTE]
> <span data-ttu-id="9fb3e-135">Wenn Sie eine 401-Antwort von diesem Cmdlet erhalten, liegt dies wahrscheinlich daran, dass die Standardkonfiguration für Exchange keine Unterstützung für das annehmen von OAuth-Token umfasst.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-135">If you receive a 401 response from this cmdlet, it is probably because the default configuration for Exchange does not include support for accepting Oauth tokens.</span></span> <span data-ttu-id="9fb3e-136">Weitere Informationen zur Verwendung von OAuth in Exchange finden Sie unter [Konfigurieren der OAuth-Authentifizierung mit SharePoint 2013 und Skype for Business Server](https://go.microsoft.com/fwlink/p/?LinkId=513103).</span><span class="sxs-lookup"><span data-stu-id="9fb3e-136">For more information about using Oauth in Exchange, see [Configure OAuth authentication with SharePoint 2013 and Skype for Business Server](https://go.microsoft.com/fwlink/p/?LinkId=513103).</span></span> 
  
<span data-ttu-id="9fb3e-137">Wenn der Test erfolgreich war und die Verbindung hergestellt ist, können Sie mit der Konfiguration optionaler Funktionen (z. B. der Integration der Archivierung und des einheitlichen Kontaktspeichers) fortfahren.</span><span class="sxs-lookup"><span data-stu-id="9fb3e-137">If the test succeeds and connectivity has been established, you can then proceed to configure optional features such as archiving integration and the unified contact store.</span></span>
