---
title: Advanced Edge Server-DNS-Planung für Skype for Business Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
audience: ITPro
manager: serdars
ms.topic: conceptual
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection:
- IT_Skype16
- Strat_SB_Hybrid
ms.custom: ''
ms.assetid: f3a5895f-f64f-44eb-9a5e-8d606ac1fc38
description: 'Zusammenfassung: Überprüfen von Szenarien für die Skype for Business Server-Bereitstellungsoptionen. Dieses Thema wird Ihnen helfen, egal ob Sie einen einzelnen Server oder einen Server-Pool mit DNS oder HLB bevorzugen.'
ms.openlocfilehash: 6ef0fc7a19703d6eba0ec3bfa66c0b37fcece53f
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/20/2019
ms.locfileid: "34297071"
---
# <a name="advanced-edge-server-dns-planning-for-skype-for-business-server"></a><span data-ttu-id="9c706-104">Advanced Edge Server-DNS-Planung für Skype for Business Server</span><span class="sxs-lookup"><span data-stu-id="9c706-104">Advanced Edge Server DNS planning for Skype for Business Server</span></span>
 
<span data-ttu-id="9c706-105">**Zusammenfassung:** Überprüfen Sie Szenarien für die Skype for Business Server-Bereitstellungsoptionen.</span><span class="sxs-lookup"><span data-stu-id="9c706-105">**Summary:** Review scenarios for Skype for Business Server deployment options.</span></span> <span data-ttu-id="9c706-106">Dieses Thema wird Ihnen helfen, egal ob Sie einen einzelnen Server oder einen Server-Pool mit DNS oder HLB bevorzugen.</span><span class="sxs-lookup"><span data-stu-id="9c706-106">Whether you want a single server or prefer a server pool with DNS or HLB, this topic should help.</span></span>
  
<span data-ttu-id="9c706-107">Wenn es um die DNS-Planung (Domain Name System) für Skype for Business Server geht, gibt es viele Faktoren, die bei ihrer Entscheidung auftreten können.</span><span class="sxs-lookup"><span data-stu-id="9c706-107">When it comes to Domain Name System (DNS) planning for Skype for Business Server, there are a lot of factors that may play into your decision.</span></span> <span data-ttu-id="9c706-108">Falls die Domänenstruktur Ihrer Organisation bereits aufgebaut ist, könnte es nun darum gehen, wie Sie weiter vorgehen.</span><span class="sxs-lookup"><span data-stu-id="9c706-108">If your organization's domain structure's already in place, this may be a matter of reviewing how you're going to proceed.</span></span> <span data-ttu-id="9c706-109">Wir starten mit den folgenden Punkten:</span><span class="sxs-lookup"><span data-stu-id="9c706-109">We'll begin with the topics found below:</span></span>
  
- [<span data-ttu-id="9c706-110">Walkthrough of Skype for Business clients locating services</span><span class="sxs-lookup"><span data-stu-id="9c706-110">Walkthrough of Skype for Business clients locating services</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#WalkthroughOfSkype)
    
- [<span data-ttu-id="9c706-111">Split-brain DNS</span><span class="sxs-lookup"><span data-stu-id="9c706-111">Split-brain DNS</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#SplitBrainDNS)
    
- [<span data-ttu-id="9c706-112">Automatic configuration without split-brain DNS</span><span class="sxs-lookup"><span data-stu-id="9c706-112">Automatic configuration without split-brain DNS</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#NoSplitBrainDNS)
    
- [<span data-ttu-id="9c706-113">DNS disaster recovery</span><span class="sxs-lookup"><span data-stu-id="9c706-113">DNS disaster recovery</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#DNSDR)
    
- [<span data-ttu-id="9c706-114">DNS load balancing</span><span class="sxs-lookup"><span data-stu-id="9c706-114">DNS load balancing</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#DNSLB)
    
## <a name="walkthrough-of-skype-for-business-clients-locating-services"></a><span data-ttu-id="9c706-115">Walkthrough of Skype for Business clients locating services</span><span class="sxs-lookup"><span data-stu-id="9c706-115">Walkthrough of Skype for Business clients locating services</span></span>
<span data-ttu-id="9c706-116"><a name="WalkthroughOfSkype"> </a></span><span class="sxs-lookup"><span data-stu-id="9c706-116"></span></span>

<span data-ttu-id="9c706-117">Skype for Business-Clients ähneln älteren Versionen von lync-Clients in der Art und Weise, wie Sie in Skype for Business Server Dienste finden und darauf zugreifen.</span><span class="sxs-lookup"><span data-stu-id="9c706-117">Skype for Business clients are similar to previous versions of Lync clients in how they find and access services in Skype for Business Server.</span></span> <span data-ttu-id="9c706-118">Der Inhalt dieses Abschnitts beschreibt das Ausfindigmachen des Servers.</span><span class="sxs-lookup"><span data-stu-id="9c706-118">This section details the server location process.</span></span>
  
1. <span data-ttu-id="9c706-119">lyncdiscoverinternal. \<Domäne\></span><span class="sxs-lookup"><span data-stu-id="9c706-119">lyncdiscoverinternal.\<domain\></span></span>
    
     <span data-ttu-id="9c706-120">*Dies ist ein Host-Eintrag für den AutoErmittlungsdienst in den internen Webdiensten.*</span><span class="sxs-lookup"><span data-stu-id="9c706-120">*This is an A host record for the Autodiscover service on the internal web services.*</span></span> 
    
2. <span data-ttu-id="9c706-121">lyncdiscover. \<Domäne\></span><span class="sxs-lookup"><span data-stu-id="9c706-121">lyncdiscover.\<domain\></span></span>
    
     <span data-ttu-id="9c706-122">*Dies ist ein Host-Eintrag für den AutoErmittlungsdienst in den externen Webdiensten.*</span><span class="sxs-lookup"><span data-stu-id="9c706-122">*This is an A host record for the Autodiscover service on the external web services.*</span></span> 
    
3. <span data-ttu-id="9c706-123">_sipinternaltls._tcp. \<Domäne\></span><span class="sxs-lookup"><span data-stu-id="9c706-123">_sipinternaltls._tcp.\<domain\></span></span>
    
     <span data-ttu-id="9c706-124">*Dies ist ein SRV (Service Locator)-Eintrag für interne TLS-Verbindungen*</span><span class="sxs-lookup"><span data-stu-id="9c706-124">*This is a SRV record for internal TLS connections.*</span></span> 
    
4. <span data-ttu-id="9c706-125">_sip._tls. \<Domäne\></span><span class="sxs-lookup"><span data-stu-id="9c706-125">_sip._tls.\<domain\></span></span>
    
     <span data-ttu-id="9c706-126">*Dies ist ein SRV (Service Locator)-Eintrag für externe TLS-Verbindungen*</span><span class="sxs-lookup"><span data-stu-id="9c706-126">*This is a SRV record for external TLS connections.*</span></span> 
    
5. <span data-ttu-id="9c706-127">sipinternal. \<Domäne\></span><span class="sxs-lookup"><span data-stu-id="9c706-127">sipinternal.\<domain\></span></span>
    
     <span data-ttu-id="9c706-128">*Hierbei handelt es sich um einen Hosteintrag für den Front-End-Pool oder Director, der nur im internen Netzwerk aufgelöst werden kann.*</span><span class="sxs-lookup"><span data-stu-id="9c706-128">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
6. <span data-ttu-id="9c706-129">SIP. \<Domäne\></span><span class="sxs-lookup"><span data-stu-id="9c706-129">sip.\<domain\></span></span>
    
     <span data-ttu-id="9c706-130">*Hierbei handelt es sich um einen Hosteintrag für den Front-End-Pool oder Director, der nur im internen Netzwerk aufgelöst werden kann.*</span><span class="sxs-lookup"><span data-stu-id="9c706-130">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
7. <span data-ttu-id="9c706-131">sipexternal. \<Domäne\></span><span class="sxs-lookup"><span data-stu-id="9c706-131">sipexternal.\<domain\></span></span>
    
     <span data-ttu-id="9c706-132">*Hierbei handelt es sich um einen Hosteintrag für den Access Edge-Dienst, wenn der Client extern ist.*</span><span class="sxs-lookup"><span data-stu-id="9c706-132">*This is an A host record for the Access Edge service, when the client is external.*</span></span> 
    
<span data-ttu-id="9c706-133">Der AutoErmittlungsdienst ist immer die bevorzugte Methode zur Dienstidentifizierung. Auf alle anderen Methoden wird nur zurückgegriffen, wenn es nicht anders geht.</span><span class="sxs-lookup"><span data-stu-id="9c706-133">The Autodiscover service is always favored as that's the preferred method for service location, and the others are fallback methods.</span></span>
  
> [!NOTE]
> <span data-ttu-id="9c706-p105">Beim Erstellen von SRV-Einträgen muss berücksichtigt werden, dass die Einträge auf einen DNS-A-Eintrag (und DNS-AAAA-Eintrag, wenn Sie IPv6-Adressen nutzen) in derselben Domäne zeigen, in der der DNS-SRV-Eintrag erstellt wird. Wenn sich der SRV-Eintrag z. B. in der Domäne „contoso.com“ befindet, kann sich der A-Eintrag (und AAA-Eintrag) auf den er zeigt, nicht in der Domäne „fabrikam.com“ befinden.</span><span class="sxs-lookup"><span data-stu-id="9c706-p105">When you're creating SRV records, it's important to remember that they need to point to a DNS A (and AAAA if you're using IPv6 addressing) in the same domain in which the DNS SRV record's being created. For example, if they SRV record's in contoso.com, the A (and AAAA) record it points to can't be in fabrikam.com.</span></span> 
  
<span data-ttu-id="9c706-p106">Es steht Ihnen frei, Ihr Mobilgerät auf die manuelle Ermittlung von Diensten einzustellen. In diesem Fall muss jeder Benutzer in den Einstellungen des mobilen Geräts wie folgt die vollständigen internen und externen AutoErmittlungsdienst-URIs konfigurieren, einschließlich Protokoll und Pfad:</span><span class="sxs-lookup"><span data-stu-id="9c706-p106">If you're inclined to do it, you can set your mobile device up for manual discovery of services. If that's what you're looking to do, each user needs to configure their mobile device settings with the full internal and external Autodiscover service URIs, including the protocol and path, as follows:</span></span>
  
- <span data-ttu-id="9c706-138">Für externen Zugriff: https://\<ExtPoolFQDN\>/autodiscover/autodiscoverservice.svc/root</span><span class="sxs-lookup"><span data-stu-id="9c706-138">For external access: https://\<ExtPoolFQDN\>/Autodiscover/autodiscoverservice.svc/Root</span></span>
    
- <span data-ttu-id="9c706-139">Für internen Zugriff: https://\<IntPoolFQDN\>/autodiscover/autodiscover.svc/root</span><span class="sxs-lookup"><span data-stu-id="9c706-139">For internal access: https://\<IntPoolFQDN\>/AutoDiscover/AutoDiscover.svc/Root</span></span>
    
<span data-ttu-id="9c706-p107">Wir empfehlen das Verwenden einer automatischen Ermittlung anstelle einer manuellen Ermittlung. Falls Sie aber Fehlersuchen oder Tests durchführen, können die manuellen Einstellungen sehr hilfreich sein.</span><span class="sxs-lookup"><span data-stu-id="9c706-p107">We do recommend you use automatic discovery as opposed to manual discovery. But if you're doing some troubleshooting or testing, manual settings can be very helpful.</span></span>
  
## <a name="split-brain-dns"></a><span data-ttu-id="9c706-142">Split-Brain-DNS</span><span class="sxs-lookup"><span data-stu-id="9c706-142">Split-brain DNS</span></span>
<span data-ttu-id="9c706-143"><a name="SplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="9c706-143"></span></span>

<span data-ttu-id="9c706-p108">Bei dieser DNS-Konfiguration haben Sie zwei DNS-Zonen mit denselben Namespaces. Die erste DNS-Zone ist für interne Anfragen zuständig, während sich die zweite DNS-Zone um externe Anfragen kümmert.</span><span class="sxs-lookup"><span data-stu-id="9c706-p108">This is a DNS configuration where you have two DNS zones with the same namespace. The first DNS zone handles internal requests, while the second DNS zone handles external requests.</span></span>
  
<span data-ttu-id="9c706-p109">Warum sollte sich ein Unternehmen dafür entscheiden? Sie könnten die Anforderung haben, denselben Namespace sowohl intern als auch extern zu verwenden. Natürlich führt dies zu vielen DNS-, SRV- und A-Einträgen, die eindeutig der einen oder der anderen Zone zugewiesen werden. Käme es zu doppelten Einträgen, so wären die mit diesen Einträgen verbundenen IP-Adressen eindeutig.</span><span class="sxs-lookup"><span data-stu-id="9c706-p109">Why would a company do this? They may have a requirement to use the same namespace internally and externally, but of course this will lead to many DNS SRV and A records being unique to one zone or another, and where there is duplication, the IP addresses associated with these records would be unique.</span></span>
  
<span data-ttu-id="9c706-148">Dies ist mit einigen Herausforderungen verbunden.</span><span class="sxs-lookup"><span data-stu-id="9c706-148">This presents some challenges.</span></span> <span data-ttu-id="9c706-149">Das wichtigste ist, dass das Split-Brain-DNS für Mobilität **nicht unterstützt** wird.</span><span class="sxs-lookup"><span data-stu-id="9c706-149">The most important is that split-brain DNS is **not supported** for Mobility.</span></span> <span data-ttu-id="9c706-150">Der Grund dafür sind die LyncDiscover- und LyncDiscoverInternal-DNS-Einträge („LyncDiscover“ muss auf einem externen DNS-Server und „LyncDiscoverInternal“ muss auf einem internen DNS-Server definiert werden).</span><span class="sxs-lookup"><span data-stu-id="9c706-150">This is because of the LyncDiscover and LyncDiscoverInternal DNS records (LyncDiscover has to be defined on you external DNS server, while LyncDiscoverInternal has to be defined on your internal DNS server).</span></span>
  
<span data-ttu-id="9c706-151">Hier werden die DNS-Einträge für die internen und externen Zonen aufgelistet, aber detaillierte Beispiele finden Sie im Abschnitt Edge Server Environmental Requirements.</span><span class="sxs-lookup"><span data-stu-id="9c706-151">We'll list the DNS records for the internal and external zones here, but you can find detailed examples on the Edge Server environmental requirements section.</span></span>
  
### <a name="internal-dns"></a><span data-ttu-id="9c706-152">Interne DNS-Konfiguration</span><span class="sxs-lookup"><span data-stu-id="9c706-152">Internal DNS</span></span>

- <span data-ttu-id="9c706-153">Enthält eine DNS-Zone namens (z. B.) „contoso.com“, für die es autoritativ ist.</span><span class="sxs-lookup"><span data-stu-id="9c706-153">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="9c706-154">Die interne „contoso.com“ enthält:</span><span class="sxs-lookup"><span data-stu-id="9c706-154">This internal contoso.com contains:</span></span>
    
  - <span data-ttu-id="9c706-155">DNS A und AAAA (wenn Sie IPv6-Adressierung verwenden) für Ihren Front-End-Pool, Director Pool oder Director Pool Name sowie für alle internen Server, auf denen Skype for Business Server im Netzwerk Ihrer Organisation ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="9c706-155">DNS A and AAAA (if you're using IPv6 addressing) records for your Front End pool, Director pool or Director pool name, and all internal servers running Skype for Business Server in your organization's network.</span></span>
    
  - <span data-ttu-id="9c706-156">DNS A und AAAA (wenn Sie IPv6-Adressierung verwenden) für Ihre Edge-interne Schnittstelle für jeden Skype for Business Server-Edgeserver in Ihrem Umkreisnetzwerk.</span><span class="sxs-lookup"><span data-stu-id="9c706-156">DNS A and AAAA (if you're using IPv6 addressing) records for your Edge internal interface for each Skype for Business Server Edge Server in your perimeter network.</span></span>
    
  - <span data-ttu-id="9c706-157">DNS A und AAAA (wenn Sie IPv6-Adressierung verwenden) für die interne Schnittstelle jedes Reverse-Proxyservers in Ihrem Umkreisnetzwerk (Dies ist **optional** für die Verwaltung eines Reverse-Proxys).</span><span class="sxs-lookup"><span data-stu-id="9c706-157">DNS A and AAAA (if you're using IPv6 addressing) records for the internal interface of each reverse proxy server in your perimeter network (which is **optional** for management of a reverse proxy).</span></span>
    
  - <span data-ttu-id="9c706-158">DNS A und AAAA (wenn Sie die IPv6-Adressierung verwenden) und SRV-Einträge für die interne Skype for Business Server-Client-Autokonfiguration ( **optional** ).</span><span class="sxs-lookup"><span data-stu-id="9c706-158">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for internal Skype for Business Server client autoconfiguration (which is **optional** ).</span></span>
    
  - <span data-ttu-id="9c706-159">DNS A und AAAA (wenn Sie IPv6-Adressierung verwenden) oder CNAME-Einträge für die automatische Erkennung von Skype for Business Server-Webdiensten ( **optional** ).</span><span class="sxs-lookup"><span data-stu-id="9c706-159">DNS A and AAAA (if you're using IPv6 addressing) or CNAME records for automatic discovery of Skype for Business Server Web Services (which is **optional** ).</span></span>
    
- <span data-ttu-id="9c706-160">Alle Skype for Business Server-internen Edge-Schnittstellen in Ihrem Umkreisnetzwerk verwenden diese interne DNS-Zone zum Auflösen von Abfragen in contoso.com.</span><span class="sxs-lookup"><span data-stu-id="9c706-160">All your Skype for Business Server internal Edge interfaces in your perimeter network use this internal DNS zone for resolving queries to contoso.com.</span></span>
    
- <span data-ttu-id="9c706-161">Alle Server, auf denen Skype for Business ausgeführt wird, und Clients, die Skype for Business Server im Unternehmensnetzwerk ausführen, verweisen auf interne DNS-Server zum Auflösen von Abfragen an contoso.com, oder Sie verwenden die Hostdatei auf jedem Edgeserver und Listen a und AAAA (bei Verwendung von IPv6 Addressing)-Einträge für den Next Hop-Server (speziell für den Director oder Director Pool VIP, Front-End-Pool VIP oder Standard Edition-Server).</span><span class="sxs-lookup"><span data-stu-id="9c706-161">All servers running Skype for Business Serve, and clients running Skype for Business Server in the corporate network, point to internal DNS servers for resolving queries to contoso.com, or they use the Host file on each Edge Server and list A and AAAA (if you're using IPv6 addressing) records for the next hop server (specifically for the Director or Director pool VIP, Front End pool VIP, or Standard Edition server).</span></span>
    
### <a name="external-dns"></a><span data-ttu-id="9c706-162">Externes DNS</span><span class="sxs-lookup"><span data-stu-id="9c706-162">External DNS</span></span>

- <span data-ttu-id="9c706-163">Enthält eine DNS-Zone namens (z. B.) „contoso.com“, für die es autoritativ ist.</span><span class="sxs-lookup"><span data-stu-id="9c706-163">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="9c706-164">Die externe „contoso.com“ enthält:</span><span class="sxs-lookup"><span data-stu-id="9c706-164">This external contoso.com contains:</span></span>
    
  - <span data-ttu-id="9c706-165">DNS A und AAAA (wenn Sie die IPv6-Adressierung verwenden) oder CNAME-Einträge für die automatische Erkennung von Skype for Business Server-Webdiensten.</span><span class="sxs-lookup"><span data-stu-id="9c706-165">DNS A and AAAA (if you're using IPv6 addressing), or CNAME records, for automatic discovery of Skype for Business Server web services.</span></span> <span data-ttu-id="9c706-166">Dies betrifft die Nutzung für Mobilität.</span><span class="sxs-lookup"><span data-stu-id="9c706-166">This is for use with mobility.</span></span>
    
  - <span data-ttu-id="9c706-167">DNS A und AAAA (wenn Sie die IPv6-Adressierung verwenden) und SRV-Einträge für die Edge-externe Schnittstelle jedes Skype for Business Server-Edgeserver-oder Hardware Load Balanced (HLB)-VIP im Umkreisnetzwerk.</span><span class="sxs-lookup"><span data-stu-id="9c706-167">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the Edge external interface of each Skype for Business Server Edge Server or hardware load balanced (HLB) VIP in the perimeter network.</span></span>
    
  - <span data-ttu-id="9c706-168">DNS A und AAAA (wenn Sie die IPv6-Adressierung verwenden) und SRV-Einträge für die externe Schnittstelle des Reverse Proxyservers oder (VIP für einen Pool von Reverse-Proxyservern) im Umkreisnetzwerk.</span><span class="sxs-lookup"><span data-stu-id="9c706-168">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the external interface of the Reverse proxy server or (VIP for a pool of Reverse proxy servers), in the perimeter network.</span></span>
    
  - <span data-ttu-id="9c706-169">DNS A und AAAA (wenn Sie die IPv6-Adressierung verwenden) und SRV-Einträge für die Autokonfiguration des Skype for Business Server-Clients (**optional**).</span><span class="sxs-lookup"><span data-stu-id="9c706-169">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for Skype for Business Server client autoconfiguration (**optional**).</span></span>
    
## <a name="automatic-configuration-without-split-brain-dns"></a><span data-ttu-id="9c706-170">Automatische Konfiguration ohne Split-Brain-DNS</span><span class="sxs-lookup"><span data-stu-id="9c706-170">Automatic configuration without split-brain DNS</span></span>
<span data-ttu-id="9c706-171"><a name="NoSplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="9c706-171"></span></span>

<span data-ttu-id="9c706-172">Wenn Sie nicht mit dem Split-Brain-DNS arbeiten, funktioniert die interne automatische Konfiguration von Clients, die Skype for Business ausführen, nur, wenn Sie eine der hier beschriebenen Problemumgehungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="9c706-172">If you don't use split-brain DNS, internal automatic configuration of clients running Skype for Business won't work unless you're using one of the workarounds we have here.</span></span> <span data-ttu-id="9c706-173">Warum funktioniert sie nicht?</span><span class="sxs-lookup"><span data-stu-id="9c706-173">Why not?</span></span> <span data-ttu-id="9c706-174">Da Skype for Business Server erfordert, dass der SIP-URI des Benutzers mit der Domäne des Front-End-Pools übereinstimmt, der für die automatische Konfiguration vorgesehen ist.</span><span class="sxs-lookup"><span data-stu-id="9c706-174">Because Skype for Business Server requires the user's SIP URI to match the domain of the Front End pool designated for automatic configuration.</span></span> <span data-ttu-id="9c706-175">Dies hat sich in früheren Versionen von lync Server nicht geändert.</span><span class="sxs-lookup"><span data-stu-id="9c706-175">This hasn't changed from earlier versions of Lync Server.</span></span>
  
<span data-ttu-id="9c706-176">Wenn Sie z. B. zwei SIP-Domänen verwenden, sind die zwei folgenden DNS-SRV-Einträge erforderlich:</span><span class="sxs-lookup"><span data-stu-id="9c706-176">So, if you have two SIP domains in use, you'd need these DNS SRV records:</span></span>
  
- <span data-ttu-id="9c706-p113">_sipinternaltls._tcp.contoso.com. 86400 IN SRV 0 0 5061 pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-p113">_sipinternaltls._tcp.contoso.com. 86400 IN SRV 0 0 5061 pool01.contoso.com</span></span>
    
     <span data-ttu-id="9c706-179">*Wenn sich ein Benutzer als Bob@contoso.com anmeldet, funktioniert dieser Eintrag für die automatische Konfiguration, da die SIP-Domäne des Benutzers der Domäne des Front-End-Pools (contoso.com) entspricht.*</span><span class="sxs-lookup"><span data-stu-id="9c706-179">*If a user signs in as bob@contoso.com, this record would work for automatic configuration, as the user's SIP domain matches the domain of the Front End pool (contoso.com).*</span></span> 
    
- <span data-ttu-id="9c706-180">_sipinternaltls._tcp.fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="9c706-180">_sipinternaltls._tcp.fabrikam.com.</span></span> <span data-ttu-id="9c706-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="9c706-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="9c706-182">*Wenn sich ein Benutzer als Alice@fabrikam.com anmeldet, würde dieser Eintrag für die automatische Konfiguration der zweiten Domäne wieder funktionieren, da die SIP-Domäne dem Front-End-Pool für diese Domäne entspricht.*</span><span class="sxs-lookup"><span data-stu-id="9c706-182">*If a user signs in as alice@fabrikam.com, this record would work for automatic configuration of the second domain, again because the SIP domain matches the Front End pool for that domain.*</span></span> 
    
<span data-ttu-id="9c706-183">Zur weiteren Veranschaulichung sei hier ein Beispiel aufgeführt, das nicht funktioniert:</span><span class="sxs-lookup"><span data-stu-id="9c706-183">To take the example further, this would not work:</span></span>
  
- <span data-ttu-id="9c706-p115">_sipinternaltls._tcp.litwareinc.com. 86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="9c706-p115">_sipinternaltls._tcp.litwareinc.com. 86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="9c706-186">*Wenn sich ein Benutzer als „tim@litwareinc.com“ anmeldet, kann sein Eintrag nicht für die automatische Konfiguration verwendet werden, da seine SIP-Domäne (litwareinc.com) nicht mit der Domäne des Pools (fabrikam.com) übereinstimmt.*</span><span class="sxs-lookup"><span data-stu-id="9c706-186">*A user signing in as tim@litwareinc.com won't work for automatic configuration, because his SIP domain (litwareinc.com) doesn't match the domain in the pool (fabrikam.com).*</span></span> 
    
<span data-ttu-id="9c706-187">Nun, da wir alles wissen, wenn Sie eine automatische Anforderung für Ihre Skype for Business-Clients ohne Split-Brain-DNS benötigen, haben Sie folgende Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="9c706-187">So now that we know all that, if you need automatic requirement for your Skype for Business clients without split-brain DNS, you have these options:</span></span>
  
- <span data-ttu-id="9c706-188">**Gruppenrichtlinien**</span><span class="sxs-lookup"><span data-stu-id="9c706-188">**Group Policy Objects**</span></span>
    
    <span data-ttu-id="9c706-189">Sie können Gruppenrichtlinienobjekte zum Auffüllen der richtigen Serverwerte verwenden.</span><span class="sxs-lookup"><span data-stu-id="9c706-189">You can use Group Policy Objects (GPOs) to populate the correct server values.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="9c706-p116">Mit dieser Option wird die automatische Konfiguration nicht aktiviert, der Prozess der manuellen Konfiguration wird jedoch automatisiert. Daher werden die SRV-Einträge für die automatische Konfiguration bei Verwendung dieses Ansatzes nicht benötigt.</span><span class="sxs-lookup"><span data-stu-id="9c706-p116">This option doesn't enable automatic configuration, but it does automate manual configuration. If this approach is used, the SRV records associated with automatic configuration aren't required.</span></span> 
  
- <span data-ttu-id="9c706-192">**Übereinstimmende interne Zone**</span><span class="sxs-lookup"><span data-stu-id="9c706-192">**Matching internal zone**</span></span>
    
    <span data-ttu-id="9c706-193">Sie müssen eine Zone in Ihrem internen DNS erstellen, die ihrer externen DNS-Zone entspricht (beispielsweise contoso.com), und dann DNS a (und AAAA, wenn Sie IPv6-Adressierung verwenden), Datensätze erstellen, die dem Skype for Business-Server Pool entsprechen, der für die automatische Verwendung verwendet wird. Konfiguration.</span><span class="sxs-lookup"><span data-stu-id="9c706-193">You'll need to create a zone in your internal DNS that matches your external DNS zone (for example, contoso.com), and then create DNS A (and AAAA if you're using IPv6 addressing) records that correspond to the Skype for Business Server pool used for automatic configuration.</span></span>
    
    <span data-ttu-id="9c706-194">Wenn Sie beispielsweise einen Benutzer in pool01.contoso.net haben, sich aber in Skype for Business als Bob@contoso.com anmelden, erstellen Sie eine interne DNS-Zone mit dem Namen contoso.com, und in Ihr müssen Sie einen DNS-Eintrag (und AAAA, wenn IPv6-Adressierung verwendet wird) erstellen. pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="9c706-194">For example, if you have a user homed on pool01.contoso.net, but signs into Skype for Business as bob@contoso.com, create an internal DNS zone called contoso.com, and inside it you need to create a DNS A (and AAAA if IPv6 addressing's being used) record for pool01.contoso.com.</span></span>
    
- <span data-ttu-id="9c706-195">**Interne dedizierte Zone**</span><span class="sxs-lookup"><span data-stu-id="9c706-195">**Pin-point internal zone**</span></span>
    
    <span data-ttu-id="9c706-p117">Wenn die Erstellung einer vollständigen internen DNS-Zone nicht möglich ist, können Sie dezidierte (zugeordnete) Zonen erstellen, die den für die automatische Konfiguration erforderlichen SRV-Einträgen entsprechen und diese Zonen mithilfe von „dnscmd.exe“ auffüllen. „Dnscmd.exe“ wird benötigt, da die Benutzeroberfläche für DNS das Erstellen von internen Zonen nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9c706-p117">If creating an entire zone in your internal DNS isn't an option for you, you can create pin-point (dedicated) zones that correspond to the SRV records required for automatic configuration, and populate those zones using dnscmd.exe. Dnscmd.exe is required because the DNS user interface won't support the creation of pin-point zones.</span></span>
    
    <span data-ttu-id="9c706-198">Wenn Ihre SIP-Domäne beispielsweise contoso.com ist und Sie über einen Front-End-Pool mit dem Namen pool01 verfügen, der zwei Front-End-Server enthält, benötigen Sie die folgenden Pin-Punkt Zonen und eine Datensätze in Ihrem internen DNS:</span><span class="sxs-lookup"><span data-stu-id="9c706-198">For example, if your SIP domain is contoso.com, and you have a Front End pool called pool01 that contains two Front End Servers, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```
  dnscmd . /zoneadd _sipinternaltls._tcp.contoso.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.contoso.com. @ SRV 0 0 5061 pool01.contoso.com.
  dnscmd . /zoneadd pool01.contoso.com. /dsprimary
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.91 
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

    <span data-ttu-id="9c706-p118">Wenn Ihre Umgebung eine zweite SIP-Domäne enthält, benötigen Sie die folgenden dedizierten Zonen und DNS-A-Einträge in Ihrem internen DNS:</span><span class="sxs-lookup"><span data-stu-id="9c706-p118">You may have a second SIP domain in your environment. In that case, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```
  dnscmd . /zoneadd _sipinternaltls._tcp.fabrikam.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.fabrikam.com. @ SRV 0 0 5061 pool01.fabrikam.com.
  dnscmd . /zoneadd pool01.fabrikam.com. /dsprimary
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.91
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

> [!NOTE]
> <span data-ttu-id="9c706-201">Sie sehen, dass der FQDN des Front-End-Pools zweimal angezeigt wird, jedoch mit zwei unterschiedlichen IP-Adressen.</span><span class="sxs-lookup"><span data-stu-id="9c706-201">You'll see the Front End pool FQDN appears twice, but with two different IP addresses.</span></span> <span data-ttu-id="9c706-202">Das liegt daran, dass der DNS-Lastenausgleich verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9c706-202">That's because DNS load balancing is used.</span></span> <span data-ttu-id="9c706-203">Wenn HLB verwendet wird, gibt es nur einen einzigen Front-End-Pool Eintrag.</span><span class="sxs-lookup"><span data-stu-id="9c706-203">If HLB is used, there'd only be a single Front End pool entry.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="9c706-204">Außerdem ändern sich die FQDN-Werte des Front-End-Pools zwischen den contoso.com-und fabrikam.com-Beispielen, aber die IP-Adressen bleiben identisch.</span><span class="sxs-lookup"><span data-stu-id="9c706-204">Also, the Front End pool FQDN values change between the contoso.com and fabrikam.com examples, but the IP addresses remain the same.</span></span> <span data-ttu-id="9c706-205">Das liegt daran, dass Benutzer, die sich über eine der SIP-Domänen anmelden, denselben Front-End-Pool für die automatische Konfiguration verwenden.</span><span class="sxs-lookup"><span data-stu-id="9c706-205">That's because users who're signing in from either SIP domain will be using the same Front End pool for automatic configuration.</span></span> 
  
## <a name="dns-disaster-recovery"></a><span data-ttu-id="9c706-206">DNS-Notfallwiederherstellung</span><span class="sxs-lookup"><span data-stu-id="9c706-206">DNS disaster recovery</span></span>
<span data-ttu-id="9c706-207"><a name="DNSDR"> </a></span><span class="sxs-lookup"><span data-stu-id="9c706-207"></span></span>

<span data-ttu-id="9c706-208">Um DNS so zu konfigurieren, dass der Web-Traffic von Skype for Business Server auf Ihre Disaster Recover (Dr)-und Failover-Websites umgeleitet wird, müssen Sie einen DNS-Anbieter verwenden, der GeoDNS unterstützt.</span><span class="sxs-lookup"><span data-stu-id="9c706-208">To configure DNS to redirect Skype for Business Server web traffic to your disaster recover (DR) and failover sites, you need to use a DNS provider that supports GeoDNS.</span></span> <span data-ttu-id="9c706-209">Sie können Ihre DNS-Einträge für die Unterstützung von Disaster Recovery einrichten, damit Features, die Webdienste verwenden, auch dann fortgesetzt werden, wenn ein ganzer Front-End-Pool ausfällt.</span><span class="sxs-lookup"><span data-stu-id="9c706-209">You can set up your DNS records to support disaster recover, so that features that use web services continue even if one entire Front End pool goes down.</span></span> <span data-ttu-id="9c706-210">Diese Notfallwiederherstellungsfunktion unterstützt AutoErmittlung, einfache URLs für Besprechungen und Einwahl.</span><span class="sxs-lookup"><span data-stu-id="9c706-210">This DR feature supports the Autodiscover, Meet and Dial-in simple URLs.</span></span>
  
<span data-ttu-id="9c706-p122">Sie definieren und konfigurieren zusätzliche DNS-Host-A-Einträge (AAAA, wenn Sie IPv6 verwenden) für die interne und externe Auflösung von Webdiensten bei Ihrem GeoDNS-Anbieter. Die folgenden Beispiele gehen von kombinierten Pools aus, die geografisch zerstreut sind, sowie davon, dass Ihr Anbieter GeoDNS **entweder** mit Roundrobin-DNS unterstützt **oder** dass es für die Verwendung von Pool1 als primärem Pool und Failover nach Pool2 konfiguriert ist, falls die Kommunikation abbricht oder die Hardware ausfällt.</span><span class="sxs-lookup"><span data-stu-id="9c706-p122">You define and configure additional DNS host A (AAAA if using IPv6) records for internal and external resolution of web services at your GeoDNS provider. The following details assume paired pools, geographically dispersed, and that the GeoDNS supported by your provider **either** has round-robin DNS **or** is configured to use Pool1 as primary and fails over to Pool2 in the event of any communications loss or power failure.</span></span>
  
<span data-ttu-id="9c706-213">Alle DNS-Einträge in dieser Tabelle sind Beispiele.</span><span class="sxs-lookup"><span data-stu-id="9c706-213">All the DNS records in this table are examples.</span></span>
  
|<span data-ttu-id="9c706-214">**GeoDNS-Eintrag**</span><span class="sxs-lookup"><span data-stu-id="9c706-214">**GeoDNS record**</span></span>|<span data-ttu-id="9c706-215">**Pool-Einträge**</span><span class="sxs-lookup"><span data-stu-id="9c706-215">**Pool records**</span></span>|<span data-ttu-id="9c706-216">**CNAME-Einträge**</span><span class="sxs-lookup"><span data-stu-id="9c706-216">**CNAME records**</span></span>|<span data-ttu-id="9c706-217">**DNS-Einstellungen (wählen Sie eine Option aus)**</span><span class="sxs-lookup"><span data-stu-id="9c706-217">**DNS settings (select one option)**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="9c706-218">Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-218">Meet-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-219">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-219">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-220">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-220">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-221">Meet.contoso.com-Alias für Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-221">Meet.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-222">Meet.contoso.com-Alias für Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-222">Meet.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-223">Roundrobin zwischen Pools</span><span class="sxs-lookup"><span data-stu-id="9c706-223">Round Robin between pools</span></span>  <br/> <span data-ttu-id="9c706-224">**ODER**</span><span class="sxs-lookup"><span data-stu-id="9c706-224">**OR**</span></span> <br/> <span data-ttu-id="9c706-225">Primäre verwenden, bei Fehler mit der sekundären verbinden</span><span class="sxs-lookup"><span data-stu-id="9c706-225">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="9c706-226">Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-226">Meet-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-227">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-227">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-228">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-228">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-229">Meet.contoso.com-Alias für Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-229">Meet.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-230">Meet.contoso.com-Alias für Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-230">Meet.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-231">Roundrobin zwischen Pools</span><span class="sxs-lookup"><span data-stu-id="9c706-231">Round Robin between pools</span></span>  <br/> <span data-ttu-id="9c706-232">**ODER**</span><span class="sxs-lookup"><span data-stu-id="9c706-232">**OR**</span></span> <br/> <span data-ttu-id="9c706-233">Primäre verwenden, bei Fehler mit der sekundären verbinden</span><span class="sxs-lookup"><span data-stu-id="9c706-233">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="9c706-234">Dialin-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-234">Dialin-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-235">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-235">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-236">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-236">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-237">Dialin.contoso.com-Alias für Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-237">Dialin.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-238">Dialin.contoso.com-Alias für Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-238">Dialin.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-239">Roundrobin zwischen Pools</span><span class="sxs-lookup"><span data-stu-id="9c706-239">Round Robin between pools</span></span>  <br/> <span data-ttu-id="9c706-240">**ODER**</span><span class="sxs-lookup"><span data-stu-id="9c706-240">**OR**</span></span> <br/> <span data-ttu-id="9c706-241">Primäre verwenden, bei Fehler mit der sekundären verbinden</span><span class="sxs-lookup"><span data-stu-id="9c706-241">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="9c706-242">Dialin-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-242">Dialin-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-243">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-243">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-244">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-244">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-245">Dialin.contoso.com-Alias für Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-245">Dialin.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-246">Dialin.contoso.com-Alias für Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-246">Dialin.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-247">Roundrobin zwischen Pools</span><span class="sxs-lookup"><span data-stu-id="9c706-247">Round Robin between pools</span></span>  <br/> <span data-ttu-id="9c706-248">**ODER**</span><span class="sxs-lookup"><span data-stu-id="9c706-248">**OR**</span></span> <br/> <span data-ttu-id="9c706-249">Primäre verwenden, bei Fehler mit der sekundären verbinden</span><span class="sxs-lookup"><span data-stu-id="9c706-249">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="9c706-250">Lyncdiscoverint-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-250">Lyncdiscoverint-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-251">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-251">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-252">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-252">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-253">Lyncdiscoverinternal.contoso.com-Alias für Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-253">Lyncdiscoverinternal.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-254">Lyncdiscoverinternal.contoso.com-Alias für Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-254">Lyncdiscoverinternal.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-255">Roundrobin zwischen Pools</span><span class="sxs-lookup"><span data-stu-id="9c706-255">Round Robin between pools</span></span>  <br/> <span data-ttu-id="9c706-256">**ODER**</span><span class="sxs-lookup"><span data-stu-id="9c706-256">**OR**</span></span> <br/> <span data-ttu-id="9c706-257">Primäre verwenden, bei Fehler mit der sekundären verbinden</span><span class="sxs-lookup"><span data-stu-id="9c706-257">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="9c706-258">Lyncdiscover-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-258">Lyncdiscover-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-259">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-259">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-260">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-260">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-261">Lyncdiscover.contoso.com-Alias für Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-261">Lyncdiscover.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-262">Lyncdiscover.contoso.com-Alias für Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-262">Lyncdiscover.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-263">Roundrobin zwischen Pools</span><span class="sxs-lookup"><span data-stu-id="9c706-263">Round Robin between pools</span></span>  <br/> <span data-ttu-id="9c706-264">**ODER**</span><span class="sxs-lookup"><span data-stu-id="9c706-264">**OR**</span></span> <br/> <span data-ttu-id="9c706-265">Primäre verwenden, bei Fehler mit der sekundären verbinden</span><span class="sxs-lookup"><span data-stu-id="9c706-265">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="9c706-266">Scheduler-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-266">Scheduler-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-267">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-267">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-268">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-268">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-269">Scheduler.contoso.com-Alias für Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-269">Scheduler.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-270">Scheduler.contoso.com-Alias für Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-270">Scheduler.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-271">Roundrobin zwischen Pools</span><span class="sxs-lookup"><span data-stu-id="9c706-271">Round Robin between pools</span></span>  <br/> <span data-ttu-id="9c706-272">**ODER**</span><span class="sxs-lookup"><span data-stu-id="9c706-272">**OR**</span></span> <br/> <span data-ttu-id="9c706-273">Primäre verwenden, bei Fehler mit der sekundären verbinden</span><span class="sxs-lookup"><span data-stu-id="9c706-273">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="9c706-274">Scheduler-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-274">Scheduler-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-275">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-275">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-276">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-276">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-277">Scheduler.contoso.com-Alias für Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-277">Scheduler.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="9c706-278">Scheduler.contoso.com-Alias für Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-278">Scheduler.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-279">Roundrobin zwischen Pools</span><span class="sxs-lookup"><span data-stu-id="9c706-279">Round Robin between pools</span></span>  <br/> <span data-ttu-id="9c706-280">**ODER**</span><span class="sxs-lookup"><span data-stu-id="9c706-280">**OR**</span></span> <br/> <span data-ttu-id="9c706-281">Primäre verwenden, bei Fehler mit der sekundären verbinden</span><span class="sxs-lookup"><span data-stu-id="9c706-281">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
   
## <a name="dns-load-balancing"></a><span data-ttu-id="9c706-282">DNS-Lastenausgleich</span><span class="sxs-lookup"><span data-stu-id="9c706-282">DNS load balancing</span></span>
<span data-ttu-id="9c706-283"><a name="DNSLB"> </a></span><span class="sxs-lookup"><span data-stu-id="9c706-283"></span></span>

<span data-ttu-id="9c706-284">Der DNS-Lastenausgleich wird in der Regel auf Anwendungsebene implementiert.</span><span class="sxs-lookup"><span data-stu-id="9c706-284">DNS load balancing is usually implemented at the application level.</span></span> <span data-ttu-id="9c706-285">Die Anwendung (beispielsweise ein Client, auf dem Skype for Business ausgeführt wird) versucht, eine Verbindung mit einem Server in einem Pool herzustellen, indem eine Verbindung mit einer der IP-Adressen hergestellt wird, die von der DNS a-und AAAA-Daten Satz Abfrage für den Pool-FQDN zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="9c706-285">The application (for example, a client running Skype for Business), tries to connect to a server in a pool by connecting to one of the IP addresses returned from the DNS A and AAAA (if IPv6 addressing is used) record query for the pool FQDN.</span></span>
  
<span data-ttu-id="9c706-286">Wenn es beispielsweise drei Front-End-Server in einem Pool mit dem Namen "pool01.contoso.com" gibt, würde folgendes passieren:</span><span class="sxs-lookup"><span data-stu-id="9c706-286">For example, if there are three Front End Servers in a pool named pool01.contoso.com, the following would happen:</span></span>
  
- <span data-ttu-id="9c706-287">Clients mit Skype for Business-Abfrage-DNS für pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="9c706-287">Clients running Skype for Business query DNS for pool01.contoso.com.</span></span> <span data-ttu-id="9c706-288">Die Anfrage gibt drei IP-Adressen zurück und speichert diese wie folgt im Zwischenspeicher (nicht unbedingt in dieser Reihenfolge):</span><span class="sxs-lookup"><span data-stu-id="9c706-288">The query returns three IP addresses and caches them as follows (in some order):</span></span>
    
   |||
   |:-----|:-----|
   |<span data-ttu-id="9c706-289">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-289">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-290">192.168.10.90</span><span class="sxs-lookup"><span data-stu-id="9c706-290">192.168.10.90</span></span>  <br/> |
   |<span data-ttu-id="9c706-291">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-291">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-292">192.168.10.91</span><span class="sxs-lookup"><span data-stu-id="9c706-292">192.168.10.91</span></span>  <br/> |
   |<span data-ttu-id="9c706-293">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="9c706-293">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="9c706-294">192.168.10.92</span><span class="sxs-lookup"><span data-stu-id="9c706-294">192.168.10.92</span></span>  <br/> |
   
- <span data-ttu-id="9c706-p125">Der Client versucht, eine TCP-Verbindung zu einer der IP-Adressen herzustellen. Funktioniert dies nicht, wird er es bei der nächsten auf der Liste zwischengespeicherten IP-Adresse versuchen.</span><span class="sxs-lookup"><span data-stu-id="9c706-p125">The client tries to establish a TCP connection to one of the IP addresses. If that fails, it'll try the next IP address it's cached from that list.</span></span>
    
- <span data-ttu-id="9c706-297">Bei erfolgreicher TCP-Verbindung handelt der Client die Verwendung von TLS zur Verbindungsherstellung mit der primären Registrierung in „pool01.contoso.com“ aus.</span><span class="sxs-lookup"><span data-stu-id="9c706-297">If the TCP connection succeeds, the client negotiates TLS to connect to the primary registrar on pool01.contoso.com.</span></span>
    
- <span data-ttu-id="9c706-298">Wenn der Client alle zwischengespeicherten Einträge ohne erfolgreiche Verbindung versucht, erhält der Benutzer eine Benachrichtigung, dass derzeit keine Server mit Skype for Business Server verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="9c706-298">If the client tries all cached entries without a successful connection, the user receives a notification that no servers running Skype for Business Server are available at the moment.</span></span>
    
> [!NOTE]
> <span data-ttu-id="9c706-p126">Der DNS-basierte Lastenausgleich unterscheidet sich von DNS-Roundrobin (DNS RR). Dieser Mechanismus bezieht sich normalerweise auf einen Lastenausgleich, bei dem DNS zur Bereitstellung einer anderen Reihenfolge von IP-Adressen für die Server in einem Pool eingesetzt wird. Mit DNS RR ist üblicherweise nur ein Lastenausgleich, jedoch kein Failover möglich. Wenn z. B. die Verbindung mit der IP-Adresse, die über die DNS-A-Abfrage (oder DNS-AAAA-Abfrage, wenn Sie IPv6-Adressen nutzen) zurückgegeben wurde, nicht hergestellt werden kann, tritt für die Verbindungsherstellung ein Fehler auf. Daher ist DNS-Roundrobin allein weniger zuverlässig als der DNS-basierte Lastenausgleich. Sie können DNS-Roundrobin dennoch gemeinsam mit dem DNS-Lastenausgleich verwenden, wenn es nötig ist.</span><span class="sxs-lookup"><span data-stu-id="9c706-p126">DNS-based load balancing is different from DNS round robin (DNS RR), which typically refers to load balancing by relying on DNS to give a different order of IP addresses for the servers in your pool. Typically, DNS RR enables load distribution, but it won't allow you to enable failover. For example, if the connection to the one IP address returned by your DNS A (or AAAA in an IPv6 scenario) query fails, that connection will fail. That makes DNS RR less reliable than DNS-based load balancing. You can still use DNS RR in conjunction with DNS-based load balancing if you need to do that.</span></span> 
  
<span data-ttu-id="9c706-304">Funktionen des DNS-Lastenausgleichs:</span><span class="sxs-lookup"><span data-stu-id="9c706-304">You use DNS load balancing to:</span></span>
  
- <span data-ttu-id="9c706-305">Laden Sie das Server-zu-Server-SIP-Guthaben auf die Edgeserver.</span><span class="sxs-lookup"><span data-stu-id="9c706-305">Load balance server-to-server SIP to the Edge Servers.</span></span>
    
- <span data-ttu-id="9c706-306">Lastenausgleich für Anwendungen der Unified Communications-Anwendungsdienste, z. B. automatische Konferenztelefonzentrale, Reaktionsgruppen und die Anwendung zum Parken von Anrufen.</span><span class="sxs-lookup"><span data-stu-id="9c706-306">Load balance Unified Communication Application Services (UCAS) applications, such as Conferencing Auto Attendant, Response Group, and Call Park.</span></span>
    
- <span data-ttu-id="9c706-307">Verhindern neuer Verbindungen mit Anwendungen der Unified Communications-Anwendungsdienste (auch als „Serverausgleich“ bekannt).</span><span class="sxs-lookup"><span data-stu-id="9c706-307">Prevent new connections to UCAS applications (also known as draining).</span></span>
    
- <span data-ttu-id="9c706-308">Lastenausgleich für den gesamten Client-zu-Server-Datenverkehr zwischen Clients und Edgeserver.</span><span class="sxs-lookup"><span data-stu-id="9c706-308">Load balance all client-to-server traffic between clients and Edge Servers.</span></span>
    
<span data-ttu-id="9c706-309">Keine Funktionen des DNS-Lastenausgleichs:</span><span class="sxs-lookup"><span data-stu-id="9c706-309">You can't use DNS load balancing for:</span></span>
  
- <span data-ttu-id="9c706-310">Client-zu-Server-Webdatenverkehr zu Ihren Front-End-Servern oder einem Director.</span><span class="sxs-lookup"><span data-stu-id="9c706-310">Client-to-server web traffic to your Front End Servers or a Director.</span></span>
    
<span data-ttu-id="9c706-311">Wenn Sie etwas ausführlicher darüber erfahren möchten, wie ein DNS-SRV-Eintrag ausgewählt wird, wenn Vielfaches-DNS-Einträge von einer Abfrage zurückgegeben werden, wählt der Access-Edgedienst immer den Datensatz mit der niedrigsten numerischen Priorität und, wenn ein Tie-Breaker erforderlich ist, die höchste numerische Gewichtung aus.</span><span class="sxs-lookup"><span data-stu-id="9c706-311">To go a little more in-depth on how a DNS SRV record's selected when mutiple DNS records are returned by a query, the Access Edge service always picks the record with the lowest numeric priority and, if a tie-breaker is needed, the highest numeric weight.</span></span> <span data-ttu-id="9c706-312">Dies ist mit der [Internet Engineering Task Force-Dokumentation](https://www.ietf.org/rfc/rfc2782.txt)konsistent.</span><span class="sxs-lookup"><span data-stu-id="9c706-312">This is consistent with [Internet Engineering Task Force documentation](https://www.ietf.org/rfc/rfc2782.txt).</span></span>
  
<span data-ttu-id="9c706-p128">Angenommen der DNS-SRV-Eintrag A hat eine Gewichtung von 20 und eine Priorität von 40 und der DNS-SRV-Eintrag B hat eine Gewichtung von 10 und eine Priorität von 50. In diesem Fall wird der erste Eintrag ausgewählt, da er die niedrigere Priorität von 40 hat. Es kommt auf die Priorität an und den Host mit der niedrigeren steuert ein Client als erstes an. Was passiert, wenn zwei Ziele die gleiche Priorität haben?</span><span class="sxs-lookup"><span data-stu-id="9c706-p128">So, for example, if your first DNS SRV record has a weight of 20 and a priority of 40, and your second DNS SRV record has a weight of 10 and a priority of 50, the first record's going to be chosen because it has the lower priority of 40. Priority always goes first, and that's the host that a client will target first. What if there are two targets with the same priority?</span></span> 
  
<span data-ttu-id="9c706-p129">In diesem Fall kommt es dann auch die Gewichtung an. Größere Gewichtungen sollten mit proportional höherer Wahrscheinlichkeit gewählt werden. DNS-Administratoren sollten eine Gewichtung von 0 verwenden, wenn keine Serverauswahl getroffen werden muss. Wenn Server mit größeren Gewichtungen als 0 vorhanden sind, werden Einträge mit der Gewichtung 0 höchstwahrscheinlich nicht ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="9c706-p129">In that case, weight comes into consideration. Larger weights should be given a high probability, in this circumstance, of being selected. DNS administrators should use weight 0 when there isn't any server selection to do. In the presence of records containing weights greater than 0, records with weight 0 have a very small chance of bring selected.</span></span>
  
<span data-ttu-id="9c706-320">Was passiert also, wenn mehrere DNS-SRV-Einträge mit gleicher Priorität und Gewichtung zurückgegeben werden?</span><span class="sxs-lookup"><span data-stu-id="9c706-320">So, then, what happens if multiple DNS SRV records with equal priority and weight as returned?</span></span> <span data-ttu-id="9c706-321">In diesem Fall wählt der Access-Edgedienst zuerst den SRV-Eintrag aus, den er vom DNS-Server erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="9c706-321">In this situation the Access Edge service will choose the SRV record that it got from the DNS server first.</span></span>
  

