---
title: Bereitstellen von AV- und OAuth-Zertifikaten in Skype für Business Server mithilfe von-Roll in Set-CsCertificate
ms.reviewer: ''
ms.author: heidip
author: microsoftheidi
manager: serdars
ms.audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 22dec3cc-4b6b-4df2-b269-5b35df4731a7
description: 'Zusammenfassung: Phase AV- und OAuth Zertifikate für Skype für Business Server.'
ms.openlocfilehash: 859f4f1cd28eaa930f7cf3697e7ed5349f1bc966
ms.sourcegitcommit: da8c037bb30abf5d5cf3b60d4b71e3a10e553402
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/27/2019
ms.locfileid: "30889938"
---
# <a name="stage-av-and-oauth-certificates-in-skype-for-business-server-using--roll-in-set-cscertificate"></a><span data-ttu-id="39b1c-103">Bereitstellen von AV- und OAuth-Zertifikaten in Skype für Business Server mithilfe von-Roll in Set-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="39b1c-103">Stage AV and OAuth certificates in Skype for Business Server using -Roll in Set-CsCertificate</span></span>
 
<span data-ttu-id="39b1c-104">**Zusammenfassung:** Phase AV- und OAuth-Zertifikaten für Skype für Business Server.</span><span class="sxs-lookup"><span data-stu-id="39b1c-104">**Summary:** Stage AV and OAuth certificates for Skype for Business Server.</span></span>
  
<span data-ttu-id="39b1c-105">Audio/Video (A / V) Communications ist eine wichtige Komponente von Skype für Business Server.</span><span class="sxs-lookup"><span data-stu-id="39b1c-105">Audio/Video (A/V) communications is a key component of Skype for Business Server.</span></span> <span data-ttu-id="39b1c-106">Features wie etwa Anwendung freigeben und Audio- und Videokonferenzen beruhen auf die Zertifikate zugewiesen sind, der a / V-edgedienst, insbesondere der A / V-Authentifizierungsdienst.</span><span class="sxs-lookup"><span data-stu-id="39b1c-106">Features such as application sharing and audio and video conferencing rely on the certificates assigned to the A/V Edge service, specifically the A/V Authentication service.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="39b1c-107">Dieses neue Feature wurde entwickelt für den A / V-edgedienst und OAuthTokenIssuer-Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="39b1c-107">This new feature is designed to work for the A/V Edge service and the OAuthTokenIssuer certificate.</span></span> <span data-ttu-id="39b1c-108">Andere Zertifikattypen bereitgestellt werden können, zusammen mit dem A / V-edgedienst und OAuth-Zertifikats Typ, aber haben keinen Nutzen aus der Koexistenzverhalten, A / V-Edgeserver das Zertifikat wird.</span><span class="sxs-lookup"><span data-stu-id="39b1c-108">Other certificate types can be provisioned along with the A/V Edge service and OAuth certificate type, but will not benefit from the coexistence behavior that the A/V Edge service certificate will.</span></span>
  
<span data-ttu-id="39b1c-109">Die Skype für Business Server Management Shell PowerShell-Cmdlets zur Verwaltung von Skype für Business Serverzertifikate bezieht sich auf den A / V-edgedienst Zertifikat als Typ AudioVideoAuthentication-Zertifikat und das OAuthServer als TypeOAuthTokenIssuer.</span><span class="sxs-lookup"><span data-stu-id="39b1c-109">The Skype for Business Server Management Shell PowerShell cmdlets used to manage Skype for Business Server certificates refers to the A/V Edge service certificate as the AudioVideoAuthentication certificate type and the OAuthServer certificate as typeOAuthTokenIssuer.</span></span> <span data-ttu-id="39b1c-110">Für den Rest dieses Themas und um die Zertifikate eindeutig zu identifizieren werden sie durch den Bezeichnertyp AudioVideoAuthentication AndOAuthTokenIssuer bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="39b1c-110">For the rest of this topic and to uniquely identify the certificates, they will be referred to by the same identifier type, AudioVideoAuthentication andOAuthTokenIssuer.</span></span>
  
<span data-ttu-id="39b1c-111">Der A / V-Authentifizierungsdienst ist dafür verantwortlich, Ausstellen von Token, die von Clients und anderen A verwendet werden / V-Consumer.</span><span class="sxs-lookup"><span data-stu-id="39b1c-111">The A/V Authentication service is responsible for issuing tokens that are used by clients and other A/V consumers.</span></span> <span data-ttu-id="39b1c-112">Die Token aus Attribute für das Zertifikat generiert und bei Ablauf des Zertifikats ergeben Verlust der Verbindung und die Anforderung an einen neuen Token generiert, die für das neue Zertifikat erneut an.</span><span class="sxs-lookup"><span data-stu-id="39b1c-112">The tokens are generated from attributes on the certificate, and when the certificate expires, loss of connection and requirement to rejoin with a new token generated by the new certificate will result.</span></span> <span data-ttu-id="39b1c-113">Ein neues Feature in Skype für Business Server wird dieses Problem - die Möglichkeit, ein neues Zertifikat, bevor der alte Datenbankserver ablaufen und ermöglichen beide Zertifikate für eine bestimmte Zeitspanne funktionieren weiterhin Phase verringern.</span><span class="sxs-lookup"><span data-stu-id="39b1c-113">A new feature in Skype for Business Server will alleviate this problem - the ability to stage a new certificate in advance of the old one expiring and allowing both certificates to continue to function for a period of time.</span></span> <span data-ttu-id="39b1c-114">Diese Funktion nutzt aktualisierte Funktionalität in der Set-CsCertificate Skype für Business Server-Verwaltungsshell-Cmdlet.</span><span class="sxs-lookup"><span data-stu-id="39b1c-114">This feature uses updated functionality in the Set-CsCertificate Skype for Business Server Management Shell cmdlet.</span></span> <span data-ttu-id="39b1c-115">Der neue Parameter-Würfeln, mit dem vorhandenen Parameter - EffectiveDate, das neue AudioVideoAuthentication-Zertifikat im Zertifikatspeicher platziert wird.</span><span class="sxs-lookup"><span data-stu-id="39b1c-115">The new parameter -Roll, with the existing parameter -EffectiveDate, will place the new AudioVideoAuthentication certificate in the certificate store.</span></span> <span data-ttu-id="39b1c-116">Das ältere AudioVideoAuthentication-Zertifikat bleibt weiterhin für ausgestellten Token anhand überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="39b1c-116">The older AudioVideoAuthentication certificate will still remain for issued tokens to be validated against.</span></span> <span data-ttu-id="39b1c-117">Bereitstellen des neuen AudioVideoAuthentication-Zertifikats ab, wird die folgende Reihe von Ereignissen auftreten:</span><span class="sxs-lookup"><span data-stu-id="39b1c-117">Beginning with putting the new AudioVideoAuthentication certificate in place, the following series of events will occur:</span></span>
  
> [!TIP]
> <span data-ttu-id="39b1c-118">Verwenden die Skype als Business Server-Verwaltungsshell-Cmdlets zum Verwalten von Zertifikaten, können Sie für jeden Zweck auf dem Edgeserver separate und eigenständige Zertifikate anfordern.</span><span class="sxs-lookup"><span data-stu-id="39b1c-118">Using the Skype for Business Server Management Shell cmdlets for managing certificates, you can request separate and distinct certificates for each purpose on the Edge Server.</span></span> <span data-ttu-id="39b1c-119">Mit den Zertifikat-Assistenten in der Skype für Business Server Installations-Assistent hilft Ihnen beim Erstellen von Zertifikaten, aber in der Regel **dem Standardtyp welche Paare alle Zertifikat für den Edgeserver in einem einzigen Zertifikat verwendet** wird.</span><span class="sxs-lookup"><span data-stu-id="39b1c-119">Using the Certificate Wizard in the Skype for Business Server Deployment Wizard assists you in creating certificates, but is typically of the **default** type which couples all certificate uses for the Edge Server onto a single certificate.</span></span> <span data-ttu-id="39b1c-120">Die empfohlene Vorgehensweise bei Verwendung der Funktion für rollende Zertifikate besteht darin, das AudioVideoAuthentication-Zertifikat von den anderen Zertifikatzwecken zu lösen.</span><span class="sxs-lookup"><span data-stu-id="39b1c-120">The recommended practice if you are going to use the rolling certificate feature is to decouple the AudioVideoAuthentication certificate from the other certificate purposes.</span></span> <span data-ttu-id="39b1c-121">Sie können ein Zertifikat vom Typ „Standard“ bereitstellen, doch nur der AudioVideoAuthentication-Teil des kombinierten Zertifikats profitiert von dem Staging.</span><span class="sxs-lookup"><span data-stu-id="39b1c-121">You can provision and stage a certificate of the Default type, but only the AudioVideoAuthentication portion of the combined certificate will benefit from the staging.</span></span> <span data-ttu-id="39b1c-122">Ein Benutzer beteiligt (z. b) eine Sofortnachrichtenunterhaltung, wenn das Zertifikat abläuft ab-und wieder anmelden, um zu machen müssen mithilfe des neuen Zertifikats mit Zugriffs-edgedienst verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="39b1c-122">A user involved in (for example) an instant messaging conversation when the certificate expires will need to log out and log back in to make use of the new certificate associated with the Access Edge service.</span></span> <span data-ttu-id="39b1c-123">Ähnliches Verhalten tritt für einen Benutzer einer Webkonferenz mithilfe des Webkonferenz-edgediensts beteiligt.</span><span class="sxs-lookup"><span data-stu-id="39b1c-123">Similar behavior will occur for a user involved in a Web conference using the Web Conferencing Edge service.</span></span> <span data-ttu-id="39b1c-124">Das OAuthTokenIssuer-Zertifikat ist ein bestimmter Typ, der auf allen Servern freigegeben ist.</span><span class="sxs-lookup"><span data-stu-id="39b1c-124">The OAuthTokenIssuer certificate is a specific type that is shared across all servers.</span></span> <span data-ttu-id="39b1c-125">Sie erstellen und Verwalten des Zertifikats an einem Ort und das Zertifikat wird gespeichert im zentralen Verwaltungsspeicher für alle anderen Server.</span><span class="sxs-lookup"><span data-stu-id="39b1c-125">You create and manage the certificate in one place and the certificate is stored in the Central Management store for all other servers.</span></span>
  
<span data-ttu-id="39b1c-126">Zusätzliche Informationen werden benötigt, um die Optionen und Anforderungen bei der Verwendung des Set-CsCertificate-Cmdlets zum Bereitstellen von Zertifikaten vor dem Ablauf des aktuellen Zertifikats nachvollziehen zu können.</span><span class="sxs-lookup"><span data-stu-id="39b1c-126">Additional detail is needed to fully understand your options and requirements when using the Set-CsCertificate cmdlet and using it to stage certificates prior to the current certificate expiring.</span></span> <span data-ttu-id="39b1c-127">Die - Roll Parameter ist wichtig, aber einzelne im wesentlichen Zweck.</span><span class="sxs-lookup"><span data-stu-id="39b1c-127">The -Roll parameter is important, but essentially single purpose.</span></span> <span data-ttu-id="39b1c-128">Wenn Sie als Parameter definieren, werden Sie Set-CsCertificate, die Sie bereitstellen werden werden Informationen über das Zertifikat betroffen sein von - definierten mitteilen Typs (beispielsweise AudioVideoAuthentication und OAuthTokenIssuer), wenn das Zertifikat wird die Übermittlung wirksamer durch - EffectiveDate definiert.</span><span class="sxs-lookup"><span data-stu-id="39b1c-128">If you define it as a parameter, you are telling Set-CsCertificate that you will be providing information about the certificate that will be affected defined by -Type (for example AudioVideoAuthentication and OAuthTokenIssuer), when the certificate will become effective defined by -EffectiveDate.</span></span>
  
 <span data-ttu-id="39b1c-129">**-Ein Rollback**:-Roll Parameter ist erforderlich und hat Abhängigkeiten, die zusammen mit dem angegeben werden müssen.</span><span class="sxs-lookup"><span data-stu-id="39b1c-129">**-Roll**: The -Roll parameter is required and has dependencies that must be supplied along with it.</span></span> <span data-ttu-id="39b1c-130">Parameter, die zum Festlegen der betroffenen Zertifikate und ihrer Anwendungsweise erforderlich sind:</span><span class="sxs-lookup"><span data-stu-id="39b1c-130">Required parameters to fully define which certificates will be affected and how they will be applied:</span></span>
  
 <span data-ttu-id="39b1c-131">**EffectiveDate-**: der Parameter - EffectiveDate definiert, wann das neue Zertifikat mit dem aktuellen Zertifikat co-active gestellt wird.</span><span class="sxs-lookup"><span data-stu-id="39b1c-131">**-EffectiveDate**: The parameter -EffectiveDate defines when the new certificate will become co-active with the current certificate.</span></span> <span data-ttu-id="39b1c-132">EffectiveDate - kann ungefähr die Ablaufzeit für das aktuelle Zertifikat, oder es kann sich um einen längeren Zeitraum.</span><span class="sxs-lookup"><span data-stu-id="39b1c-132">The -EffectiveDate can be close to the expiry time of the current certificate, or it can be a longer period of time.</span></span> <span data-ttu-id="39b1c-133">Eine empfohlene minimale - EffectiveDate für das AudioVideoAuthentication-Zertifikat wäre 8 Stunden, also die standardmäßige Gültigkeitsdauer von token für a/v-Edgeserver Service Token mit AudioVideoAuthentication-Zertifikat ausgestellt.</span><span class="sxs-lookup"><span data-stu-id="39b1c-133">A recommended minimum -EffectiveDate for the AudioVideoAuthentication certificate would be 8 hours, which is the default token lifetime for AV Edge service tokens issued using the AudioVideoAuthentication certificate.</span></span>
  
<span data-ttu-id="39b1c-p109">Für das Bereitstellen der OAuthTokenIssuer-Zertifikate liegen verschiedene Anforderungen für die Vorlaufzeit vor, bevor das Zertifikat wirksam werden kann. Der Mindestwert des OAuthTokenIssuer-Zertifikats für die Vorlaufzeit sollte 24 Stunden vor der Ablaufzeit des aktuellen Zertifikats betragen. Die erweiterte Vorlaufzeit für die Koexistenz ist durch andere Serverrollen begründet, die von dem OAuthTokenIssuer-Zertifikat (beispielsweise Exchange Server) abhängen, das eine längere Aufbewahrungszeit für durch Zertifikate erstellte Authentifizierungs- und Verschlüsselungsschlüsselelemente besitzt.</span><span class="sxs-lookup"><span data-stu-id="39b1c-p109">When staging OAuthTokenIssuer certificates, there are different requirements for the lead time before the certificate can become effective. The minimum time that the OAuthTokenIssuer certificate should have for its lead time is 24 hours before the expiration time of the current certificate. The extended lead time for the coexistence is because of other server roles that are dependent on the OAuthTokenIssuer certificate (Exchange Server, for example) which has a longer retention time for certificate created authentication and encryption key materials.</span></span>
  
 <span data-ttu-id="39b1c-137">**-Thumbprint**: Beim Fingerabdruck handelt es sich um ein für dieses Zertifikat eindeutiges Attribut.</span><span class="sxs-lookup"><span data-stu-id="39b1c-137">**-Thumbprint**: The thumbprint is an attribute on the certificate that is unique to that certificate.</span></span> <span data-ttu-id="39b1c-138">Den Fingerabdruck des - Parameter verwendet wird, um das Zertifikat zu identifizieren, die betroffen sein durch die Aktionen des Cmdlets Set-CsCertificate.</span><span class="sxs-lookup"><span data-stu-id="39b1c-138">The -Thumbprint parameter is used to identify the certificate that will be affected by the actions of the Set-CsCertificate cmdlet.</span></span>
  
 <span data-ttu-id="39b1c-139">**-Typ**:-Type-Parameter kann ein einzelnes Zertifikat Verwendungstyp oder eine durch Kommas getrennte Liste mit Verwendungstypen Zertifikat akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="39b1c-139">**-Type**: The -Type parameter can accept a single certificate usage type or a comma separated list of certificate usage types.</span></span> <span data-ttu-id="39b1c-140">Die Zertifikattypen geben für das Cmdlet und den Server an, worin der Zweck des Zertifikats besteht.</span><span class="sxs-lookup"><span data-stu-id="39b1c-140">The certificate types are those that identify to the cmdlet and to the server what the purpose of the certificate is.</span></span> <span data-ttu-id="39b1c-141">Typ AudioVideoAuthentication ist beispielsweise für die Verwendung durch den A / V-edgedienst und a/v-Authentifizierungsdienst.</span><span class="sxs-lookup"><span data-stu-id="39b1c-141">For example, type AudioVideoAuthentication is for use by the A/V Edge service and the AV Authentication service.</span></span> <span data-ttu-id="39b1c-142">Wenn Sie verschiedene Zertifikattypen zum gleichen Zeitpunkt bereitstellen möchten, müssen Sie die längste effektive Mindestvorlaufzeit für die Zertifikate berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="39b1c-142">If you decide to stage and provision certificates of a different type at the same time, you must consider the longest required minimum effective lead time for the certificates.</span></span> <span data-ttu-id="39b1c-143">Sie müssen beispielsweise Zertifikate vom Typ „AudioVideoAuthentication“ und vom Typ „OAuthTokenIssuer“ bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="39b1c-143">For example, you need to stage certificates of type AudioVideoAuthentication and OAuthTokenIssuer.</span></span> <span data-ttu-id="39b1c-144">Die minimale - EffectiveDate muss die zwei Zertifikate, in diesem Fall die OAuthTokenIssuer größer sein, die eine minimale Zeitabstand von 24 Stunden hat.</span><span class="sxs-lookup"><span data-stu-id="39b1c-144">Your minimum -EffectiveDate must be the greater of the two certificates, in this case the OAuthTokenIssuer, which has a minimum lead time of 24 hours.</span></span> <span data-ttu-id="39b1c-145">Wenn Sie das Zertifikat „AudioVideoAuthentication“ nicht mit einer Vorlaufzeit von 24 Stunden bereitstellen möchten, stellen Sie es separat mit einem Ihren Anforderungen entsprechenden Wert für „EffectiveDate“ bereit.</span><span class="sxs-lookup"><span data-stu-id="39b1c-145">If you do not want to stage the AudioVideoAuthentication certificate with a lead time of 24 hours, stage it separately with an EffectiveDate that is more to your requirements.</span></span>
  
### <a name="to-update-or-renew-an-av-edge-service-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="39b1c-146">So aktualisieren oder Erneuern eines A / V-edgedienst Zertifikat mit einem - Roll "und" - EffectiveDate-Parameter</span><span class="sxs-lookup"><span data-stu-id="39b1c-146">To update or renew an A/V Edge service certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="39b1c-147">Melden Sie sich auf dem lokalen Computer als Mitglied der Gruppe "Administratoren" an.</span><span class="sxs-lookup"><span data-stu-id="39b1c-147">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="39b1c-148">Fordern Sie eine Erneuerung oder ein neues AudioVideoAuthentication-Zertifikat mit exportierbarem privatem Schlüssel für das vorhandene Zertifikat für den A / V-edgedienst.</span><span class="sxs-lookup"><span data-stu-id="39b1c-148">Request a renewal or new AudioVideoAuthentication certificate with exportable private key for the existing certificate on the A/V Edge service.</span></span>
    
3. <span data-ttu-id="39b1c-149">Importieren Sie das neue AudioVideoAuthentication-Zertifikat auf dem Edge-Server und alle anderen Edge-Server in Ihrem Pool (Wenn Sie einen Pool bereitgestellt haben).</span><span class="sxs-lookup"><span data-stu-id="39b1c-149">Import the new AudioVideoAuthentication certificate to the Edge Server and all other Edge Server in your pool (if you have a pool deployed).</span></span>
    
4. <span data-ttu-id="39b1c-150">Das importierte Zertifikat mit dem Cmdlet Set-CsCertificate konfigurieren und Verwenden der - Roll-Parameter mit dem EffectiveDate - Parameter.</span><span class="sxs-lookup"><span data-stu-id="39b1c-150">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="39b1c-151">Das Gültigkeitsdatum sollte als Ablaufzeit des aktuellen Zertifikats (14:00:00 Uhr) minus Tokenlebensdauer (standardmäßig acht Stunden) festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="39b1c-151">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus token lifetime (by default eight hours).</span></span> <span data-ttu-id="39b1c-152">Dies liefert uns eine Zeit, die das Zertifikat auf aktiv eingestellt werden muss, und ist - EffectiveDate \<Zeichenfolge\>: "7/22/2015 6:00:00 AM".</span><span class="sxs-lookup"><span data-stu-id="39b1c-152">This gives us a time that the certificate must be set to active, and is the -EffectiveDate \<string\>: "7/22/2015 6:00:00 AM".</span></span> 
    
    > [!IMPORTANT]
    > <span data-ttu-id="39b1c-153">Für einen Edge-Pools müssen alle AudioVideoAuthentication Zertifikate bereitgestellt und von Datum und Uhrzeit definiert durch den Parameter "- EffectiveDate" des ersten Zertifikats bereitgestellt, um eine mögliche vermeiden bereitgestellt / V Communications Unterbrechung aufgrund der älteren das Zertifikat abläuft, bevor alle Client- und Consumer Token mithilfe des neuen Zertifikats erneuert wurden.</span><span class="sxs-lookup"><span data-stu-id="39b1c-153">For an Edge pool, you must have all AudioVideoAuthentication certificates deployed and provisioned by the date and time defined by the -EffectiveDate parameter of the first certificate deployed to avoid possible A/V communications disruption due to the older certificate expiring before all client and consumer tokens have been renewed using the new certificate.</span></span> 
  
    <span data-ttu-id="39b1c-154">Mit dem Parameter Roll "und" – EffectiveTime Befehl "Set-CsCertificate":</span><span class="sxs-lookup"><span data-stu-id="39b1c-154">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
   ```
   Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          <thumb print of new certificate> -Roll -EffectiveDate <date and time
          for certificate to become active>
   ```

    <span data-ttu-id="39b1c-155">Ein Set-CsCertificate-Beispielbefehl:</span><span class="sxs-lookup"><span data-stu-id="39b1c-155">An example Set-CsCertificate command:</span></span>
    
   ```
   Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/22/2015
          6:00:00 AM"
   ```

    > [!IMPORTANT]
    > <span data-ttu-id="39b1c-156">Die EffectiveDate muss entsprechend Ihrer Server Region und spracheinstellungen formatiert werden.</span><span class="sxs-lookup"><span data-stu-id="39b1c-156">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="39b1c-157">Im Beispiel werden die englischen (USA) Regions- und Spracheinstellungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="39b1c-157">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="39b1c-158">Um dem Vorgang zu veranschaulichen, Set-CsCertificate - Roll und -EffectiveDate verwenden, um die Stufe eines neuen Zertifikats für die neue AudioVideoAuthentication-Token gleichzeitiger Verwendung eines vorhandenen Zertifikats AudioVideoAuthentication überprüft, die verwendet werden Consumer ist eine visual Zeitachse ein effektives Mittel zum Verständnis des Prozess.</span><span class="sxs-lookup"><span data-stu-id="39b1c-158">To further understand the process that Set-CsCertificate, -Roll, and -EffectiveDate use to stage a new certificate for issuing new AudioVideoAuthentication tokens while still using an existing certificate to validate AudioVideoAuthentication that are in use by consumers, a visual timeline is an effective means of understanding the process.</span></span> <span data-ttu-id="39b1c-159">Im folgenden Beispiel der Administrator bestimmt, die dem A / V-Edgeserver das Zertifikat ist fällig bis zu 2:00:00 Uhr am 07/22/2015 ablaufen.</span><span class="sxs-lookup"><span data-stu-id="39b1c-159">In the following example, the administrator determines that the A/V Edge service certificate is due to expire at 2:00:00 PM on 07/22/2015.</span></span> <span data-ttu-id="39b1c-160">Er fordert und erhält ein neues Zertifikat und dann in seinem Pool in jedem Edgeserver importiert.</span><span class="sxs-lookup"><span data-stu-id="39b1c-160">He requests and receives a new certificate and imports it to each Edge Server in his pool.</span></span> <span data-ttu-id="39b1c-161">Um 2 Uhr am 07/22/2015, er beginnt mit Get-CsCertificate - Roll, - Fingerabdruck gleich der Zeichenfolge Fingerabdruck des neuen Zertifikats und -EffectiveTime auf 07/22/2015 festgelegt werden 6:00:00 Uhr.</span><span class="sxs-lookup"><span data-stu-id="39b1c-161">At 2 AM on 07/22/2015, he begins running Get-CsCertificate with -Roll, -Thumbprint equal to the thumbprint string of the new certificate, and -EffectiveTime set to 07/22/2015 6:00:00 AM.</span></span> <span data-ttu-id="39b1c-162">Er führt diesen Befehl auf jedem Edgeserver.</span><span class="sxs-lookup"><span data-stu-id="39b1c-162">He runs this command on each Edge Server.</span></span>
  
![Verwenden das Zurücksetzen und die EffectiveDate-Parameter.](../../media/Ops_Certificate_Set_Roll_EffectiveTime_Timeline.jpg)
  
|<span data-ttu-id="39b1c-164">**Beschriftung**</span><span class="sxs-lookup"><span data-stu-id="39b1c-164">**Callout**</span></span>|<span data-ttu-id="39b1c-165">**Phase**</span><span class="sxs-lookup"><span data-stu-id="39b1c-165">**Stage**</span></span>|
|:-----|:-----|
|<span data-ttu-id="39b1c-166">1</span><span class="sxs-lookup"><span data-stu-id="39b1c-166">1</span></span>  <br/> |<span data-ttu-id="39b1c-167">Start: 22.07.2015 12:00:00 Uhr</span><span class="sxs-lookup"><span data-stu-id="39b1c-167">Start: 7/22/2015 12:00:00 AM</span></span>  <br/> <span data-ttu-id="39b1c-p115">Das aktuelle AudioVideoAuthentication-Zertifikat endet am 22.07.2015 um 14:00 Uhr. Das wird durch den Ablaufzeitstempel auf dem Zertifikat festgelegt. Planen Sie für Ersatz und Rollover Ihres Zertifikats eine Überschneidung von acht Stunden ein (Standardtokenlebensdauer), bevor das vorhandene Zertifikat die Ablaufzeit erreicht. Die Vorlaufzeit von 2:00:00 Uhr wird in diesem Beispiel verwendet, damit der Administrator genügend Zeit hat, um die neuen Zertifikate vor der Ablaufzeit um 6:00:00 Uhr zu platzieren und bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="39b1c-p115">The current AudioVideoAuthentication certificate is due to expire at 2:00:00 PM on 7/22/2015. This is determined by the expires time stamp on the certificate. Plan your certificate replacement and rollover to account for an 8 hour overlap (default token lifetime) before the existing certificate reaches the expire time. The 2:00:00 AM lead time is used in this example to allow the administrator adequate time to place and provision the new certificates in advance of the 6:00:00 AM effective time.</span></span>  <br/> |
|<span data-ttu-id="39b1c-172">2</span><span class="sxs-lookup"><span data-stu-id="39b1c-172">2</span></span>  <br/> |<span data-ttu-id="39b1c-173">22.07.2015 02:00:00 Uhr – 22.07.2015 05:59:59 Uhr</span><span class="sxs-lookup"><span data-stu-id="39b1c-173">7/22/2015 2:00:00 AM - 7/22/2015 5:59:59 AM</span></span>  <br/> <span data-ttu-id="39b1c-174">Legen Sie Zertifikate auf Edge-Servern mit effektiven Zeit von 6:00:00 AM (4 Stunden Zeitabstand für dieses Beispiel ist, jedoch kann nicht länger) mithilfe des Set-CsCertificate-Typ \<Zertifikat Verwendungstyp\> -Fingerabdruck \<Fingerabdruck des neuen Zertifikats\> - Ein Rollback - EffectiveDate \<Datetime-Zeichenfolge der effektiven Zeit für das neue Zertifikat\></span><span class="sxs-lookup"><span data-stu-id="39b1c-174">Set Certificates on Edge Servers with effective time of 6:00:00 AM (4 hour lead time is for this example, but can be longer) using Set-CsCertificate -Type \<certificate usage type\> -Thumbprint \<thumbprint of new certificate\> -Roll -EffectiveDate \<datetime string of the effective time for new certificate\></span></span>  <br/> |
|<span data-ttu-id="39b1c-175">3</span><span class="sxs-lookup"><span data-stu-id="39b1c-175">3</span></span>  <br/> |<span data-ttu-id="39b1c-176">22.07.2015 06:00 Uhr – 22.07.2015 14:00 Uhr</span><span class="sxs-lookup"><span data-stu-id="39b1c-176">7/22/2015 6:00 AM - 7/22/2015 2:00 PM</span></span>  <br/> <span data-ttu-id="39b1c-p116">Zur Überprüfung von Token wird zunächst das neue Zertifikat ausprobiert und wenn das neue Zertifikat das Token nicht validieren kann, wird das alte Zertifikat verwendet. Dieser Prozess wird während der Überscheidungszeit von 8 Stunden (Standardtokenlebensdauer) für alle Token verwendet.</span><span class="sxs-lookup"><span data-stu-id="39b1c-p116">To validate tokens, the new certificate is tried first, and if the new certificate fails to validate the token, the old certificate is tried. This process is used for all tokens during the 8 hour (default token lifetime) overlap period.</span></span>  <br/> |
|<span data-ttu-id="39b1c-179">4</span><span class="sxs-lookup"><span data-stu-id="39b1c-179">4</span></span>  <br/> |<span data-ttu-id="39b1c-180">Ende: 22.07.2015 14:00:01 Uhr</span><span class="sxs-lookup"><span data-stu-id="39b1c-180">End: 7/22/2015 2:00:01 PM</span></span>  <br/> <span data-ttu-id="39b1c-181">Das alte Zertifikat ist abgelaufen und das neue Zertifikat ist nun in Kraft.</span><span class="sxs-lookup"><span data-stu-id="39b1c-181">Old certificate has expired and the new certificate has taken over.</span></span> <span data-ttu-id="39b1c-182">Alte Zertifikat kann sicher entfernt werden mit Remove-CsCertificate-Typ \<Zertifikat Verwendungstyp\> -vorherigen</span><span class="sxs-lookup"><span data-stu-id="39b1c-182">Old certificate can be safely removed with Remove-CsCertificate -Type \<certificate usage type\> -Previous</span></span>  <br/> |
   
<span data-ttu-id="39b1c-183">Wird das Gültigkeitsdatum (22.07.2015 06:00:00 Uhr) erreicht, werden alle neuen Token vom neuen Zertifikat ausgestellt.</span><span class="sxs-lookup"><span data-stu-id="39b1c-183">When the effective time is reached (7/22/2015 6:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="39b1c-184">Bei der Validierung von Token werden die Token zunächst anhand des neuen Zertifikats überprüft.</span><span class="sxs-lookup"><span data-stu-id="39b1c-184">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="39b1c-185">Schlägt die Überprüfung fehl, wird das alte Zertifikat verwendet.</span><span class="sxs-lookup"><span data-stu-id="39b1c-185">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="39b1c-186">Die Vorgehensweise, erst das neue und anschließend das alte Zertifikat zu verwenden, wird bis zur Ablaufzeit des alten Zertifikats fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="39b1c-186">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="39b1c-187">Sobald das alte Zertifikat abgelaufen ist (22.07.2015 14:00:00 Uhr), werden Token nur durch das neue Zertifikat überprüft.</span><span class="sxs-lookup"><span data-stu-id="39b1c-187">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="39b1c-188">Das alte Zertifikat kann sicher mit dem Remove-CsCertificate-Cmdlet entfernt werden mit dem vorherigen Parameter.</span><span class="sxs-lookup"><span data-stu-id="39b1c-188">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>

```
Remove-CsCertificate -Type AudioVideoAuthentication -Previous
```

### <a name="to-update-or-renew-an-oauthtokenissuer-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="39b1c-189">So aktualisieren oder Erneuen Sie ein OAuthTokenIssuer Zertifikat mit einem - Roll "und" - EffectiveDate-Parameter</span><span class="sxs-lookup"><span data-stu-id="39b1c-189">To update or renew an OAuthTokenIssuer certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="39b1c-190">Melden Sie sich auf dem lokalen Computer als Mitglied der Gruppe "Administratoren" an.</span><span class="sxs-lookup"><span data-stu-id="39b1c-190">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="39b1c-191">Fordern Sie eine Erneuerung oder ein neues OAuthTokenIssuer-Zertifikat mit exportierbarem privatem Schlüssel für das vorhandene Zertifikat für den Front-End-Server.</span><span class="sxs-lookup"><span data-stu-id="39b1c-191">Request a renewal or new OAuthTokenIssuer certificate with exportable private key for the existing certificate on the Front End Server.</span></span>
    
3. <span data-ttu-id="39b1c-192">Importieren Sie das neue OAuthTokenIssuer-Zertifikat auf einem Front-End-Server in Ihrem Pool (Wenn Sie einen Pool bereitgestellt haben).</span><span class="sxs-lookup"><span data-stu-id="39b1c-192">Import the new OAuthTokenIssuer certificate to a Front End Server in your pool (if you have a pool deployed).</span></span> <span data-ttu-id="39b1c-193">Das OAuthTokenIssuer-Zertifikat wird global repliziert und muss auf den Servern in Ihrer Bereitstellung aktualisiert und erneuert werden.</span><span class="sxs-lookup"><span data-stu-id="39b1c-193">The OAuthTokenIssuer certificate is replicated globally and only needs to be updated and renewed at any server in your deployment.</span></span> <span data-ttu-id="39b1c-194">Der Front-End-Server wird als Beispiel verwendet.</span><span class="sxs-lookup"><span data-stu-id="39b1c-194">The Front End Server is used as an example.</span></span>
    
4. <span data-ttu-id="39b1c-195">Das importierte Zertifikat mit dem Cmdlet Set-CsCertificate konfigurieren und Verwenden der - Roll-Parameter mit dem EffectiveDate - Parameter.</span><span class="sxs-lookup"><span data-stu-id="39b1c-195">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="39b1c-196">Das Gültigkeitsdatum sollte als Ablaufzeit des aktuellen Zertifikats (14:00:00 Uhr) minus mindestens 24 Stunden festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="39b1c-196">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus a minimum of 24 hours.</span></span> 
    
    <span data-ttu-id="39b1c-197">Mit dem Parameter Roll "und" – EffectiveTime Befehl "Set-CsCertificate":</span><span class="sxs-lookup"><span data-stu-id="39b1c-197">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
   ```
   Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint <thumb
          print of new certificate> -Roll -EffectiveDate <date and time for
          certificate to become active> -identity Global 
   ```

<span data-ttu-id="39b1c-198">Ein Set-CsCertificate-Beispielbefehl:</span><span class="sxs-lookup"><span data-stu-id="39b1c-198">An example Set-CsCertificate command:</span></span>
    
  ```
  Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/21/2015
          1:00:00 PM" 
  ```

> [!IMPORTANT]
> <span data-ttu-id="39b1c-199">Die EffectiveDate muss entsprechend Ihrer Server Region und spracheinstellungen formatiert werden.</span><span class="sxs-lookup"><span data-stu-id="39b1c-199">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="39b1c-200">Im Beispiel werden die englischen (USA) Regions- und Spracheinstellungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="39b1c-200">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="39b1c-201">Wird das Gültigkeitsdatum (21.07.2015 01:00:00 Uhr) erreicht, werden alle neuen Token vom neuen Zertifikat ausgestellt.</span><span class="sxs-lookup"><span data-stu-id="39b1c-201">When the effective time is reached (7/21/2015 1:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="39b1c-202">Bei der Validierung von Token werden die Token zunächst anhand des neuen Zertifikats überprüft.</span><span class="sxs-lookup"><span data-stu-id="39b1c-202">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="39b1c-203">Schlägt die Überprüfung fehl, wird das alte Zertifikat verwendet.</span><span class="sxs-lookup"><span data-stu-id="39b1c-203">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="39b1c-204">Die Vorgehensweise, erst das neue und anschließend das alte Zertifikat zu verwenden, wird bis zur Ablaufzeit des alten Zertifikats fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="39b1c-204">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="39b1c-205">Sobald das alte Zertifikat abgelaufen ist (22.07.2015 14:00:00 Uhr), werden Token nur durch das neue Zertifikat überprüft.</span><span class="sxs-lookup"><span data-stu-id="39b1c-205">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="39b1c-206">Das alte Zertifikat kann sicher mit dem Remove-CsCertificate-Cmdlet entfernt werden mit dem vorherigen Parameter.</span><span class="sxs-lookup"><span data-stu-id="39b1c-206">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>
```
Remove-CsCertificate -Type OAuthTokenIssuer -Previous 
```

## <a name="see-also"></a><span data-ttu-id="39b1c-207">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="39b1c-207">See also</span></span>

[<span data-ttu-id="39b1c-208">Verwalten von Server-zu-Server-Authentifizierung (OAuth) und partneranwendungen in Skype für Business Server</span><span class="sxs-lookup"><span data-stu-id="39b1c-208">Manage server-to-server authentication (OAuth) and partner applications in Skype for Business Server</span></span>](server-to-server-and-partner-applications.md)

[<span data-ttu-id="39b1c-209">Set-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="39b1c-209">Set-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/set-cscertificate?view=skype-ps)
  
[<span data-ttu-id="39b1c-210">Remove-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="39b1c-210">Remove-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/remove-cscertificate?view=skype-ps)
