---
title: Stage AV-und OAuth-Zertifikate in Skype for Business Server Using-Rolle in Satz-CsCertificate
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
audience: ITPro
ms.topic: article
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 22dec3cc-4b6b-4df2-b269-5b35df4731a7
description: 'Zusammenfassung: Stage AV-und OAuth-Zertifikate für Skype for Business Server.'
ms.openlocfilehash: 6a2e851aac8aae9aaecac424290195270415706c
ms.sourcegitcommit: ab47ff88f51a96aaf8bc99a6303e114d41ca5c2f
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/20/2019
ms.locfileid: "34286130"
---
# <a name="stage-av-and-oauth-certificates-in-skype-for-business-server-using--roll-in-set-cscertificate"></a><span data-ttu-id="c83ee-103">Stage AV-und OAuth-Zertifikate in Skype for Business Server Using-Rolle in Satz-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="c83ee-103">Stage AV and OAuth certificates in Skype for Business Server using -Roll in Set-CsCertificate</span></span>
 
<span data-ttu-id="c83ee-104">**Zusammenfassung:** Stage AV-und OAuth-Zertifikate für Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="c83ee-104">**Summary:** Stage AV and OAuth certificates for Skype for Business Server.</span></span>
  
<span data-ttu-id="c83ee-105">Audio/Video (a/V)-Kommunikation ist eine wichtige Komponente von Skype for Business Server.</span><span class="sxs-lookup"><span data-stu-id="c83ee-105">Audio/Video (A/V) communications is a key component of Skype for Business Server.</span></span> <span data-ttu-id="c83ee-106">Features wie Anwendungsfreigabe und Audio-und Videokonferenzen basieren auf den Zertifikaten, die dem a/v-Edgedienst, insbesondere dem a/v-Authentifizierungsdienst, zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="c83ee-106">Features such as application sharing and audio and video conferencing rely on the certificates assigned to the A/V Edge service, specifically the A/V Authentication service.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="c83ee-107">Dieses neue Feature ist für den A/V-Edgedienst und das OAuthTokenIssuer-Zertifikat konzipiert.</span><span class="sxs-lookup"><span data-stu-id="c83ee-107">This new feature is designed to work for the A/V Edge service and the OAuthTokenIssuer certificate.</span></span> <span data-ttu-id="c83ee-108">Andere Zertifikattypen können zusammen mit dem a/v-Edgedienst und dem OAuth-Zertifikattyp bereitgestellt werden, profitieren aber nicht vom Koexistenzsystem, das vom a/v-Edgedienst-Zertifikat bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="c83ee-108">Other certificate types can be provisioned along with the A/V Edge service and OAuth certificate type, but will not benefit from the coexistence behavior that the A/V Edge service certificate will.</span></span>
  
<span data-ttu-id="c83ee-109">Die für die Verwaltung von Skype for Business Server-Zertifikaten verwendeten PowerShell-Cmdlets der Skype for Business Server-Verwaltungsshell bezieht sich auf das A/V-Edgedienst-Zertifikat als AudioVideoAuthentication-Zertifikattyp und das OAuthServer-Zertifikat als typeOAuthTokenIssuer.</span><span class="sxs-lookup"><span data-stu-id="c83ee-109">The Skype for Business Server Management Shell PowerShell cmdlets used to manage Skype for Business Server certificates refers to the A/V Edge service certificate as the AudioVideoAuthentication certificate type and the OAuthServer certificate as typeOAuthTokenIssuer.</span></span> <span data-ttu-id="c83ee-110">Im weiteren Verlauf dieses Themas und zum eindeutigen Identifizieren der Zertifikate werden Sie mit dem gleichen Identifier-Typ, AudioVideoAuthentication andOAuthTokenIssuer, bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="c83ee-110">For the rest of this topic and to uniquely identify the certificates, they will be referred to by the same identifier type, AudioVideoAuthentication andOAuthTokenIssuer.</span></span>
  
<span data-ttu-id="c83ee-111">Der a/v-Authentifizierungsdienst ist für das Ausgeben von Token verantwortlich, die von Clients und anderen a/v-Consumern verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-111">The A/V Authentication service is responsible for issuing tokens that are used by clients and other A/V consumers.</span></span> <span data-ttu-id="c83ee-112">Die Token werden aus Attributen auf dem Zertifikat generiert, und wenn das Zertifikat abläuft, führt dies zu einem Verbindungsabbruch und einer Anforderung, erneut mit einem neuen Token zu verbinden, das vom neuen Zertifikat generiert wird.</span><span class="sxs-lookup"><span data-stu-id="c83ee-112">The tokens are generated from attributes on the certificate, and when the certificate expires, loss of connection and requirement to rejoin with a new token generated by the new certificate will result.</span></span> <span data-ttu-id="c83ee-113">Ein neues Feature in Skype for Business Server wird dieses Problem lindern – die Möglichkeit, ein neues Zertifikat im Vorfeld des alten zu inszenieren, das abläuft und es ermöglicht, dass beide Zertifikate während eines bestimmten Zeitraums weiterhin funktionieren.</span><span class="sxs-lookup"><span data-stu-id="c83ee-113">A new feature in Skype for Business Server will alleviate this problem - the ability to stage a new certificate in advance of the old one expiring and allowing both certificates to continue to function for a period of time.</span></span> <span data-ttu-id="c83ee-114">Dieses Feature verwendet aktualisierte Funktionen im Cmdlet "Satz-CsCertificate" von Skype for Business Server-Verwaltungsshell.</span><span class="sxs-lookup"><span data-stu-id="c83ee-114">This feature uses updated functionality in the Set-CsCertificate Skype for Business Server Management Shell cmdlet.</span></span> <span data-ttu-id="c83ee-115">Mit dem neuen Parameter-Rolle mit dem vorhandenen Parameter-EffectiveDate wird das neue AudioVideoAuthentication-Zertifikat im Zertifikatspeicher platziert.</span><span class="sxs-lookup"><span data-stu-id="c83ee-115">The new parameter -Roll, with the existing parameter -EffectiveDate, will place the new AudioVideoAuthentication certificate in the certificate store.</span></span> <span data-ttu-id="c83ee-116">Das ältere AudioVideoAuthentication-Zertifikat bleibt für ausgestellte Token weiterhin gültig.</span><span class="sxs-lookup"><span data-stu-id="c83ee-116">The older AudioVideoAuthentication certificate will still remain for issued tokens to be validated against.</span></span> <span data-ttu-id="c83ee-117">Beginnend mit dem Setzen des neuen AudioVideoAuthentication-Zertifikats wird die folgende Reihe von Ereignissen auftreten:</span><span class="sxs-lookup"><span data-stu-id="c83ee-117">Beginning with putting the new AudioVideoAuthentication certificate in place, the following series of events will occur:</span></span>
  
> [!TIP]
> <span data-ttu-id="c83ee-118">Mit den Skype for Business Server-Verwaltungsshell-Cmdlets für die Verwaltung von Zertifikaten können Sie für jeden Zweck auf dem Edgeserver getrennte und unterschiedliche Zertifikate anfordern.</span><span class="sxs-lookup"><span data-stu-id="c83ee-118">Using the Skype for Business Server Management Shell cmdlets for managing certificates, you can request separate and distinct certificates for each purpose on the Edge Server.</span></span> <span data-ttu-id="c83ee-119">Die Verwendung des Zertifikat-Assistenten im Bereitstellungs-Assistenten von Skype for Business Server unterstützt Sie beim Erstellen von Zertifikaten, \*\*\*\* ist in der Regel aber der Standardtyp, mit dem alle Zertifikat Verwendungen für den Edgeserver auf einem einzigen Zertifikat kombiniert werden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-119">Using the Certificate Wizard in the Skype for Business Server Deployment Wizard assists you in creating certificates, but is typically of the **default** type which couples all certificate uses for the Edge Server onto a single certificate.</span></span> <span data-ttu-id="c83ee-120">Die empfohlene Vorgehensweise bei Verwendung der Funktion für rollende Zertifikate besteht darin, das AudioVideoAuthentication-Zertifikat von den anderen Zertifikatzwecken zu lösen.</span><span class="sxs-lookup"><span data-stu-id="c83ee-120">The recommended practice if you are going to use the rolling certificate feature is to decouple the AudioVideoAuthentication certificate from the other certificate purposes.</span></span> <span data-ttu-id="c83ee-121">Sie können ein Zertifikat vom Typ „Standard“ bereitstellen, doch nur der AudioVideoAuthentication-Teil des kombinierten Zertifikats profitiert von dem Staging.</span><span class="sxs-lookup"><span data-stu-id="c83ee-121">You can provision and stage a certificate of the Default type, but only the AudioVideoAuthentication portion of the combined certificate will benefit from the staging.</span></span> <span data-ttu-id="c83ee-122">Ein Benutzer, der an (beispielsweise) einer Sofortnachrichtenunterhaltung teilhat, wenn das Zertifikat abläuft, muss sich abmelden und wieder anmelden, um das neue Zertifikat zu verwenden, das dem Access Edge-Dienst zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="c83ee-122">A user involved in (for example) an instant messaging conversation when the certificate expires will need to log out and log back in to make use of the new certificate associated with the Access Edge service.</span></span> <span data-ttu-id="c83ee-123">Ein ähnliches Verhalten tritt für einen Benutzer ein, der mit dem Webkonferenz-Edgedienst an einer Webkonferenz teilnimmt.</span><span class="sxs-lookup"><span data-stu-id="c83ee-123">Similar behavior will occur for a user involved in a Web conference using the Web Conferencing Edge service.</span></span> <span data-ttu-id="c83ee-124">Das OAuthTokenIssuer-Zertifikat ist ein bestimmter Typ, der auf allen Servern freigegeben ist.</span><span class="sxs-lookup"><span data-stu-id="c83ee-124">The OAuthTokenIssuer certificate is a specific type that is shared across all servers.</span></span> <span data-ttu-id="c83ee-125">Sie erstellen und verwalten das Zertifikat an einer zentralen Stelle, und das Zertifikat wird im zentralen Verwaltungsspeicher für alle anderen Server gespeichert.</span><span class="sxs-lookup"><span data-stu-id="c83ee-125">You create and manage the certificate in one place and the certificate is stored in the Central Management store for all other servers.</span></span>
  
<span data-ttu-id="c83ee-126">Zusätzliche Informationen werden benötigt, um die Optionen und Anforderungen bei der Verwendung des Set-CsCertificate-Cmdlets zum Bereitstellen von Zertifikaten vor dem Ablauf des aktuellen Zertifikats nachvollziehen zu können.</span><span class="sxs-lookup"><span data-stu-id="c83ee-126">Additional detail is needed to fully understand your options and requirements when using the Set-CsCertificate cmdlet and using it to stage certificates prior to the current certificate expiring.</span></span> <span data-ttu-id="c83ee-127">Der-Rolle-Parameter ist wichtig, aber im Wesentlichen ein einziger Zweck.</span><span class="sxs-lookup"><span data-stu-id="c83ee-127">The -Roll parameter is important, but essentially single purpose.</span></span> <span data-ttu-id="c83ee-128">Wenn Sie es als Parameter definieren, geben Sie "CsCertificate" an, dass Sie Informationen zu dem Zertifikat bereitstellen werden, das von Typ (beispielsweise AudioVideoAuthentication und OAuthTokenIssuer) betroffen sein wird, wenn das Zertifikat effektiv definiert von-EffectiveDate.</span><span class="sxs-lookup"><span data-stu-id="c83ee-128">If you define it as a parameter, you are telling Set-CsCertificate that you will be providing information about the certificate that will be affected defined by -Type (for example AudioVideoAuthentication and OAuthTokenIssuer), when the certificate will become effective defined by -EffectiveDate.</span></span>
  
 <span data-ttu-id="c83ee-129">**-Rolle**: der-Rolle-Parameter ist erforderlich und weist Abhängigkeiten auf, die zusammen mit ihm bereitgestellt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="c83ee-129">**-Roll**: The -Roll parameter is required and has dependencies that must be supplied along with it.</span></span> <span data-ttu-id="c83ee-130">Parameter, die zum Festlegen der betroffenen Zertifikate und ihrer Anwendungsweise erforderlich sind:</span><span class="sxs-lookup"><span data-stu-id="c83ee-130">Required parameters to fully define which certificates will be affected and how they will be applied:</span></span>
  
 <span data-ttu-id="c83ee-131">**-EffectiveDate**: der Parameter-EffectiveDate definiert, wann das neue Zertifikat mit dem aktuellen Zertifikat gemeinsam aktiv wird.</span><span class="sxs-lookup"><span data-stu-id="c83ee-131">**-EffectiveDate**: The parameter -EffectiveDate defines when the new certificate will become co-active with the current certificate.</span></span> <span data-ttu-id="c83ee-132">Das-EffectiveDate kann in der Nähe der Ablaufzeit des aktuellen Zertifikats liegen, oder es kann einen längeren Zeitraum dauern.</span><span class="sxs-lookup"><span data-stu-id="c83ee-132">The -EffectiveDate can be close to the expiry time of the current certificate, or it can be a longer period of time.</span></span> <span data-ttu-id="c83ee-133">Ein Empfohlenes Mindest-EffectiveDate für das AudioVideoAuthentication-Zertifikat wäre 8 Stunden, was die standardmäßige Token-Lebensdauer für AV-Edgedienst-Token ist, die mit dem AudioVideoAuthentication-Zertifikat ausgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-133">A recommended minimum -EffectiveDate for the AudioVideoAuthentication certificate would be 8 hours, which is the default token lifetime for AV Edge service tokens issued using the AudioVideoAuthentication certificate.</span></span>
  
<span data-ttu-id="c83ee-p109">Für das Bereitstellen der OAuthTokenIssuer-Zertifikate liegen verschiedene Anforderungen für die Vorlaufzeit vor, bevor das Zertifikat wirksam werden kann. Der Mindestwert des OAuthTokenIssuer-Zertifikats für die Vorlaufzeit sollte 24 Stunden vor der Ablaufzeit des aktuellen Zertifikats betragen. Die erweiterte Vorlaufzeit für die Koexistenz ist durch andere Serverrollen begründet, die von dem OAuthTokenIssuer-Zertifikat (beispielsweise Exchange Server) abhängen, das eine längere Aufbewahrungszeit für durch Zertifikate erstellte Authentifizierungs- und Verschlüsselungsschlüsselelemente besitzt.</span><span class="sxs-lookup"><span data-stu-id="c83ee-p109">When staging OAuthTokenIssuer certificates, there are different requirements for the lead time before the certificate can become effective. The minimum time that the OAuthTokenIssuer certificate should have for its lead time is 24 hours before the expiration time of the current certificate. The extended lead time for the coexistence is because of other server roles that are dependent on the OAuthTokenIssuer certificate (Exchange Server, for example) which has a longer retention time for certificate created authentication and encryption key materials.</span></span>
  
 <span data-ttu-id="c83ee-137">**-Thumbprint**: Beim Fingerabdruck handelt es sich um ein für dieses Zertifikat eindeutiges Attribut.</span><span class="sxs-lookup"><span data-stu-id="c83ee-137">**-Thumbprint**: The thumbprint is an attribute on the certificate that is unique to that certificate.</span></span> <span data-ttu-id="c83ee-138">Der-Fingerabdruck-Parameter wird verwendet, um das Zertifikat zu identifizieren, das von den Aktionen des Cmdlets "CsCertificate" betroffen ist.</span><span class="sxs-lookup"><span data-stu-id="c83ee-138">The -Thumbprint parameter is used to identify the certificate that will be affected by the actions of the Set-CsCertificate cmdlet.</span></span>
  
 <span data-ttu-id="c83ee-139">**-Type**: der-Type-Parameter kann einen einzelnen Zertifikat Nutzungstyp oder eine durch trennzeichengetrennte Liste der Zertifikat Verwendungstypen akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="c83ee-139">**-Type**: The -Type parameter can accept a single certificate usage type or a comma separated list of certificate usage types.</span></span> <span data-ttu-id="c83ee-140">Die Zertifikattypen geben für das Cmdlet und den Server an, worin der Zweck des Zertifikats besteht.</span><span class="sxs-lookup"><span data-stu-id="c83ee-140">The certificate types are those that identify to the cmdlet and to the server what the purpose of the certificate is.</span></span> <span data-ttu-id="c83ee-141">Geben Sie beispielsweise AudioVideoAuthentication ein, um den A/V-Edgedienst und den AV-Authentifizierungsdienst zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-141">For example, type AudioVideoAuthentication is for use by the A/V Edge service and the AV Authentication service.</span></span> <span data-ttu-id="c83ee-142">Wenn Sie verschiedene Zertifikattypen zum gleichen Zeitpunkt bereitstellen möchten, müssen Sie die längste effektive Mindestvorlaufzeit für die Zertifikate berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="c83ee-142">If you decide to stage and provision certificates of a different type at the same time, you must consider the longest required minimum effective lead time for the certificates.</span></span> <span data-ttu-id="c83ee-143">Sie müssen beispielsweise Zertifikate vom Typ „AudioVideoAuthentication“ und vom Typ „OAuthTokenIssuer“ bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="c83ee-143">For example, you need to stage certificates of type AudioVideoAuthentication and OAuthTokenIssuer.</span></span> <span data-ttu-id="c83ee-144">Ihre Mindest-EffectiveDate muss das größere der beiden Zertifikate sein, in diesem Fall die OAuthTokenIssuer, die eine minimale Durchlaufzeit von 24 Stunden hat.</span><span class="sxs-lookup"><span data-stu-id="c83ee-144">Your minimum -EffectiveDate must be the greater of the two certificates, in this case the OAuthTokenIssuer, which has a minimum lead time of 24 hours.</span></span> <span data-ttu-id="c83ee-145">Wenn Sie das Zertifikat „AudioVideoAuthentication“ nicht mit einer Vorlaufzeit von 24 Stunden bereitstellen möchten, stellen Sie es separat mit einem Ihren Anforderungen entsprechenden Wert für „EffectiveDate“ bereit.</span><span class="sxs-lookup"><span data-stu-id="c83ee-145">If you do not want to stage the AudioVideoAuthentication certificate with a lead time of 24 hours, stage it separately with an EffectiveDate that is more to your requirements.</span></span>
  
### <a name="to-update-or-renew-an-av-edge-service-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="c83ee-146">So aktualisieren oder erneuern Sie ein a/V-Edgedienst-Zertifikat mit einem-Rollen-und-EffectiveDate-Parameter</span><span class="sxs-lookup"><span data-stu-id="c83ee-146">To update or renew an A/V Edge service certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="c83ee-147">Melden Sie sich auf dem lokalen Computer als Mitglied der Gruppe "Administratoren" an.</span><span class="sxs-lookup"><span data-stu-id="c83ee-147">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="c83ee-148">Fordern Sie ein Erneuerungs-oder neues AudioVideoAuthentication-Zertifikat mit exportier barem privaten Schlüssel für das vorhandene Zertifikat im a/V-Edgedienst an.</span><span class="sxs-lookup"><span data-stu-id="c83ee-148">Request a renewal or new AudioVideoAuthentication certificate with exportable private key for the existing certificate on the A/V Edge service.</span></span>
    
3. <span data-ttu-id="c83ee-149">Importieren Sie das neue AudioVideoAuthentication-Zertifikat auf den Edgeserver und alle anderen Edgeserver in Ihrem Pool (wenn Sie einen Pool bereitgestellt haben).</span><span class="sxs-lookup"><span data-stu-id="c83ee-149">Import the new AudioVideoAuthentication certificate to the Edge Server and all other Edge Server in your pool (if you have a pool deployed).</span></span>
    
4. <span data-ttu-id="c83ee-150">Konfigurieren Sie das importierte Zertifikat mit dem Cmdlet "Satz-CsCertificate", und verwenden Sie den Parameter "-Rolle" mit dem Parameter-EffectiveDate.</span><span class="sxs-lookup"><span data-stu-id="c83ee-150">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="c83ee-151">Das Gültigkeitsdatum sollte als Ablaufzeit des aktuellen Zertifikats (14:00:00 Uhr) minus Tokenlebensdauer (standardmäßig acht Stunden) festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-151">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus token lifetime (by default eight hours).</span></span> <span data-ttu-id="c83ee-152">Dadurch erhalten wir eine Uhrzeit, zu der das Zertifikat auf "aktiv" festgesetzt werden muss, \<und\>ist die-EffectiveDate-Zeichenfolge: "7/22/2015 6:00:00 am".</span><span class="sxs-lookup"><span data-stu-id="c83ee-152">This gives us a time that the certificate must be set to active, and is the -EffectiveDate \<string\>: "7/22/2015 6:00:00 AM".</span></span> 
    
    > [!IMPORTANT]
    > <span data-ttu-id="c83ee-153">Bei einem Edge-Pool müssen alle AudioVideoAuthentication-Zertifikate bereitgestellt und durch das Datum und die Uhrzeit bereitgestellt werden, die durch den-EffectiveDate-Parameter des ersten bereitgestellten Zertifikats definiert sind, um mögliche A/V-KOMMUNIKATIONSUNTERBRECHUNGEN aufgrund der älteren Zertifikat läuft ab, bevor alle Client-und Consumer-Token mit dem neuen Zertifikat erneuert wurden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-153">For an Edge pool, you must have all AudioVideoAuthentication certificates deployed and provisioned by the date and time defined by the -EffectiveDate parameter of the first certificate deployed to avoid possible A/V communications disruption due to the older certificate expiring before all client and consumer tokens have been renewed using the new certificate.</span></span> 
  
    <span data-ttu-id="c83ee-154">Der Befehl "Satz-CsCertificate" mit dem Parameter "-Rolle" und "-effektiv":</span><span class="sxs-lookup"><span data-stu-id="c83ee-154">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
   ```
   Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          <thumb print of new certificate> -Roll -EffectiveDate <date and time
          for certificate to become active>
   ```

    <span data-ttu-id="c83ee-155">Ein Set-CsCertificate-Beispielbefehl:</span><span class="sxs-lookup"><span data-stu-id="c83ee-155">An example Set-CsCertificate command:</span></span>
    
   ```
   Set-CsCertificate -Type AudioVideoAuthentication -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/22/2015
          6:00:00 AM"
   ```

    > [!IMPORTANT]
    > <span data-ttu-id="c83ee-156">Die EffectiveDate muss so formatiert sein, dass Sie den Regions-und Spracheinstellungen Ihres Servers entspricht.</span><span class="sxs-lookup"><span data-stu-id="c83ee-156">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="c83ee-157">Im Beispiel werden die englischen (USA) Regions- und Spracheinstellungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="c83ee-157">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="c83ee-158">So verstehen Sie den Prozess, der von CsCertificate,-Rolle und-EffectiveDate verwendet wird, um ein neues Zertifikat zur Ausgabe neuer AudioVideoAuthentication-Token zu inszenieren, während weiterhin ein vorhandenes Zertifikat zur Überprüfung von AudioVideoAuthentication verwendet wird von Verbrauchern ist eine visuelle Zeitachse ein wirksames Mittel, um den Prozess zu verstehen.</span><span class="sxs-lookup"><span data-stu-id="c83ee-158">To further understand the process that Set-CsCertificate, -Roll, and -EffectiveDate use to stage a new certificate for issuing new AudioVideoAuthentication tokens while still using an existing certificate to validate AudioVideoAuthentication that are in use by consumers, a visual timeline is an effective means of understanding the process.</span></span> <span data-ttu-id="c83ee-159">Im folgenden Beispiel wird vom Administrator festgelegt, dass das A/V-Edgedienst-Zertifikat um 2:00:00 Uhr am 07/22/2015 abläuft.</span><span class="sxs-lookup"><span data-stu-id="c83ee-159">In the following example, the administrator determines that the A/V Edge service certificate is due to expire at 2:00:00 PM on 07/22/2015.</span></span> <span data-ttu-id="c83ee-160">Er fordert und empfängt ein neues Zertifikat und importiert es auf jeden Edgeserver in seinem Pool.</span><span class="sxs-lookup"><span data-stu-id="c83ee-160">He requests and receives a new certificate and imports it to each Edge Server in his pool.</span></span> <span data-ttu-id="c83ee-161">Um 2 Uhr auf 07/22/2015 beginnt er mit der Ausführung von Get-CsCertificate mit-Rolle,-Fingerabdruck, der der Fingerabdruck Zeichenfolge des neuen Zertifikats entspricht, und-Effektivzeit, die auf 07/22/2015 6:00:00 Uhr eingestellt ist.</span><span class="sxs-lookup"><span data-stu-id="c83ee-161">At 2 AM on 07/22/2015, he begins running Get-CsCertificate with -Roll, -Thumbprint equal to the thumbprint string of the new certificate, and -EffectiveTime set to 07/22/2015 6:00:00 AM.</span></span> <span data-ttu-id="c83ee-162">Er führt diesen Befehl auf jedem Edgeserver aus.</span><span class="sxs-lookup"><span data-stu-id="c83ee-162">He runs this command on each Edge Server.</span></span>
  
![Verwenden des Rollen-und des EffectiveDate-Parameters](../../media/Ops_Certificate_Set_Roll_EffectiveTime_Timeline.jpg)
  
|<span data-ttu-id="c83ee-164">**Beschriftung**</span><span class="sxs-lookup"><span data-stu-id="c83ee-164">**Callout**</span></span>|<span data-ttu-id="c83ee-165">**Phase**</span><span class="sxs-lookup"><span data-stu-id="c83ee-165">**Stage**</span></span>|
|:-----|:-----|
|<span data-ttu-id="c83ee-166">1</span><span class="sxs-lookup"><span data-stu-id="c83ee-166">1</span></span>  <br/> |<span data-ttu-id="c83ee-167">Start: 22.07.2015 12:00:00 Uhr</span><span class="sxs-lookup"><span data-stu-id="c83ee-167">Start: 7/22/2015 12:00:00 AM</span></span>  <br/> <span data-ttu-id="c83ee-p115">Das aktuelle AudioVideoAuthentication-Zertifikat endet am 22.07.2015 um 14:00 Uhr. Das wird durch den Ablaufzeitstempel auf dem Zertifikat festgelegt. Planen Sie für Ersatz und Rollover Ihres Zertifikats eine Überschneidung von acht Stunden ein (Standardtokenlebensdauer), bevor das vorhandene Zertifikat die Ablaufzeit erreicht. Die Vorlaufzeit von 2:00:00 Uhr wird in diesem Beispiel verwendet, damit der Administrator genügend Zeit hat, um die neuen Zertifikate vor der Ablaufzeit um 6:00:00 Uhr zu platzieren und bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="c83ee-p115">The current AudioVideoAuthentication certificate is due to expire at 2:00:00 PM on 7/22/2015. This is determined by the expires time stamp on the certificate. Plan your certificate replacement and rollover to account for an 8 hour overlap (default token lifetime) before the existing certificate reaches the expire time. The 2:00:00 AM lead time is used in this example to allow the administrator adequate time to place and provision the new certificates in advance of the 6:00:00 AM effective time.</span></span>  <br/> |
|<span data-ttu-id="c83ee-172">2</span><span class="sxs-lookup"><span data-stu-id="c83ee-172">2</span></span>  <br/> |<span data-ttu-id="c83ee-173">22.07.2015 02:00:00 Uhr – 22.07.2015 05:59:59 Uhr</span><span class="sxs-lookup"><span data-stu-id="c83ee-173">7/22/2015 2:00:00 AM - 7/22/2015 5:59:59 AM</span></span>  <br/> <span data-ttu-id="c83ee-174">Sie können Zertifikate auf Edgeserver mit einer effektiven Zeitspanne von 6:00:00 am (4 Stunden Vorlaufzeit für dieses Beispiel, aber länger) verwenden, indem Sie \<die CsCertificate-\> Art des \<Zertifikat Verwendungs Typs-\> Fingerabdruck des neuen Zertifikats-Daumenabdruck des neuen Zertifikats- EffectiveDate \<DateTime-Zeichenfolge für die effektive Zeit für neues Zertifikat\></span><span class="sxs-lookup"><span data-stu-id="c83ee-174">Set Certificates on Edge Servers with effective time of 6:00:00 AM (4 hour lead time is for this example, but can be longer) using Set-CsCertificate -Type \<certificate usage type\> -Thumbprint \<thumbprint of new certificate\> -Roll -EffectiveDate \<datetime string of the effective time for new certificate\></span></span>  <br/> |
|<span data-ttu-id="c83ee-175">3</span><span class="sxs-lookup"><span data-stu-id="c83ee-175">3</span></span>  <br/> |<span data-ttu-id="c83ee-176">22.07.2015 06:00 Uhr – 22.07.2015 14:00 Uhr</span><span class="sxs-lookup"><span data-stu-id="c83ee-176">7/22/2015 6:00 AM - 7/22/2015 2:00 PM</span></span>  <br/> <span data-ttu-id="c83ee-p116">Zur Überprüfung von Token wird zunächst das neue Zertifikat ausprobiert und wenn das neue Zertifikat das Token nicht validieren kann, wird das alte Zertifikat verwendet. Dieser Prozess wird während der Überscheidungszeit von 8 Stunden (Standardtokenlebensdauer) für alle Token verwendet.</span><span class="sxs-lookup"><span data-stu-id="c83ee-p116">To validate tokens, the new certificate is tried first, and if the new certificate fails to validate the token, the old certificate is tried. This process is used for all tokens during the 8 hour (default token lifetime) overlap period.</span></span>  <br/> |
|<span data-ttu-id="c83ee-179">4</span><span class="sxs-lookup"><span data-stu-id="c83ee-179">4</span></span>  <br/> |<span data-ttu-id="c83ee-180">Ende: 22.07.2015 14:00:01 Uhr</span><span class="sxs-lookup"><span data-stu-id="c83ee-180">End: 7/22/2015 2:00:01 PM</span></span>  <br/> <span data-ttu-id="c83ee-181">Das alte Zertifikat ist abgelaufen und das neue Zertifikat ist nun in Kraft.</span><span class="sxs-lookup"><span data-stu-id="c83ee-181">Old certificate has expired and the new certificate has taken over.</span></span> <span data-ttu-id="c83ee-182">Altes Zertifikat kann sicher mit Remove-CsCertificate-Type \<Certificate Usage Type\> -Previous entfernt werden</span><span class="sxs-lookup"><span data-stu-id="c83ee-182">Old certificate can be safely removed with Remove-CsCertificate -Type \<certificate usage type\> -Previous</span></span>  <br/> |
   
<span data-ttu-id="c83ee-183">Wird das Gültigkeitsdatum (22.07.2015 06:00:00 Uhr) erreicht, werden alle neuen Token vom neuen Zertifikat ausgestellt.</span><span class="sxs-lookup"><span data-stu-id="c83ee-183">When the effective time is reached (7/22/2015 6:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="c83ee-184">Bei der Validierung von Token werden die Token zunächst anhand des neuen Zertifikats überprüft.</span><span class="sxs-lookup"><span data-stu-id="c83ee-184">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="c83ee-185">Schlägt die Überprüfung fehl, wird das alte Zertifikat verwendet.</span><span class="sxs-lookup"><span data-stu-id="c83ee-185">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="c83ee-186">Die Vorgehensweise, erst das neue und anschließend das alte Zertifikat zu verwenden, wird bis zur Ablaufzeit des alten Zertifikats fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="c83ee-186">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="c83ee-187">Sobald das alte Zertifikat abgelaufen ist (22.07.2015 14:00:00 Uhr), werden Token nur durch das neue Zertifikat überprüft.</span><span class="sxs-lookup"><span data-stu-id="c83ee-187">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="c83ee-188">Das alte Zertifikat kann mithilfe des Cmdlets Remove-CsCertificate mit dem Parameter-Previous problemlos entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-188">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>

```
Remove-CsCertificate -Type AudioVideoAuthentication -Previous
```

### <a name="to-update-or-renew-an-oauthtokenissuer-certificate-with-a--roll-and--effectivedate-parameters"></a><span data-ttu-id="c83ee-189">So aktualisieren oder erneuern Sie ein OAuthTokenIssuer-Zertifikat mit einem-Rollen-und-EffectiveDate-Parameter</span><span class="sxs-lookup"><span data-stu-id="c83ee-189">To update or renew an OAuthTokenIssuer certificate with a -Roll and -EffectiveDate parameters</span></span>

1. <span data-ttu-id="c83ee-190">Melden Sie sich auf dem lokalen Computer als Mitglied der Gruppe "Administratoren" an.</span><span class="sxs-lookup"><span data-stu-id="c83ee-190">Log on to the local computer as a member of the Administrators group.</span></span>
    
2. <span data-ttu-id="c83ee-191">Fordern Sie ein Verlängerungs-oder neues OAuthTokenIssuer-Zertifikat mit exportier barem privaten Schlüssel für das vorhandene Zertifikat auf dem Front-End-Server an.</span><span class="sxs-lookup"><span data-stu-id="c83ee-191">Request a renewal or new OAuthTokenIssuer certificate with exportable private key for the existing certificate on the Front End Server.</span></span>
    
3. <span data-ttu-id="c83ee-192">Importieren Sie das neue OAuthTokenIssuer-Zertifikat in einen Front-End-Server in Ihrem Pool (wenn Sie einen Pool bereitgestellt haben).</span><span class="sxs-lookup"><span data-stu-id="c83ee-192">Import the new OAuthTokenIssuer certificate to a Front End Server in your pool (if you have a pool deployed).</span></span> <span data-ttu-id="c83ee-193">Das OAuthTokenIssuer-Zertifikat wird global repliziert und muss auf den Servern in Ihrer Bereitstellung aktualisiert und erneuert werden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-193">The OAuthTokenIssuer certificate is replicated globally and only needs to be updated and renewed at any server in your deployment.</span></span> <span data-ttu-id="c83ee-194">Als Beispiel wird der Front-End-Server verwendet.</span><span class="sxs-lookup"><span data-stu-id="c83ee-194">The Front End Server is used as an example.</span></span>
    
4. <span data-ttu-id="c83ee-195">Konfigurieren Sie das importierte Zertifikat mit dem Cmdlet "Satz-CsCertificate", und verwenden Sie den Parameter "-Rolle" mit dem Parameter-EffectiveDate.</span><span class="sxs-lookup"><span data-stu-id="c83ee-195">Configure the imported certificate with the Set-CsCertificate cmdlet and use the -Roll parameter with the -EffectiveDate parameter.</span></span> <span data-ttu-id="c83ee-196">Das Gültigkeitsdatum sollte als Ablaufzeit des aktuellen Zertifikats (14:00:00 Uhr) minus mindestens 24 Stunden festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-196">The effective date should be defined as the current certificate expire time (14:00:00, or 2:00:00 PM) minus a minimum of 24 hours.</span></span> 
    
    <span data-ttu-id="c83ee-197">Der Befehl "Satz-CsCertificate" mit dem Parameter "-Rolle" und "-effektiv":</span><span class="sxs-lookup"><span data-stu-id="c83ee-197">The Set-CsCertificate command with the -Roll and -EffectiveTime parameter:</span></span>
    
   ```
   Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint <thumb
          print of new certificate> -Roll -EffectiveDate <date and time for
          certificate to become active> -identity Global 
   ```

<span data-ttu-id="c83ee-198">Ein Set-CsCertificate-Beispielbefehl:</span><span class="sxs-lookup"><span data-stu-id="c83ee-198">An example Set-CsCertificate command:</span></span>
    
  ```
  Set-CsCertificate -Type OAuthTokenIssuer -Thumbprint
          "B142918E463981A76503828BB1278391B716280987B" -Roll -EffectiveDate "7/21/2015
          1:00:00 PM" 
  ```

> [!IMPORTANT]
> <span data-ttu-id="c83ee-199">Die EffectiveDate muss so formatiert sein, dass Sie den Regions-und Spracheinstellungen Ihres Servers entspricht.</span><span class="sxs-lookup"><span data-stu-id="c83ee-199">The EffectiveDate must be formatted to match your server's region and language settings.</span></span> <span data-ttu-id="c83ee-200">Im Beispiel werden die englischen (USA) Regions- und Spracheinstellungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="c83ee-200">The example uses the US English Region and Language settings</span></span> 
  
<span data-ttu-id="c83ee-201">Wird das Gültigkeitsdatum (21.07.2015 01:00:00 Uhr) erreicht, werden alle neuen Token vom neuen Zertifikat ausgestellt.</span><span class="sxs-lookup"><span data-stu-id="c83ee-201">When the effective time is reached (7/21/2015 1:00:00 AM), all new tokens are issued by the new certificate.</span></span> <span data-ttu-id="c83ee-202">Bei der Validierung von Token werden die Token zunächst anhand des neuen Zertifikats überprüft.</span><span class="sxs-lookup"><span data-stu-id="c83ee-202">When validating tokens, tokens will first be validated against the new certificate.</span></span> <span data-ttu-id="c83ee-203">Schlägt die Überprüfung fehl, wird das alte Zertifikat verwendet.</span><span class="sxs-lookup"><span data-stu-id="c83ee-203">If the validation fails, the old certificate is tried.</span></span> <span data-ttu-id="c83ee-204">Die Vorgehensweise, erst das neue und anschließend das alte Zertifikat zu verwenden, wird bis zur Ablaufzeit des alten Zertifikats fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="c83ee-204">The process of trying the new and falling back to the old certificate will continue until the expiry time of the old certificate.</span></span> <span data-ttu-id="c83ee-205">Sobald das alte Zertifikat abgelaufen ist (22.07.2015 14:00:00 Uhr), werden Token nur durch das neue Zertifikat überprüft.</span><span class="sxs-lookup"><span data-stu-id="c83ee-205">Once the old certificate has expired (7/22/2015 2:00:00 PM), tokens will only be validated by the new certificate.</span></span> <span data-ttu-id="c83ee-206">Das alte Zertifikat kann mithilfe des Cmdlets Remove-CsCertificate mit dem Parameter-Previous problemlos entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="c83ee-206">The old certificate can be safely removed using the Remove-CsCertificate cmdlet with the -Previous parameter.</span></span>
```
Remove-CsCertificate -Type OAuthTokenIssuer -Previous 
```

## <a name="see-also"></a><span data-ttu-id="c83ee-207">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="c83ee-207">See also</span></span>

[<span data-ttu-id="c83ee-208">Verwalten von Server-zu-Server-Authentifizierung (OAuth) und Partneranwendungen in Skype for Business Server</span><span class="sxs-lookup"><span data-stu-id="c83ee-208">Manage server-to-server authentication (OAuth) and partner applications in Skype for Business Server</span></span>](server-to-server-and-partner-applications.md)

[<span data-ttu-id="c83ee-209">Set-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="c83ee-209">Set-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/set-cscertificate?view=skype-ps)
  
[<span data-ttu-id="c83ee-210">Remove-CsCertificate</span><span class="sxs-lookup"><span data-stu-id="c83ee-210">Remove-CsCertificate</span></span>](https://docs.microsoft.com/powershell/module/skype/remove-cscertificate?view=skype-ps)
